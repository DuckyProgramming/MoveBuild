combatant.prototype.display=function(){
    if(this.fade>0&&this.size>0){
        this.calculateParts()
        this.layer.push()
        this.layer.translate(this.position.x+this.offset.position.x,this.position.y+this.offset.position.y)
        this.layer.rotate(this.direction)
        this.layer.scale(this.size)
        if(this.infoAnim.orb>0){
            for(let a=0,la=this.orbs.length;a<la;a++){
                if(lcos(this.time/game.animRate+360*a/la)<=0){
                    displayOrb(this.layer,lsin(this.time/game.animRate+360*a/la)*30,-45+lcos(this.time/game.animRate+360*a/la)*10,this.infoAnim.orbSpec[a],this.orbDetail[a],0,1,this.fade*this.infoAnim.orb,a)
                }
            }
        }
        if(this.team>0&!this.construct&&!this.support||this.name=='Setsuna'){
            this.layer.translate(0,-48)
            for(let a=0,la=this.infoAnim.stance.length;a<la;a++){
                if(this.infoAnim.stance[a]>0){
                    switch(a){
                        case 1:
                            this.layer.fill(255,75,75,this.fade*this.infoAnim.stance[a]*0.5)
                            for(let b=0,lb=12;b<lb;b++){
                                this.layer.rotate(30)
                                this.layer.triangle(-5,0,5,0,0,-50)
                            }
                        break
                        case 2:
                            this.layer.fill(150,255,255,this.fade*this.infoAnim.stance[a]*0.5)
                            for(let b=0,lb=12;b<lb;b++){
                                this.layer.rotate(30)
                                this.layer.rect(0,-27,9,45)
                            }
                        break
                        case 3:
                            this.layer.stroke(240,this.fade*this.infoAnim.stance[a]*0.5)
                            this.layer.strokeWeight(4)
                            this.layer.noFill()
                            for(let b=0,lb=12;b<lb;b++){
                                this.layer.rotate(30)
                                this.layer.arc(24,0,48,48,-180,-30)
                            }
                            this.layer.strokeWeight(2)
                            for(let b=0,lb=12;b<lb;b++){
                                this.layer.rotate(30)
                                this.layer.arc(24,0,48,48,-180,-30)
                            }
                        break
                        case 4:
                            this.layer.fill(150,75,0,this.fade*this.infoAnim.stance[a]*0.5)
                            this.layer.rect(0,0,40)
                            this.layer.rotate(45)
                            this.layer.rect(0,0,40)
                            this.layer.rect(-30,-30,15,15)
                            this.layer.rect(-30,30,15,15)
                            this.layer.rect(30,-30,15,15)
                            this.layer.rect(30,30,15,15)
                            this.layer.rotate(-45)
                            this.layer.rect(-30,-30,15,15)
                            this.layer.rect(-30,30,15,15)
                            this.layer.rect(30,-30,15,15)
                            this.layer.rect(30,30,15,15)
                        break
                        case 5:
                            this.layer.fill(255,200,255,this.fade*this.infoAnim.stance[a]*0.5)
                            for(let b=0,lb=12;b<lb;b++){
                                this.layer.rotate(360/lb)
                                this.layer.triangle(-6,-45,6,-45,0,0)
                            }
                        break
                        case 6:
                            this.layer.fill(125,50,100,this.fade*this.infoAnim.stance[a]*0.5)
                            for(let b=0,lb=12;b<lb;b++){
                                this.layer.rotate(30)
                                this.layer.beginShape()
                                this.layer.vertex(-5,0)
                                this.layer.bezierVertex(-4,-30,-2,-50,0,-50)
                                this.layer.bezierVertex(2,-50,4,-30,5,0)
                                this.layer.endShape()
                            }
                        break
                    }
                }
            }
            this.layer.noStroke()
            this.layer.fill(255,200,255,this.fade*0.5)
            for(let a=0,la=this.infoAnim.faith.length;a<la;a++){
                if(this.infoAnim.faith[a]>0){
                    this.layer.ellipse(lsin(360*(a+0.5)/la)*60,lcos(360*(a+0.5)/la)*-60,12)
                }
            }
            if(this.infoAnim.elemental>0){
                this.layer.noFill()
                this.layer.stroke(150,200,255,this.fade*this.infoAnim.elemental*0.5)
                for(let a=0,la=6;a<la;a++){
                    if(lcos(this.anim.direction+a/la*360+this.time*0.5)<0){
                        this.layer.strokeWeight(1)
                        this.layer.bezier(
                            -5*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,lsin(this.anim.direction+a/la*360+this.time)*12,
                            -3*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,-3.5+lsin(this.anim.direction+a/la*360+this.time)*12,
                            3*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,-3.5+lsin(this.anim.direction+a/la*360+this.time)*12,
                            5*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,lsin(this.anim.direction+a/la*360+this.time)*12)
                        this.layer.bezier(
                            -5*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,lsin(this.anim.direction+a/la*360+this.time)*12,
                            -3*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,3.5+lsin(this.anim.direction+a/la*360+this.time)*12,
                            3*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,3.5+lsin(this.anim.direction+a/la*360+this.time)*12,
                            5*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,lsin(this.anim.direction+a/la*360+this.time)*12)
                        this.layer.strokeWeight(3)
                        this.layer.point(lsin(this.anim.direction+a/la*360+this.time*0.5)*33,lsin(this.anim.direction+a/la*360+this.time)*12)
                    }
                    if(lcos(this.anim.direction+a/la*360-this.time*0.4)<0){
                        this.layer.strokeWeight(1)
                        this.layer.bezier(
                            -5*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            -3*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,-3.5+lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            3*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,-3.5+lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            5*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,lsin(this.anim.direction+a/la*360+this.time*0.75)*18)
                        this.layer.bezier(
                            -5*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            -3*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,3.5+lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            3*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,3.5+lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            5*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,lsin(this.anim.direction+a/la*360+this.time*0.75)*18)
                        this.layer.strokeWeight(3)
                        this.layer.point(lsin(this.anim.direction+a/la*360-this.time*0.4)*27,lsin(this.anim.direction+a/la*360+this.time*0.75)*18)
                    }
                }
            }
            this.layer.translate(0,48)
        }
        switch(this.name){
            case 'Placeholder':
                this.layer.rotate(-this.anim.direction)
                this.layer.fill(...this.flashColor([200,200,200]),this.fade)
                this.layer.noStroke()
                this.layer.triangle(-6,-8,6,-8,0,12)
            break
            case 'Joe':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-48,13,39)
                    this.layer.fill(...this.flashColor(this.color.skin.upperBody),this.fade*this.fades.skin.body)
                    this.layer.arc(0,-48,13.5,39,-180,0)
                }
                if(this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.rect(0,-48,13,2)
                }
                if(this.trigger.display.logo&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.logo),this.fade*this.fades.logo)
                    this.layer.rect(lsin(this.anim.direction)*6.5,-54,8*lcos(this.anim.direction),2)
                    this.layer.ellipse(lsin(this.anim.direction)*6.5,-54,4*lcos(this.anim.direction),4)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-81,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'George':
                if(this.trigger.display.visor&&lcos(this.anim.direction)<0){
                    this.layer.fill(this.color.visor[0],this.color.visor[1],this.color.visor[2],this.fade*this.fades.visor*0.5)
                    this.layer.noStroke()
                    if(this.trigger.display.extra.damage){
                        this.layer.triangle(lsin(this.anim.direction)*16-9*lcos(this.anim.direction),-84,lsin(this.anim.direction)*16+9*lcos(this.anim.direction),-84,lsin(this.anim.direction)*16,-78)
                    }else{
                        this.layer.rect(lsin(this.anim.direction)*16,-81,18*lcos(this.anim.direction),6)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-50,16,42)
                }
                if(this.trigger.display.belt){
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.noStroke()
                    for(let a=0,la=7;a<la;a++){
                        this.layer.rect(lsin(360*a/la+this.anim.direction)*8,-48,3*lcos(360*a/la+this.anim.direction),2)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.badge&&lcos(this.anim.direction+60)>0){
                    if(this.trigger.display.extra.damage){
                        this.layer.fill(this.color.badge[0][0],this.color.badge[0][1],this.color.badge[0][2])
                        this.layer.noStroke()
                        this.layer,arc(lsin(this.anim.direction+60)*7,-58,lcos(this.anim.direction+48)*6,6,0,180)
                        this.layer.fill(this.color.badge[1][0],this.color.badge[1][1],this.color.badge[1][2])
                        this.layer.triangle(lsin(this.anim.direction+60)*7-lcos(this.anim.direction+60),-58,lsin(this.anim.direction+60)*7+lcos(this.anim.direction+60),-58,lsin(this.anim.direction+60)*7,-55)
                    }else{
                        this.layer.fill(this.color.badge[0][0],this.color.badge[0][1],this.color.badge[0][2])
                        this.layer.noStroke()
                        this.layer.ellipse(lsin(this.anim.direction+60)*7,-58,lcos(this.anim.direction+48)*6,6)
                        this.layer.fill(this.color.badge[1][0],this.color.badge[1][1],this.color.badge[1][2])
                        this.layer.quad(lsin(this.anim.direction+60)*7-lcos(this.anim.direction+60),-58,lsin(this.anim.direction+60)*7,-61,lsin(this.anim.direction+60)*7+lcos(this.anim.direction+60),-58,lsin(this.anim.direction+60)*7,-55)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-84,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.visor&&lcos(this.anim.direction)>=0){
                    this.layer.fill(this.color.visor[0],this.color.visor[1],this.color.visor[2],this.fade*this.fades.visor*0.5)
                    this.layer.noStroke()
                    if(this.trigger.display.extra.damage){
                        this.layer.triangle(lsin(this.anim.direction)*16-9*lcos(this.anim.direction),-84,lsin(this.anim.direction)*16+9*lcos(this.anim.direction),-84,lsin(this.anim.direction)*16,-78)
                    }else{
                        this.layer.rect(lsin(this.anim.direction)*16,-81,18*lcos(this.anim.direction),6)
                    }
                }
                if(this.trigger.display.helmet){
                    this.layer.fill(this.color.helmet[0],this.color.helmet[1],this.color.helmet[2],this.fade*this.fades.helmet)
                    this.layer.noStroke()
                    this.layer.arc(0,-84,36,36,-180,0)
                }
                if(!this.graphic){
                    this.layer.noFill()
                    this.layer.stroke(240,240,40,this.fade)
                    this.layer.strokeWeight(3)
                    this.layer.strokeCap(SQUARE)
                    this.layer.arc(0.5,-121.5,15,15,-135,45)
                    this.layer.arc(-0.5,-120.5,15,15,45,225)
                    this.layer.strokeCap(ROUND)
                    this.layer.noStroke()
                    this.layer.fill(255,255,this.combo==this.comboCap?100:255,this.fade)
                    this.layer.textSize(this.combo>=10?10:12)
                    this.layer.text(this.combo,0,-120.5)
                }
            break
            case 'Lira':
                if(this.trigger.display.hair.back){
                    this.layer.image(graphics.combatant[0].sprites.hair.back[this.sprites.spinDetailHead],-25*this.fade,-75-20*this.fade,50*this.fade,100*this.fade)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6&&g==1){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.band[1]&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6&&g==0){
                        this.minorDisplay(1,g)
                    }
                }
                if(this.trigger.display.kimono.outside.back){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[0].sprites.kimono.outsideDamage.back[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.outside.back.x,this.parts.kimono.outside-15*this.fades.kimono.outside.back.y,30*this.fade*this.fades.kimono.outside.back.x,66*this.fade*this.fades.kimono.outside.back.y)
                    }else{
                        this.layer.image(graphics.combatant[0].sprites.kimono.outside.back[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.outside.back.x,this.parts.kimono.outside-15*this.fades.kimono.outside.back.y,30*this.fade*this.fades.kimono.outside.back.x,66*this.fade*this.fades.kimono.outside.back.y)
                    }
                }
                if(this.trigger.display.kimono.main.back){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[0].sprites.kimono.mainDamage.back[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.main.back.x,this.parts.kimono.main-15*this.fades.kimono.main.back.y,30*this.fade*this.fades.kimono.main.back.x,66*this.fade*this.fades.kimono.main.back.y)
                    }else{
                        this.layer.image(graphics.combatant[0].sprites.kimono.main.back[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.main.back.x,this.parts.kimono.main-15*this.fades.kimono.main.back.y,30*this.fade*this.fades.kimono.main.back.x,66*this.fade*this.fades.kimono.main.back.y)
                    }
                }
                if(this.trigger.display.kimono.decoration){
                    this.layer.noStroke()
                    for(let g=0,lg=this.kimono.decoration.length;g<lg;g++){
                        if(lcos(this.kimono.decoration[g].spin+this.anim.direction)<=0&&!(this.trigger.display.extra.damage&&this.kimono.decoration[g].y<20)){
                            this.layer.push()
                            this.layer.translate((1.5+this.kimono.decoration[g].y*0.16)*lsin(this.kimono.decoration[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.y+this.kimono.decoration[g].y*this.fades.kimono.decoration.position.y)
                            this.layer.rotate(-12*lsin(this.kimono.decoration[g].spin+this.anim.direction))
                            this.layer.scale(this.fades.kimono.decoration.size.x*lcos(this.kimono.decoration[g].spin+this.anim.direction),this.fades.kimono.decoration.size.y)
                            this.layer.rotate(this.kimono.decoration[g].rotate)
                            for(let h=0,lh=5;h<lh;h++){
                                this.layer.fill(...mergeColor(this.color.kimono.decoration.back[this.kimono.decoration[g].type],this.color.kimono.decoration.back[this.kimono.decoration[g].type+1],h/lh),this.fade*this.fades.kimono.decoration.fade)
                                for(let i=0;i<3;i++){
                                    this.layer.rotate(120)
                                    this.layer.ellipse(0,-this.kimono.decoration[g].height*0.8,this.kimono.decoration[g].width*2.8*(1-h/lh),this.kimono.decoration[g].height*1.6*(1-h/lh))
                                    this.layer.ellipse(0,this.kimono.decoration[g].height*0.8,this.kimono.decoration[g].width*2.8*(1-h/lh),this.kimono.decoration[g].height*1.6*(1-h/lh))
                                }
                            }
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[0]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,-lcos(this.spin.under.under.button[0]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[1]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,-lcos(this.spin.under.under.button[1]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[0]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,-lcos(this.spin.under.under.top[0]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[0]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[0]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[1]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,-lcos(this.spin.under.under.top[1]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[1]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[1]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-46,11,30)
                }
                if(this.trigger.display.skin.button){
                    if(lcos(this.spin.button+this.anim.direction)>0){
                        this.layer.noStroke()
                        this.layer.fill(...this.flashColor(this.color.skin.button),this.fade*this.fades.skin.button)
                        this.layer.ellipse(lsin(this.spin.button+this.anim.direction)*5.2,-42,1*lcos(this.spin.button+this.anim.direction),2)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&g==1){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.band[1]&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6&&g==0){
                        this.minorDisplay(1,g)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.fades.sandal.back[h]>0&&this.trigger.display.sandal.back[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.back.x,this.graphics.legs[h].sandal.back.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                if(this.trigger.display.extra.damage){
                                    this.layer.image(graphics.minor[5+h],-4*this.fades.sandal.back[h]*this.fade,-4*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade)
                                }else{
                                    this.layer.image(graphics.minor[4],-4*this.fades.sandal.back[h]*this.fade,-4*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade)
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.back.x,-this.graphics.legs[h].sandal.back.y-1.5)
                            }
                            if(this.fades.sandal.front[h]>0&&this.trigger.display.sandal.front[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.front.x,this.graphics.legs[h].sandal.front.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                for(let i=0;i<2;i++){
                                    if((lcos(this.anim.direction+65*(i*2-1)-this.spin.sandal[h])<=0.2&&this.trigger.display.mode.sandal.edge==0||i%2!=h&&this.trigger.display.mode.sandal.edge==1)){
                                        this.layer.image(graphics.minor[7+i],-4*this.fades.sandal.front[h]*this.fade,-4*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade)
                                    }
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.front.x,-this.graphics.legs[h].sandal.front.y-1.5)
                            }
                            if(this.trigger.display.skin.legs){
                                let color=this.flashColor(upColor(this.color.skin.legs,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                            if(this.trigger.display.band[0]&&h==1){
                                this.layer.noFill()
                                this.layer.stroke(this.color.band[0][0],this.color.band[0][1],this.color.band[0][2],this.fade*this.fades.band[0])
                                this.layer.strokeWeight(0.45)
                                this.layer.line(
                                    this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5+1.9*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                    this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5+1.9*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                    this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5-1.9*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                    this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5-1.9*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90))
                                this.layer.strokeWeight(0.3)
                                if(this.trigger.display.extra.damage){
                                    this.layer.line(
                                        this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5,this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5,
                                        this.graphics.legs[h].top.x*0.375+this.graphics.legs[h].middle.x*0.625-0.3125*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.375+this.graphics.legs[h].middle.y*0.625-0.3125*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90))
                                    this.layer.line(
                                        this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5,this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5,
                                        this.graphics.legs[h].top.x*0.4+this.graphics.legs[h].middle.x*0.6+0.25*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.4+this.graphics.legs[h].middle.y*0.6+0.25*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90))
                                    this.layer.arc(
                                        this.graphics.legs[h].top.x*0.46+this.graphics.legs[h].middle.x*0.54-0.5*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.46+this.graphics.legs[h].middle.y*0.54-0.5*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),1,1,-150,30)
                                    this.layer.arc(
                                        this.graphics.legs[h].top.x*0.46+this.graphics.legs[h].middle.x*0.54+0.5*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.46+this.graphics.legs[h].middle.y*0.54+0.5*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),1,1,-210,-30)
                                }else{
                                    this.layer.line(
                                        this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5,this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5,
                                        this.graphics.legs[h].top.x*0.35+this.graphics.legs[h].middle.x*0.65-0.375*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.35+this.graphics.legs[h].middle.y*0.65-0.375*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90))
                                    this.layer.line(
                                        this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5,this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5,
                                        this.graphics.legs[h].top.x*0.35+this.graphics.legs[h].middle.x*0.65+0.375*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.35+this.graphics.legs[h].middle.y*0.65+0.375*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90))
                                    this.layer.ellipse(
                                        this.graphics.legs[h].top.x*0.46+this.graphics.legs[h].middle.x*0.54-0.5*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.46+this.graphics.legs[h].middle.y*0.54-0.5*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),1,1)
                                    this.layer.ellipse(
                                        this.graphics.legs[h].top.x*0.46+this.graphics.legs[h].middle.x*0.54+0.5*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.46+this.graphics.legs[h].middle.y*0.54+0.5*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),1,1)
                                }
                            }
                            if(this.fades.sandal.front[h]>0&&this.trigger.display.sandal.front[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.front.x,this.graphics.legs[h].sandal.front.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                for(let i=0;i<2;i++){
                                    if((lcos(this.anim.direction+65*(i*2-1)-this.spin.sandal[h])>0.2&&this.trigger.display.mode.sandal.edge==0||i%2==h&&this.trigger.display.mode.sandal.edge==1)){
                                        this.layer.image(graphics.minor[7+i],-4*this.fades.sandal.front[h]*this.fade,-4*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade)
                                    }
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.front.x,-this.graphics.legs[h].sandal.front.y-1.5)
                            }
                        }
                    }
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,lcos(this.spin.under.under.top[0]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[0]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[0]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[1]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,lcos(this.spin.under.under.top[1]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[1]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[1]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,lcos(this.spin.under.under.button[0]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[1]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,lcos(this.spin.under.under.button[1]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.top){
                    this.sprites.temp=createGraphics(80,80)
                    setupLayer(this.sprites.temp)
                    this.sprites.temp.translate(40,0)
                    this.sprites.temp.noStroke()
                    this.sprites.temp.fill(...this.color.under.outside,this.fade*this.fades.under.top)
                    for(let g=0;g<2;g++){
                        if(lcos(this.spin.under.under.top[g]+this.anim.direction)){
                            if(lsin(this.spin.under.under.top[g]+this.anim.direction+27)*9-lsin(this.spin.under.under.top[g]+this.anim.direction)*6>0){
                                this.sprites.temp.arc(lsin(this.spin.under.under.top[g]+this.anim.direction)*18,75,lsin(this.spin.under.under.top[g]+this.anim.direction+27)*36-lsin(this.spin.under.under.top[g]+this.anim.direction)*24,70,-90,0)
                                this.sprites.temp.ellipse(lsin(this.spin.under.under.top[g]+this.anim.direction)*18,75,4,70)
                            }
                            if(lsin(this.spin.under.under.top[g]+this.anim.direction)*6-lsin(this.spin.under.under.top[g]+this.anim.direction-27)*9>0){
                                this.sprites.temp.arc(lsin(this.spin.under.under.top[g]+this.anim.direction)*18,75,lsin(this.spin.under.under.top[g]+this.anim.direction)*24-lsin(this.spin.under.under.top[g]+this.anim.direction-27)*36,70,-180,-90)
                                this.sprites.temp.ellipse(lsin(this.spin.under.under.top[g]+this.anim.direction)*18,75,4,70)
                            }
                        }
                    }
                    this.sprites.temp.rect(0,59,44,2)
                    this.sprites.temp.erase()
                    this.sprites.temp.rect(0,70,80,20)
                    this.layer.image(this.sprites.temp,-10*this.anim.under.top.x,this.parts.under.top-12*this.anim.under.top.y,20*this.anim.under.top.x,20*this.anim.under.top.y)
                    this.layer.noStroke()
                    this.layer.fill(...this.color.under.outside,this.fade*this.fades.under.top)
                    if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[0]+this.anim.direction)>-0.4){
                        this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.5)
                    }
                    if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[1]+this.anim.direction)>-0.4){
                        this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.5)
                    }
                    this.layer.fill(this.color.under.fringe[0],this.color.under.fringe[1],this.color.under.fringe[2],this.fade)
                    for(let g=0,lg=this.spin.under.top.length;g<lg;g++){
                        if(lcos(this.spin.under.top[g]+this.anim.direction)>0){
                            this.layer.arc(5.5*lsin(this.spin.under.top[g]+this.anim.direction)*this.anim.under.top.x,this.parts.under.top+3*this.anim.under.top.y,lcos(this.spin.under.top[g]+this.anim.direction)*1.4*this.anim.under.top.x,3.5*this.anim.under.top.y,0,180)
                        }
                    }
                    for(let g=0,lg=2;g<lg;g++){
                        if(lcos(this.spin.under.under.top[g]+this.anim.direction)>0){
                            this.layer.push()
                            this.layer.translate(5.5*lsin(this.spin.under.under.top[g]+this.anim.direction),-50)
                            this.layer.rotate(-10*lsin(this.spin.under.under.top[g]+this.anim.direction))
                            this.layer.scale(lcos(this.spin.under.under.top[g]+this.anim.direction),1)
                            this.layer.rotate(45+g*45)
                            this.layer.fill(this.color.under.decoration,this.fade*this.fades.under.bottom)
                            for(let h=0;h<6;h++){
                                this.layer.rotate(60)
                                this.layer.ellipse(0,-0.6,0.4,1.2)
                            }
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.under.under.bottom&&lcos(this.spin.under.under.bottom[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.bottom[0],lcos(this.spin.under.under.bottom[0]+this.anim.direction))),this.fade*this.fades.under.under.bottom)
                    this.layer.beginShape()
                    this.layer.vertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*1.5,-31)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.endShape()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.bottom[1],lcos(this.spin.under.under.bottom[0]+this.anim.direction))),this.fade*this.fades.under.under.bottom)
                    this.layer.beginShape()
                    this.layer.vertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*1.5,-31)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.endShape()
                }
                if(this.trigger.display.under.tanga){
                    this.sprites.temp=createGraphics(40,40)
                    setupLayer(this.sprites.temp)
                    this.sprites.temp.noStroke()
                    this.sprites.temp.fill(...this.color.under.tanga,this.fade*this.fades.under.tanga)
                    if(abs(this.anim.direction)<this.spin.under.tanga){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction+this.spin.under.tanga),36,0,90)
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction-this.spin.under.tanga),36,90,180)
                    }else if(this.anim.direction>=this.spin.under.tanga&&this.anim.direction<(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction+this.spin.under.tanga),36,0,90)
                    }else if(this.anim.direction<=-this.spin.under.tanga&&this.anim.direction>-(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction-this.spin.under.tanga),36,90,180)
                    }
                    if(abs(this.anim.direction)>=(180-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction-(180-this.spin.under.tanga)),36,0,90)
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction+(180-this.spin.under.tanga)),36,90,180)
                    }else if(this.anim.direction>=-(180-this.spin.under.tanga)&&this.anim.direction<-(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction-(180-this.spin.under.tanga)),36,0,90)
                    }else if(this.anim.direction<=(180-this.spin.under.tanga)&&this.anim.direction>(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction+(180-this.spin.under.tanga)),36,90,180)
                    }
                    this.sprites.temp.erase()
                    this.sprites.temp.rect(20,6,40,11)
                    if(this.anim.direction>=this.spin.under.tanga&&this.anim.direction<(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction-this.spin.under.tanga),36,0,90)
                    }else if(this.anim.direction<=-this.spin.under.tanga&&this.anim.direction>-(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction+this.spin.under.tanga),36,90,180)
                    }
                    if(this.anim.direction>=-(180-this.spin.under.tanga)&&this.anim.direction<-(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction+(180-this.spin.under.tanga)),36,0,90)
                    }else if(this.anim.direction<=(180-this.spin.under.tanga)&&this.anim.direction>(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction-(180-this.spin.under.tanga)),36,90,180)
                    }
                    this.sprites.temp.noErase()
                    this.sprites.temp.rect(20,11,16,1/this.anim.under.bottom.y)
                    if(this.anim.under.bottom.y<=0){
                        this.layer.push()
                        this.layer.translate(0,this.parts.under.bottom-6*this.anim.under.bottom.y)
                        this.layer.scale(1,-1)
                        this.layer.image(this.sprites.temp,-10*this.anim.under.bottom.x,-5,20*this.anim.under.bottom.x,20*abs(this.anim.under.bottom.y))
                        this.layer.pop()
                    }else{
                        this.layer.image(this.sprites.temp,-10*this.anim.under.bottom.x,this.parts.under.bottom-5*this.anim.under.bottom.y-5,20*this.anim.under.bottom.x,20*abs(this.anim.under.bottom.y))
                    }
                }
                if(this.trigger.display.under.bottom){
                    this.sprites.temp=createGraphics(80,90)
                    setupLayer(this.sprites.temp)
                    this.sprites.temp.scale(2)
                    this.sprites.temp.fill(...this.color.under.outside,this.fade*this.fades.under.bottom)
                    this.sprites.temp.noStroke()
                    if(abs(this.anim.direction)<this.spin.under.piece){
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction+this.spin.under.piece),40,0,90)
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction-this.spin.under.piece),40,90,180)
                    }else if(this.anim.direction>=this.spin.under.piece&&this.anim.direction<(this.spin.under.piece+90)){
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction+this.spin.under.piece),40,0,90)
                    }else if(this.anim.direction<=-this.spin.under.piece&&this.anim.direction>-(this.spin.under.piece+90)){
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction-this.spin.under.piece),40,90,180)
                    }
                    if(abs(this.anim.direction)>=(180-this.spin.under.piece)){
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction-(180-this.spin.under.piece)),40,0,90)
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction+(180-this.spin.under.piece)),40,90,180)
                    }else if(this.anim.direction>=-(180-this.spin.under.piece)&&this.anim.direction<-(90-this.spin.under.piece)){
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction-(180-this.spin.under.piece)),40,0,90)
                    }else if(this.anim.direction<=(180-this.spin.under.piece)&&this.anim.direction>(90-this.spin.under.piece)){
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction+(180-this.spin.under.piece)),40,90,180)
                    }
                    this.sprites.temp.erase()
                    this.sprites.temp.rect(20,6,40,11)
                    if(this.anim.direction>=this.spin.under.piece&&this.anim.direction<(this.spin.under.piece+90)){
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction-this.spin.under.piece),40,0,90)
                    }else if(this.anim.direction<=-this.spin.under.piece&&this.anim.direction>-(this.spin.under.piece+90)){
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction+this.spin.under.piece),40,90,180)
                    }
                    if(this.anim.direction>=-(180-this.spin.under.piece)&&this.anim.direction<-(90-this.spin.under.piece)){
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction+(180-this.spin.under.piece)),40,0,90)
                    }else if(this.anim.direction<=(180-this.spin.under.piece)&&this.anim.direction>(90-this.spin.under.piece)){
                        this.sprites.temp.arc(20,2,19*lsin(this.anim.direction-(180-this.spin.under.piece)),40,90,180)
                    }
                    this.sprites.temp.noErase()
                    this.sprites.temp.rect(20,11,17.5,1/this.anim.under.bottom.y)
                    if(this.anim.under.bottom.y<=0){
                        this.layer.push()
                        this.layer.translate(0,this.parts.under.bottom-7*this.anim.under.bottom.y)
                        this.layer.scale(1,-1)
                        this.layer.image(this.sprites.temp,-10*this.anim.under.bottom.x,-5,20*this.anim.under.bottom.x,22.5*abs(this.anim.under.bottom.y))
                        this.layer.pop()
                    }else{
                        this.layer.image(this.sprites.temp,-10*this.anim.under.bottom.x,this.parts.under.bottom-6*this.anim.under.bottom.y-5,20*this.anim.under.bottom.x,22.5*abs(this.anim.under.bottom.y))
                    }
                    this.layer.fill(this.color.under.fringe[0],this.color.under.fringe[1],this.color.under.fringe[2],this.fade)
                    this.layer.noStroke()
                    for(let g=0,lg=this.spin.under.bottom.length;g<lg;g++){
                        if(lcos(this.spin.under.bottom[g]+this.anim.direction)>0){
                            this.layer.arc(4.375*lsin(this.spin.under.bottom[g]+this.anim.direction)*this.anim.under.bottom.x,this.parts.under.bottom-5.3*this.anim.under.bottom.y,lcos(this.spin.under.bottom[g]+this.anim.direction)*1.4*this.anim.under.bottom.x,3.5*this.anim.under.bottom.y,0,180)
                        }
                    }
                    for(let g=0,lg=2;g<lg;g++){
                        if(lcos(g*180+this.anim.direction)>0){
                            this.layer.push()
                            this.layer.translate(3*lsin(g*180+this.anim.direction),-34)
                            this.layer.rotate(30*lsin(g*180+this.anim.direction))
                            this.layer.scale(lcos(g*180+this.anim.direction),1)
                            this.layer.rotate(15+g*25)
                            this.layer.fill(this.color.under.decoration,this.fade*this.fades.under.bottom)
                            for(let h=0;h<6;h++){
                                this.layer.rotate(60)
                                this.layer.ellipse(0,-0.6,0.4,1.2)
                            }
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.under.bow.top){
                    this.layer.fill(this.color.under.bow[0],this.color.under.bow[1],this.color.under.bow[2],this.fade*this.fades.under.bow.top)
                    this.layer.stroke(this.color.under.bow[0],this.color.under.bow[1],this.color.under.bow[2],this.fade*this.fades.under.bow.top)
                    this.layer.strokeWeight(0.3)
                    if(lcos(this.spin.underBow.top.center/2+this.spin.underBow.top.loop[0]/2+this.anim.direction)>0){
                        this.layer.triangle(
                            lsin(this.spin.underBow.top.center+this.anim.direction)*5.75*this.anim.under.bow.top.position.x,this.parts.under.top+this.parts.under.bow.top*this.anim.under.bow.top.position.y,
                            lsin(this.spin.underBow.top.loop[0]+this.anim.direction)*5.75*this.anim.under.bow.top.position.x,this.parts.under.top+(this.parts.under.bow.top-0.5)*this.anim.under.bow.top.position.y,
                            lsin(this.spin.underBow.top.loop[0]+this.anim.direction)*5.75*this.anim.under.bow.top.position.x,this.parts.under.top+(this.parts.under.bow.top+0.5)*this.anim.under.bow.top.position.y
                        )
                    }
                    if(lcos(this.spin.underBow.top.center/2+this.spin.underBow.top.loop[1]/2+this.anim.direction)>0){
                        this.layer.triangle(
                            lsin(this.spin.underBow.top.center+this.anim.direction)*5.75*this.anim.under.bow.top.position.x,this.parts.under.top+this.parts.under.bow.top*this.anim.under.bow.top.position.y,
                            lsin(this.spin.underBow.top.loop[1]+this.anim.direction)*5.75*this.anim.under.bow.top.position.x,this.parts.under.top+(this.parts.under.bow.top-0.5)*this.anim.under.bow.top.position.y,
                            lsin(this.spin.underBow.top.loop[1]+this.anim.direction)*5.75*this.anim.under.bow.top.position.x,this.parts.under.top+(this.parts.under.bow.top+0.5)*this.anim.under.bow.top.position.y
                        )
                    }
                    this.layer.noFill()
                    if(lcos(this.spin.underBow.top.center/2+this.spin.underBow.top.end[0]/2+this.anim.direction)>0){
                        this.layer.line(lsin(this.spin.underBow.top.center+this.anim.direction)*5.75*this.anim.under.bow.top.position.x,this.parts.under.top+this.parts.under.bow.top*this.anim.under.bow.top.position.y,lsin(this.spin.underBow.top.end[0]*this.anim.under.bow.top.size.x/this.anim.under.bow.top.position.x+this.anim.direction)*(5.75*this.anim.under.bow.top.position.x+0.25*this.anim.under.bow.top.size.x),this.parts.under.top+this.parts.under.bow.top*this.anim.under.bow.top.position.y+1.2*this.anim.under.bow.top.size.y)
                    }
                    if(lcos(this.spin.underBow.top.center/2+this.spin.underBow.top.end[1]/2+this.anim.direction)>0){
                        this.layer.line(lsin(this.spin.underBow.top.center+this.anim.direction)*5.75*this.anim.under.bow.top.position.x,this.parts.under.top+this.parts.under.bow.top*this.anim.under.bow.top.position.y,lsin(this.spin.underBow.top.end[1]*this.anim.under.bow.top.size.x/this.anim.under.bow.top.position.x+this.anim.direction)*(5.75*this.anim.under.bow.top.position.x+0.25*this.anim.under.bow.top.size.x),this.parts.under.top+this.parts.under.bow.top*this.anim.under.bow.top.position.y+1.2*this.anim.under.bow.top.size.y)
                    }
                }
                if(this.trigger.display.under.bow.bottom){
                    this.layer.fill(this.color.under.bow[0],this.color.under.bow[1],this.color.under.bow[2],this.fade*this.fades.under.bow.bottom)
                    this.layer.stroke(this.color.under.bow[0],this.color.under.bow[1],this.color.under.bow[2],this.fade*this.fades.under.bow.bottom)
                    this.layer.strokeWeight(0.3)
                    if(lcos(this.spin.underBow.bottom.center/2+this.spin.underBow.bottom.loop[0]/2+this.anim.direction)>0){
                        this.layer.triangle(
                            lsin(this.spin.underBow.bottom.center+this.anim.direction)*4.5*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+this.parts.under.bow.bottom*this.anim.under.bow.bottom.position.y,
                            lsin(this.spin.underBow.bottom.loop[0]+this.anim.direction)*4.5*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+(this.parts.under.bow.bottom-0.5)*this.anim.under.bow.bottom.position.y,
                            lsin(this.spin.underBow.bottom.loop[0]+this.anim.direction)*4.5*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+(this.parts.under.bow.bottom+0.5)*this.anim.under.bow.bottom.position.y
                        )
                    }
                    if(lcos(this.spin.underBow.bottom.center/2+this.spin.underBow.bottom.loop[1]/2+this.anim.direction)>0){
                        this.layer.triangle(
                            lsin(this.spin.underBow.bottom.center+this.anim.direction)*4.5*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+this.parts.under.bow.bottom*this.anim.under.bow.bottom.position.y,
                            lsin(this.spin.underBow.bottom.loop[1]+this.anim.direction)*4.5*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+(this.parts.under.bow.bottom-0.5)*this.anim.under.bow.bottom.position.y,
                            lsin(this.spin.underBow.bottom.loop[1]+this.anim.direction)*4.5*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+(this.parts.under.bow.bottom+0.5)*this.anim.under.bow.bottom.position.y
                        )
                    }
                    this.layer.noFill()
                    if(lcos(this.spin.underBow.bottom.center/2+this.spin.underBow.bottom.end[0]/2+this.anim.direction)>0){
                        this.layer.line(lsin(this.spin.underBow.bottom.center+this.anim.direction)*4.5*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+this.parts.under.bow.bottom*this.anim.under.bow.bottom.position.y,lsin(this.spin.underBow.bottom.end[0]*this.anim.under.bow.bottom.size.x/this.anim.under.bow.bottom.position.x+this.anim.direction)*(4.5*this.anim.under.bow.bottom.position.x+0.25*this.anim.under.bow.bottom.size.x),this.parts.under.bottom+this.parts.under.bow.bottom*this.anim.under.bow.bottom.position.y+1.2*this.anim.under.bow.bottom.size.y)
                    }
                    if(lcos(this.spin.underBow.bottom.center/2+this.spin.underBow.bottom.end[1]/2+this.anim.direction)>0){
                        this.layer.line(lsin(this.spin.underBow.bottom.center+this.anim.direction)*4.5*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+this.parts.under.bow.bottom*this.anim.under.bow.bottom.position.y,lsin(this.spin.underBow.bottom.end[1]*this.anim.under.bow.bottom.size.x/this.anim.under.bow.bottom.position.x+this.anim.direction)*(4.5*this.anim.under.bow.bottom.position.x+0.25*this.anim.under.bow.bottom.size.x),this.parts.under.bottom+this.parts.under.bow.bottom*this.anim.under.bow.bottom.position.y+1.2*this.anim.under.bow.bottom.size.y)
                    }
                }
                if(this.trigger.display.kimono.main.front){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[0].sprites.kimono.mainDamage.front[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.main.back.x,this.parts.kimono.main-15*this.fades.kimono.main.back.y,30*this.fade*this.fades.kimono.main.back.x,66*this.fade*this.fades.kimono.main.back.y)
                    }else{
                        this.layer.image(graphics.combatant[0].sprites.kimono.main.front[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.main.back.x,this.parts.kimono.main-15*this.fades.kimono.main.back.y,30*this.fade*this.fades.kimono.main.back.x,66*this.fade*this.fades.kimono.main.back.y)
                    }
                }
                if(this.trigger.display.kimono.decoration){
                    this.layer.noStroke()
                    for(let g=0,lg=this.kimono.decoration.length;g<lg;g++){
                        if(lcos(this.kimono.decoration[g].spin+this.anim.direction)>0&&!(this.trigger.display.extra.damage&&this.kimono.decoration[g].y<20)){
                            this.layer.push()
                            this.layer.translate((1.5+this.kimono.decoration[g].y*0.16)*lsin(this.kimono.decoration[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.y+this.kimono.decoration[g].y*this.fades.kimono.decoration.position.y)
                            this.layer.rotate(-12*lsin(this.kimono.decoration[g].spin+this.anim.direction))
                            this.layer.scale(this.fades.kimono.decoration.size.x*lcos(this.kimono.decoration[g].spin+this.anim.direction),this.fades.kimono.decoration.size.y)
                            this.layer.rotate(this.kimono.decoration[g].rotate)
                            for(let h=0,lh=5;h<lh;h++){
                                this.layer.fill(
                                    mergeColor(this.color.kimono.decoration.front[this.kimono.decoration[g].type],this.color.kimono.decoration.front[this.kimono.decoration[g].type+1],h/lh)[0],
                                    mergeColor(this.color.kimono.decoration.front[this.kimono.decoration[g].type],this.color.kimono.decoration.front[this.kimono.decoration[g].type+1],h/lh)[1],
                                    mergeColor(this.color.kimono.decoration.front[this.kimono.decoration[g].type],this.color.kimono.decoration.front[this.kimono.decoration[g].type+1],h/lh)[2],this.fade*this.fades.kimono.decoration.fade)
                                for(let i=0;i<3;i++){
                                    this.layer.rotate(120)
                                    this.layer.ellipse(0,-this.kimono.decoration[g].height*0.8,this.kimono.decoration[g].width*2.8*(1-h/lh),this.kimono.decoration[g].height*1.6*(1-h/lh))
                                    this.layer.ellipse(0,this.kimono.decoration[g].height*0.8,this.kimono.decoration[g].width*2.8*(1-h/lh),this.kimono.decoration[g].height*1.6*(1-h/lh))
                                }
                            }
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.kimono.outside.front){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[0].sprites.kimono.outsideDamage.front[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.outside.back.x,this.parts.kimono.outside-15*this.fades.kimono.outside.back.y,30*this.fade*this.fades.kimono.outside.back.x,66*this.fade*this.fades.kimono.outside.back.y)
                    }else{
                        this.layer.image(graphics.combatant[0].sprites.kimono.outside.front[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.outside.back.x,this.parts.kimono.outside-15*this.fades.kimono.outside.back.y,30*this.fade*this.fades.kimono.outside.back.x,66*this.fade*this.fades.kimono.outside.back.y)
                    }
                }
                if(this.trigger.display.kimono.bow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.kimono.bow[0],this.color.kimono.bow[1],this.color.kimono.bow[2],this.fade*this.fades.kimono.bow)
                    this.layer.strokeWeight(0.25)
                    if(this.trigger.display.extra.damage){
                        if(lcos(this.anim.direction+this.spin.bow.loop[0]/2)>0){
                            this.layer.arc(lsin(this.anim.direction+this.spin.bow.loop[0]/2)*5.4,this.parts.kimono.bow,lcos(this.anim.direction+this.spin.bow.loop[0]/2)*2.4,2.4,0,135)
                        }
                        if(lcos(this.anim.direction+this.spin.bow.loop[1]/2)>0){
                            this.layer.arc(lsin(this.anim.direction+this.spin.bow.loop[1]/2)*5.4,this.parts.kimono.bow,lcos(this.anim.direction+this.spin.bow.loop[1]/2)*2.4,2.4,45,180)
                        }
                        if(lcos(this.anim.direction)>0){
                            this.layer.arc(lsin(this.anim.direction)*5.5,this.parts.kimono.bow+1.2,lcos(this.anim.direction)*2.4,2.4,-45,225)
                        }
                    }else{
                        if(lcos(this.anim.direction+this.spin.bow.loop[0]/2)>0){
                            this.layer.ellipse(lsin(this.anim.direction+this.spin.bow.loop[0]/2)*5.4,this.parts.kimono.bow,lcos(this.anim.direction+this.spin.bow.loop[0]/2)*2.4,2.4)
                        }
                        if(lcos(this.anim.direction+this.spin.bow.loop[1]/2)>0){
                            this.layer.ellipse(lsin(this.anim.direction+this.spin.bow.loop[1]/2)*5.4,this.parts.kimono.bow,lcos(this.anim.direction+this.spin.bow.loop[1]/2)*2.4,2.4)
                        }
                        if(lcos(this.anim.direction)>0){
                            this.layer.ellipse(lsin(this.anim.direction)*5.3,this.parts.kimono.bow-1.2,lcos(this.anim.direction)*2.4,2.4)
                            this.layer.ellipse(lsin(this.anim.direction)*5.5,this.parts.kimono.bow+1.2,lcos(this.anim.direction)*2.4,2.4)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6)&&g==1){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.band[1]&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6&&g==0){
                        this.minorDisplay(1,g)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-75,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3)&&g==1){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.band[1]&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.2)&&g==0){
                        this.minorDisplay(1,g)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.hair.front){
                    this.layer.image(graphics.combatant[0].sprites.hair.front[this.sprites.spinDetailHead],-25*this.fade,-75-20*this.fade,50*this.fade,100*this.fade)
                }
                if(this.trigger.display.hair.glow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.hair.glow[0],this.color.hair.glow[1],this.color.hair.glow[2],this.fade/4)
                    for(let g=0;g<6;g++){
                        this.layer.strokeWeight((3-g/2)*this.fade)
                        this.layer.arc(0,-75,30+g,30+g,-72+g*6,-12-g*6)
                    }
                }
                if(this.trigger.display.flower[2]&&this.fades.flower[2]>0){
                    if(constrain((pow(lcos(this.spin.flower[2]+this.anim.head),1.5)*2-0.2),0,1)>0){
                        this.layer.image(graphics.minor[3],lsin(this.spin.flower[2]+this.anim.head)*18.5-5*this.fade*this.fades.flower[2]*constrain((pow(lcos(this.spin.flower[2]+this.anim.head),1.5)*2-0.2),0,1),this.parts.flowerLevel[2]-5*this.fade*this.fades.flower[2],10*this.fade*this.fades.flower[2]*constrain((pow(lcos(this.spin.flower[2]+this.anim.head),1.5)*2-0.2),0,1),10*this.fade*this.fades.flower[2])
                    }
                }
                if(this.trigger.display.flower[1]&&this.fades.flower[1]>0){
                    if(constrain((pow(lcos(this.spin.flower[1]+this.anim.head),1.5)*2-0.2),0,1)>0){
                        this.layer.image(graphics.minor[2],lsin(this.spin.flower[1]+this.anim.head)*18.5-8*this.fade*this.fades.flower[1]*constrain((pow(lcos(this.spin.flower[1]+this.anim.head),1.5)*2-0.2),0,1),this.parts.flowerLevel[1]-8*this.fade*this.fades.flower[1],16*this.fade*this.fades.flower[1]*constrain((pow(lcos(this.spin.flower[1]+this.anim.head),1.5)*2-0.2),0,1),16*this.fade*this.fades.flower[1])
                    }
                }
                if(this.trigger.display.flower[0]&&this.fades.flower[0]>0){
                    if(constrain((pow(lcos(this.spin.flower[0]+this.anim.head),1.5)*2-0.2),0,1)>0){
                        if(this.trigger.display.extra.damage){
                            this.layer.image(graphics.minor[1],lsin(this.spin.flower[0]+this.anim.head)*18.5-10*this.fade*this.fades.flower[0]*constrain((pow(lcos(this.spin.flower[0]+this.anim.head),1.5)*2-0.2),0,1),this.parts.flowerLevel[0]-10*this.fade*this.fades.flower[0],20*this.fade*this.fades.flower[0]*constrain((pow(lcos(this.spin.flower[0]+this.anim.head),1.5)*2-0.2),0,1),20*this.fade*this.fades.flower[0])
                        }else{
                            this.layer.image(graphics.minor[0],lsin(this.spin.flower[0]+this.anim.head)*18.5-10*this.fade*this.fades.flower[0]*constrain((pow(lcos(this.spin.flower[0]+this.anim.head),1.5)*2-0.2),0,1),this.parts.flowerLevel[0]-10*this.fade*this.fades.flower[0],20*this.fade*this.fades.flower[0]*constrain((pow(lcos(this.spin.flower[0]+this.anim.head),1.5)*2-0.2),0,1),20*this.fade*this.fades.flower[0])
                        }
                    }
                }
            break
            case 'Sakura':
                if(this.trigger.display.hair.back){
                    this.layer.image(graphics.combatant[1].sprites.hair.back[this.sprites.spinDetailHead],-20*this.fade,-75-20*this.fade,40*this.fade,60*this.fade)
                }
                if(this.trigger.display.hair.tail&&lcos(this.spin.tail+this.anim.direction)<=0){
                    this.layer.image(graphics.combatant[1].sprites.hair.tail[this.sprites.spinDetailHead],lsin(this.spin.tail+this.anim.direction)*14.5-10*this.fade,-50-25*this.fade,20*this.fade,50*this.fade)
                }
                if(this.trigger.display.necklace.back){
                    this.layer.noFill()
                    this.layer.stroke(this.color.necklace[0],this.color.necklace[1],this.color.necklace[2],this.fade*this.fades.necklace.back)
                    this.layer.strokeWeight(0.4)
                    if(lcos(this.spin.necklace[0]+this.anim.direction)<=0){
                        this.layer.arc(0,-59,6,3,atan2(lsin(90-this.spin.necklace[0]-this.anim.direction),lcos(90-this.spin.necklace[0]-this.anim.direction)*2),0)
                    }
                    if(lcos(this.spin.necklace[1]+this.anim.direction)<=0){
                        this.layer.arc(0,-59,6,3,-180,atan2(lsin(90-this.spin.necklace[1]-this.anim.direction),lcos(90-this.spin.necklace[1]-this.anim.direction)*2))
                    }
                    if(lcos(this.spin.necklace[0]+this.anim.direction)>0&&lcos(this.spin.necklace[1]+this.anim.direction)>0){
                        this.layer.arc(0,-59,6,3,-180,0)
                    }
                    if(lcos(this.spin.necklaceBow.center+this.anim.direction)>0){
                        this.layer.line(lsin(this.spin.necklaceBow.center+this.anim.direction)*3,this.parts.necklaceBow+1.5*sqrt(1-lsin(this.spin.necklaceBow.center+this.anim.direction)*lsin(this.spin.necklaceBow.center+this.anim.direction)),
                        lsin(this.spin.necklaceBow.end[0]+this.anim.direction)*3.5,this.parts.necklaceBow+2+1.5*sqrt(1-lsin(this.spin.necklaceBow.end[0]+this.anim.direction)*lsin(this.spin.necklaceBow.end[0]+this.anim.direction)))
                        this.layer.line(lsin(this.spin.necklaceBow.center+this.anim.direction)*3,this.parts.necklaceBow+1.5*sqrt(1-lsin(this.spin.necklaceBow.center+this.anim.direction)*lsin(this.spin.necklaceBow.center+this.anim.direction)),
                        lsin(this.spin.necklaceBow.end[1]+this.anim.direction)*3.5,this.parts.necklaceBow+2+1.5*sqrt(1-lsin(this.spin.necklaceBow.end[1]+this.anim.direction)*lsin(this.spin.necklaceBow.end[1]+this.anim.direction)))
                        this.layer.ellipse(lsin(this.spin.necklaceBow.loop[0]+this.anim.direction)*3.2,this.parts.necklaceBow+0.5+1.5*sqrt(1-lsin(this.spin.necklaceBow.loop[0]+this.anim.direction)*lsin(this.spin.necklaceBow.loop[0]+this.anim.direction)),
                        lcos(this.spin.necklaceBow.loop[0]+this.anim.direction)*1.2,1.2)
                        this.layer.ellipse(lsin(this.spin.necklaceBow.loop[1]+this.anim.direction)*3.2,this.parts.necklaceBow+0.5+1.5*sqrt(1-lsin(this.spin.necklaceBow.loop[1]+this.anim.direction)*lsin(this.spin.necklaceBow.loop[1]+this.anim.direction)),
                        lcos(this.spin.necklaceBow.loop[1]+this.anim.direction)*1.2,1.2)
                    }
                    if(!(this.spin.necklace[0]+this.anim.direction>-130&&this.spin.necklace[0]+this.anim.direction<65)){
                        if(lsin(this.spin.necklace[2]+this.anim.direction)*5.25<lsin(this.spin.necklace[0]+this.anim.direction)*3){
                            this.layer.arc(lsin(this.spin.necklace[0]+this.anim.direction)*3,-54,lsin(this.spin.necklace[2]+this.anim.direction)*10.5-lsin(this.spin.necklace[0]+this.anim.direction)*6,10-lcos(this.spin.necklace[0]+this.anim.direction)*3,-180,-90)
                        }else{
                            this.layer.arc(lsin(this.spin.necklace[0]+this.anim.direction)*3,-54,lsin(this.spin.necklace[2]+this.anim.direction)*10.5-lsin(this.spin.necklace[0]+this.anim.direction)*6,10-lcos(this.spin.necklace[0]+this.anim.direction)*3,-90,0)
                        }
                    }
                    if(!(this.spin.necklace[1]+this.anim.direction<130&&this.spin.necklace[1]+this.anim.direction>-65)){
                        if(lsin(this.spin.necklace[2]+this.anim.direction)*5.25>lsin(this.spin.necklace[1]+this.anim.direction)*3){
                            this.layer.arc(lsin(this.spin.necklace[1]+this.anim.direction)*3,-54,lsin(this.spin.necklace[2]+this.anim.direction)*10.5-lsin(this.spin.necklace[1]+this.anim.direction)*6,10-lcos(this.spin.necklace[1]+this.anim.direction)*3,-90,0)
                        }else{
                            this.layer.arc(lsin(this.spin.necklace[1]+this.anim.direction)*3,-54,lsin(this.spin.necklace[2]+this.anim.direction)*10.5-lsin(this.spin.necklace[1]+this.anim.direction)*6,10-lcos(this.spin.necklace[1]+this.anim.direction)*3,-180,-90)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<=0.6&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.extra.sword2&&lcos(this.spin.arms[g].top+this.anim.direction)<=0.6&&g==1){
                        this.minorDisplay(1,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.wrap.sleeve&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.strokeJoin(ROUND)
                        this.layer.strokeWeight(0.4)
                        this.layer.fill(this.color.wrap.in[0],this.color.wrap.in[1],this.color.wrap.in[2],this.fade*this.fades.wrap.bow)
                        this.layer.stroke(this.color.wrap.out[0],this.color.wrap.out[1],this.color.wrap.out[2],this.fade*this.fades.wrap.bow)
                        this.calc.int=[
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.135-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/8,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.135-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/8,
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.15-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/4,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.15-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/4
                        ]
                        if(!(this.anim.direction*(g*2-1)+this.spin.arms[g].lock>-150&&this.anim.direction*(g*2-1)+this.spin.arms[g].lock<150&&(lcos(this.spin.wrap.center+this.anim.direction)>=0||lcos(90*(g*2-1)+this.anim.direction)>=0))){
                            this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*6.6*this.fades.kimono.outside.front.x,this.parts.kimono.outside+16*this.fades.kimono.outside.front.y)
                        }
                        if(!((this.anim.direction*(g*2-1)+this.spin.arms[g].lock<-50||this.anim.direction*(g*2-1)+this.spin.arms[g].lock>50)&&(lcos(this.spin.wrap.center+this.anim.direction)<0||lcos(90*(g*2-1)+this.anim.direction)>=0))){
                            this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*-6.6*this.fades.kimono.outside.front.x,this.parts.kimono.outside+16*this.fades.kimono.outside.front.y)
                        }
                    }
                    if(this.trigger.display.sleeve&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.noStroke()
                        for(let h=0,lh=10;h<lh;h++){
                            this.layer.fill(mergeColor(this.color.sleeve.back,this.color.sleeve.front,h/lh),this.fade*this.fades.sleeve)
                            if(this.trigger.display.extra.damage){
                                this.layer.beginShape()
                                this.layer.vertex(this.graphics.arms[g].top.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.125+(0.175+g*0.05)*h/lh),
                                    this.graphics.arms[g].top.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.125+(0.175+g*0.05)*h/lh))
                                this.layer.vertex(this.graphics.arms[g].top.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(-0.05+g*0.075)*(g*2-1)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.3+g*0.05),
                                    this.graphics.arms[g].top.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(-0.05+g*0.075)*(g*2-1)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.3+g*0.05))
                                this.layer.vertex(this.graphics.arms[g].top.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.12-0.12*h/lh)*(g*2-1)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.125+(0.175+g*0.05)*h/lh),
                                    this.graphics.arms[g].top.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.12-0.12*h/lh)*(g*2-1)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.125+(0.175+g*0.05)*h/lh))
                                this.layer.vertex(this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1))
                                this.layer.vertex(this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.27-0.27*h/lh)*(g*2-1),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.27-0.27*h/lh)*(g*2-1))
                                this.layer.endShape()
                            }else{
                                this.layer.quad(
                                    this.graphics.arms[g].top.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/8,
                                    this.graphics.arms[g].top.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/8,
                                    this.graphics.arms[g].top.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.12-0.12*h/lh)*(g*2-1)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/8,
                                    this.graphics.arms[g].top.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.12-0.12*h/lh)*(g*2-1)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/8,
                                    this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1),
                                    this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.27-0.27*h/lh)*(g*2-1),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.27-0.27*h/lh)*(g*2-1)
                                )
                            }
                            this.layer.push()
                            this.layer.translate(((this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))+
                            (this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(g*2-1)*0.27*sign(lcos(this.anim.direction))))/2,
                            ((this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))+
                            (this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(g*2-1)*0.27*sign(lcos(this.anim.direction))))/2)
                            this.layer.rotate(atan2(this.graphics.arms[g].middle.x-this.graphics.arms[g].top.x,this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y))
                            let i=dist(0,0,
                                ((this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))-
                                (this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(g*2-1)*0.27*sign(lcos(this.anim.direction)))),
                                ((this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))-
                                (this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(g*2-1)*0.27*sign(lcos(this.anim.direction)))))
                            this.layer.arc(0,0,i,i*(0.6-0.1*h/lh),-180,0)
                            this.layer.pop()
                            if(this.trigger.display.extra.damage){
                                this.layer.beginShape()
                                this.layer.vertex(this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.45+(0.2+g*0.05)*h/lh),
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.45+(0.2+g*0.05)*h/lh))
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(-0.1+g*0.175)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.65+g*0.05),
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(-0.1+g*0.175)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.65+g*0.05))
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.45+(0.2+g*0.05)*h/lh),
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.45+(0.2+g*0.05)*h/lh))
                                this.layer.endShape()
                            }else{
                                this.layer.quad(
                                    this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/4,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/4,
                                    this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/4,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/4
                                )
                            }
                        }
                    }
                }
                if(this.trigger.display.wrap.bow&&lcos(this.spin.wrap.bow+this.anim.direction)<=0){
                    this.layer.strokeJoin(ROUND)
                    this.layer.strokeWeight(0.4)
                    this.layer.fill(this.color.wrap.in[0],this.color.wrap.in[1],this.color.wrap.in[2],this.fade*this.fades.wrap.bow)
                    this.layer.stroke(this.color.wrap.out[0],this.color.wrap.out[1],this.color.wrap.out[2],this.fade*this.fades.wrap.bow)
                    this.calc.int=[this.parts.kimono.main+(this.parts.wrap.bow-this.parts.kimono.main)*this.fades.kimono.main.front.y]
                    if(this.trigger.display.extra.damage){
                        this.layer.beginShape()
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0])
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*9.1*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+3.6)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.8*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.2*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.9*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-3.6)
                        this.layer.endShape(CLOSE)
                        this.layer.beginShape()
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0])
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*9.1*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+3.6)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.8*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.2*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.9*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-3.6)
                        this.layer.endShape(CLOSE)
                    }else{
                        this.layer.triangle(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*9.3*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+4.8,lsin(this.spin.wrap.bow+this.anim.direction)*7.7*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-4.8)
                        this.layer.triangle(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*9.3*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+4.8,lsin(this.spin.wrap.bow+this.anim.direction)*7.7*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-4.8)
                    }
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.8*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+1.2)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.8*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+1.2)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.6*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-1.2)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.6*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-1.2)
                    this.layer.strokeJoin(MITER)
                }
                if(this.trigger.display.kimono.fringe.back){
                    this.layer.image(graphics.combatant[1].sprites.kimono.fringe.back[this.sprites.spin%12],-15*this.fade*this.fades.kimono.fringe.back.x,this.parts.kimono.fringe-5*this.fade*this.fades.kimono.fringe.back.y,30*this.fade*this.fades.kimono.fringe.back.x,10*this.fade*this.fades.kimono.fringe.back.y)
                }
                if(this.trigger.display.wrap.bar&&lcos(this.spin.wrap.bar+this.anim.direction)<=0){
                    this.layer.strokeJoin(ROUND)
                    this.layer.strokeWeight(0.4)
                    this.layer.fill(this.color.wrap.in[0],this.color.wrap.in[1],this.color.wrap.in[2],this.fade*this.fades.wrap.bar)
                    this.layer.stroke(this.color.wrap.out[0],this.color.wrap.out[1],this.color.wrap.out[2],this.fade*this.fades.wrap.bar)
                    this.layer.quad(
                        lsin(this.spin.wrap.bar-this.parts.wrap.bar+this.anim.direction)*7.8*this.fades.kimono.outside.front.x,this.parts.kimono.outside+20*this.fades.kimono.outside.front.y,
                        lsin(this.spin.wrap.bar+this.parts.wrap.bar+this.anim.direction)*7.8*this.fades.kimono.outside.front.x,this.parts.kimono.outside+20*this.fades.kimono.outside.front.y,
                        lsin(this.spin.wrap.bar+this.parts.wrap.bar+this.anim.direction)*9.2*this.fades.kimono.outside.front.x,this.parts.kimono.outside+29*this.fades.kimono.outside.front.y,
                        lsin(this.spin.wrap.bar-this.parts.wrap.bar+this.anim.direction)*9.2*this.fades.kimono.outside.front.x,this.parts.kimono.outside+29*this.fades.kimono.outside.front.y
                    )
                    this.layer.strokeJoin(MITER)
                }
                if(this.trigger.display.kimono.string){
                    this.layer.noStroke()
                    this.layer.fill(this.color.kimono.string[0],this.color.kimono.string[1],this.color.kimono.string[2],this.fade*this.fades.kimono.string)
                    for(let g=0,lg=this.kimono.string.length;g<lg;g++){
                        if(lcos(this.kimono.string[g]+this.anim.direction)>0){
                            this.layer.rect(lsin(this.kimono.string[g]+this.anim.direction)*5.4*this.fades.kimono.outside.front.x,this.parts.kimono.outside+this.parts.kimono.string*this.fades.kimono.outside.front.y,lcos(this.kimono.string[g]+this.anim.direction)*this.fades.kimono.outside.front.x,0.25)
                        }
                    }
                }
                if(this.trigger.display.kimono.outside.back){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[1].sprites.kimono.outsideDamage.back[this.sprites.spin%24],-15*this.fade*this.fades.kimono.outside.back.x,this.parts.kimono.outside,30*this.fade*this.fades.kimono.outside.back.x,40*this.fade*this.fades.kimono.outside.back.y)
                    }else{
                        this.layer.image(graphics.combatant[1].sprites.kimono.outside.back[this.sprites.spin%24],-15*this.fade*this.fades.kimono.outside.back.x,this.parts.kimono.outside,30*this.fade*this.fades.kimono.outside.back.x,40*this.fade*this.fades.kimono.outside.back.y)
                    }
                }
                if(this.trigger.display.kimono.main.back){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[1].sprites.kimono.mainDamage.back[this.sprites.spinDetail],-20*this.fade*this.fades.kimono.main.back.x,this.parts.kimono.main-15*this.fades.kimono.main.back.y,40*this.fade*this.fades.kimono.main.back.x,66*this.fade*this.fades.kimono.main.back.y)
                    }else{
                        this.layer.image(graphics.combatant[1].sprites.kimono.main.back[this.sprites.spinDetail],-20*this.fade*this.fades.kimono.main.back.x,this.parts.kimono.main-15*this.fades.kimono.main.back.y,40*this.fade*this.fades.kimono.main.back.x,66*this.fade*this.fades.kimono.main.back.y)
                    }
                }
                if(this.trigger.display.kimono.decoration.small&&!this.trigger.display.extra.damage){
                    this.layer.noStroke()
                    this.layer.fill(this.color.kimono.decoration.back[0],this.color.kimono.decoration.back[1],this.color.kimono.decoration.back[2],this.fade*this.fades.kimono.decoration.fade.small)
                    for(let g=0,lg=this.kimono.decoration.small.length;g<lg;g++){
                        if(lcos(this.kimono.decoration.small[g].spin+this.anim.direction)<=0){
                            if(this.kimono.decoration.small[g].y<36||this.trigger.display.mode.kimono.main==0){
                                this.layer.translate((2.375+this.kimono.decoration.small[g].y*0.16)*lsin(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.small.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.small.y+this.kimono.decoration.small[g].y*this.fades.kimono.decoration.position.small.y)
                                this.layer.rotate(this.kimono.decoration.small[g].rotate)
                                this.layer.ellipse(0,0,this.kimono.decoration.small[g].width*lcos(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.small.x,this.kimono.decoration.small[g].height*this.fades.kimono.decoration.size.small.y)
                                this.layer.rotate(-this.kimono.decoration.small[g].rotate)
                                this.layer.translate(-(2.375+this.kimono.decoration.small[g].y*0.16)*lsin(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.small.x,-this.parts.kimono.main+13*this.fades.kimono.decoration.position.small.y-this.kimono.decoration.small[g].y*this.fades.kimono.decoration.position.small.y)
                            }else{
                                this.layer.translate((0+this.kimono.decoration.small[g].y*0.26)*lsin(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.small.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.small.y+(25.5+this.kimono.decoration.small[g].y*0.4)*this.fades.kimono.decoration.position.small.y)
                                this.layer.rotate(this.kimono.decoration.small[g].rotate)
                                this.layer.ellipse(0,0,this.kimono.decoration.small[g].width*lcos(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.small.x,this.kimono.decoration.small[g].height*this.fades.kimono.decoration.size.small.y)
                                this.layer.rotate(-this.kimono.decoration.small[g].rotate)
                                this.layer.translate(-(0+this.kimono.decoration.small[g].y*0.26)*lsin(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.small.x,-this.parts.kimono.main+13*this.fades.kimono.decoration.position.small.y-(25.5+this.kimono.decoration.small[g].y*0.4)*this.fades.kimono.decoration.position.small.y)
                            }
                        }
                    }
                }
                if(this.trigger.display.kimono.decoration.large&&!this.trigger.display.extra.damage){
                    this.layer.noStroke()
                    this.layer.fill(this.color.kimono.decoration.back[0],this.color.kimono.decoration.back[1],this.color.kimono.decoration.back[2],this.fade*this.fades.kimono.decoration.fade.large)
                    for(let g=0,lg=this.kimono.decoration.large.length;g<lg;g++){
                        if(lcos(this.kimono.decoration.large[g].spin+this.anim.direction)<=0){
                            if(this.kimono.decoration.large[g].y<36||this.trigger.display.mode.kimono.main==0){
                                this.layer.translate((2.375+this.kimono.decoration.large[g].y*0.16)*lsin(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.large.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.large.y+this.kimono.decoration.large[g].y*this.fades.kimono.decoration.position.large.y)
                                this.layer.rotate(this.kimono.decoration.large[g].rotate)
                                diamond(this.layer,0,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*this.fades.kimono.decoration.size.large.y,0)
                                diamond(this.layer,-this.kimono.decoration.large[g].width*8/3*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*3/4*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*3/4*this.fades.kimono.decoration.size.large.y,15)
                                diamond(this.layer,this.kimono.decoration.large[g].width*8/3*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*3/4*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*3/4*this.fades.kimono.decoration.size.large.y,-15)
                                this.layer.rotate(-this.kimono.decoration.large[g].rotate)
                                this.layer.translate(-(2.375+this.kimono.decoration.large[g].y*0.16)*lsin(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.large.x,-this.parts.kimono.main+13*this.fades.kimono.decoration.position.large.y-this.kimono.decoration.large[g].y*this.fades.kimono.decoration.position.large.y)
                            }else{
                                this.layer.translate((0+this.kimono.decoration.large[g].y*0.26)*lsin(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.large.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.large.y+(25.5+this.kimono.decoration.large[g].y*0.4)*this.fades.kimono.decoration.position.large.y)
                                this.layer.rotate(this.kimono.decoration.large[g].rotate)
                                diamond(this.layer,0,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*this.fades.kimono.decoration.size.large.y,0)
                                diamond(this.layer,-this.kimono.decoration.large[g].width*8/3*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*3/4*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*3/4*this.fades.kimono.decoration.size.large.y,15)
                                diamond(this.layer,this.kimono.decoration.large[g].width*8/3*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*3/4*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*3/4*this.fades.kimono.decoration.size.large.y,-15)
                                this.layer.rotate(-this.kimono.decoration.large[g].rotate)
                                this.layer.translate(-(0+this.kimono.decoration.large[g].y*0.26)*lsin(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.large.x,-this.parts.kimono.main+13*this.fades.kimono.decoration.position.large.y-(25.5+this.kimono.decoration.large[g].y*0.4)*this.fades.kimono.decoration.position.large.y)
                            }
                        }
                    }
                }
                if(this.trigger.display.under.dress.back){
                    this.layer.image(graphics.combatant[1].sprites.under.dress.back[this.sprites.spinDetail],-15*this.fade*this.fades.under.dress.back.x,this.parts.under.dress-15*this.fades.under.dress.back.y,30*this.fade*this.fades.under.dress.back.x,50*this.fade*this.fades.under.dress.back.y)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[0]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,-lcos(this.spin.under.under.button[0]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.75,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[1]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,-lcos(this.spin.under.under.button[1]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.75,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[0]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,-lcos(this.spin.under.under.top[0]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[0]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[0]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[1]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,-lcos(this.spin.under.under.top[1]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[1]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[1]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-46,11,30)
                }
                if(this.trigger.display.skin.button){
                    if(lcos(this.spin.button+this.anim.direction)>0){
                        this.layer.noStroke()
                        this.layer.fill(...this.flashColor(this.color.skin.button),this.fade*this.fades.skin.button)
                        this.layer.ellipse(lsin(this.spin.button+this.anim.direction)*5.2,-42,1*lcos(this.spin.button+this.anim.direction),2)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.extra.sword2&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6&&g==1){
                        this.minorDisplay(1,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.wrap.sleeve&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.strokeJoin(ROUND)
                        this.layer.strokeWeight(0.4)
                        this.layer.fill(this.color.wrap.in[0],this.color.wrap.in[1],this.color.wrap.in[2],this.fade*this.fades.wrap.sleeve)
                        this.layer.stroke(this.color.wrap.out[0],this.color.wrap.out[1],this.color.wrap.out[2],this.fade*this.fades.wrap.sleeve)
                        this.calc.int=[
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.135-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/8,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.135-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/8,
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.15-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/4,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.15-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/4
                        ]
                        if(!(this.anim.direction*(g*2-1)+this.spin.arms[g].lock>-150&&this.anim.direction*(g*2-1)+this.spin.arms[g].lock<150&&(lcos(this.spin.wrap.center+this.anim.direction)>=0||lcos(90*(g*2-1)+this.anim.direction)>=0))){
                            this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*6.6*this.fades.kimono.outside.front.x,this.parts.kimono.outside+16*this.fades.kimono.outside.front.y)
                        }
                        if(!((this.anim.direction*(g*2-1)+this.spin.arms[g].lock<-50||this.anim.direction*(g*2-1)+this.spin.arms[g].lock>50)&&(lcos(this.spin.wrap.center+this.anim.direction)<0||lcos(90*(g*2-1)+this.anim.direction)>=0))){
                            this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*-6.6*this.fades.kimono.outside.front.x,this.parts.kimono.outside+16*this.fades.kimono.outside.front.y)
                        }
                    }
                    if(this.trigger.display.sleeve&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.noStroke()
                        for(let h=0,lh=10;h<lh;h++){
                            this.layer.fill(mergeColor(this.color.sleeve.back,this.color.sleeve.front,h/lh),this.fade*this.fades.sleeve)
                            if(this.trigger.display.extra.damage){
                                this.layer.beginShape()
                                this.layer.vertex(this.graphics.arms[g].top.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.125+(0.175+g*0.05)*h/lh),
                                    this.graphics.arms[g].top.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.125+(0.175+g*0.05)*h/lh))
                                this.layer.vertex(this.graphics.arms[g].top.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(-0.05+g*0.075)*(g*2-1)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.3+g*0.05),
                                    this.graphics.arms[g].top.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(-0.05+g*0.075)*(g*2-1)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.3+g*0.05))
                                this.layer.vertex(this.graphics.arms[g].top.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.12-0.12*h/lh)*(g*2-1)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.125+(0.175+g*0.05)*h/lh),
                                    this.graphics.arms[g].top.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.12-0.12*h/lh)*(g*2-1)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.125+(0.175+g*0.05)*h/lh))
                                this.layer.vertex(this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1))
                                this.layer.vertex(this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.27-0.27*h/lh)*(g*2-1),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.27-0.27*h/lh)*(g*2-1))
                                this.layer.endShape()
                            }else{
                                this.layer.quad(
                                    this.graphics.arms[g].top.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/8,
                                    this.graphics.arms[g].top.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/8,
                                    this.graphics.arms[g].top.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.12-0.12*h/lh)*(g*2-1)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/8,
                                    this.graphics.arms[g].top.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.12-0.12*h/lh)*(g*2-1)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/8,
                                    this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1),
                                    this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.27-0.18*h/lh)*(g*2-1),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.27-0.18*h/lh)*(g*2-1)
                                )
                            }
                            this.layer.push()
                            this.layer.translate(((this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))+
                            (this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(g*2-1)*0.27*sign(lcos(this.anim.direction))))/2,
                            ((this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))+
                            (this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(g*2-1)*0.27*sign(lcos(this.anim.direction))))/2)
                            this.layer.rotate(atan2(this.graphics.arms[g].middle.x-this.graphics.arms[g].top.x,this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y))
                            let i=dist(0,0,
                                ((this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.18-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))-
                                (this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(g*2-1)*0.27*sign(lcos(this.anim.direction)))),
                                ((this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.18-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))-
                                (this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(g*2-1)*0.27*sign(lcos(this.anim.direction)))))
                            this.layer.arc(0,0,i,i*(0.6-0.1*h/lh),-180,0)
                            this.layer.pop()
                            if(this.trigger.display.extra.damage){
                                this.layer.beginShape()
                                this.layer.vertex(this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.45+(0.2+g*0.05)*h/lh),
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.45+(0.2+g*0.05)*h/lh))
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(-0.1+g*0.175)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.65+g*0.05),
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(-0.1+g*0.175)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.65+g*0.05))
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.24+(0.2+g*0.05)*h/lh),
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.24+(0.2+g*0.05)*h/lh))
                                this.layer.endShape()
                            }else{
                                this.layer.quad(
                                    this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.09*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/4,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.09*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/4,
                                    this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.09*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/4,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.09*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/4
                                )
                            }
                        }
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.fades.sandal.back[h]>0&&this.trigger.display.sandal.back[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.back.x,this.graphics.legs[h].sandal.back.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                if(this.trigger.display.extra.damage){
                                    this.layer.image(graphics.minor[13+h],-4*this.fades.sandal.back[h]*this.fade,-4*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade)
                                }else{
                                    this.layer.image(graphics.minor[12],-4*this.fades.sandal.back[h]*this.fade,-4*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade)
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.back.x,-this.graphics.legs[h].sandal.back.y-1.5)
                            }
                            if(this.fades.sandal.front[h]>0&&this.trigger.display.sandal.front[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.front.x,this.graphics.legs[h].sandal.front.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                for(let i=0;i<2;i++){
                                    if((lcos(this.anim.direction+65*(i*2-1)-this.spin.sandal[h])<=0.2&&this.trigger.display.mode.sandal.edge==0||i%2!=h&&this.trigger.display.mode.sandal.edge==1)){
                                        this.layer.image(graphics.minor[15+i],-4*this.fades.sandal.front[h]*this.fade,-4*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade)
                                    }
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.front.x,-this.graphics.legs[h].sandal.front.y-1.5)
                            }
                            if(this.trigger.display.skin.legs){
                                let color=this.flashColor(upColor(this.color.skin.legs,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                            if(this.fades.sandal.front[h]>0&&this.trigger.display.sandal.front[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.front.x,this.graphics.legs[h].sandal.front.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                for(let i=0;i<2;i++){
                                    if((lcos(this.anim.direction+65*(i*2-1)-this.spin.sandal[h])>0.2&&this.trigger.display.mode.sandal.edge==0||i%2==h&&this.trigger.display.mode.sandal.edge==1)){
                                        this.layer.image(graphics.minor[15+i],-4*this.fades.sandal.front[h]*this.fade,-4*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade)
                                    }
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.front.x,-this.graphics.legs[h].sandal.front.y-1.5)
                            }
                        }
                    }
                }
                if(this.trigger.display.sleeveDecoration){
                    this.layer.noStroke()
                    for(let g=0,lg=this.spin.sleeve.decoration.length;g<lg;g++){
                        if(lcos(this.spin.sleeve.decoration[g].spin+this.anim.direction)>=0.2&&lcos(this.spin.arms[this.spin.sleeve.decoration[g].part].top+this.anim.direction)<=-0.3&&!(this.spin.sleeve.decoration[g].length>1.5&&this.trigger.display.extra.damage)){
                            h=this.spin.sleeve.decoration[g].part
                            this.layer.push()
                            if(this.spin.sleeve.decoration[g].length>1){
                                this.layer.translate(
                                    lerp(
                                        this.graphics.arms[h].middle.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.165*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.graphics.arms[h].bottom.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.27*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)/4,
                                        this.spin.sleeve.decoration[g].length-1
                                    )
                                    ,lerp(
                                        this.graphics.arms[h].middle.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.165*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.graphics.arms[h].bottom.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.27*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)/4,
                                        this.spin.sleeve.decoration[g].length-1
                                    ))
                                this.layer.rotate(-atan2(
                                    ((this.graphics.arms[h].middle.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.165*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))-
                                    (this.graphics.arms[h].bottom.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.27*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)/4)),
                                    ((this.graphics.arms[h].middle.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.165*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))-
                                    (this.graphics.arms[h].bottom.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.27*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)/4))
                                ))
                            }else{
                                this.layer.translate(
                                    lerp(
                                        this.graphics.arms[h].top.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.12*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)/8,
                                        this.graphics.arms[h].middle.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.15*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.spin.sleeve.decoration[g].length
                                    )
                                    ,lerp(
                                        this.graphics.arms[h].top.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.12*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)/8,
                                        this.graphics.arms[h].middle.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.15*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.spin.sleeve.decoration[g].length
                                    ))
                                this.layer.rotate(-atan2(
                                    ((this.graphics.arms[h].top.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.12*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)/8)-
                                    (this.graphics.arms[h].middle.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.15*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))),
                                    ((this.graphics.arms[h].top.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.12*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)/8)-
                                    (this.graphics.arms[h].middle.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.15*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)))
                                ))
                            }
                            this.layer.scale(lcos(this.spin.sleeve.decoration[g].spin+this.anim.direction)*1.1-0.1,1)
                            this.layer.rotate(this.spin.sleeve.decoration[g].rotate)
                            this.layer.fill(this.color.sleeve.decoration[this.spin.sleeve.decoration[g].type],this.fade)
                            this.layer.beginShape()
                            this.layer.vertex(0,2)
                            this.layer.vertex(-0.375,0.25)
                            this.layer.vertex(-2,0)
                            this.layer.vertex(-0.5,-0.25)
                            this.layer.vertex(-1,-1.5)
                            this.layer.vertex(0,-0.5)
                            this.layer.vertex(1,-1.5)
                            this.layer.vertex(0.5,-0.25)
                            this.layer.vertex(2,0)
                            this.layer.vertex(0.375,0.25)
                            this.layer.endShape()
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,lcos(this.spin.under.under.top[0]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[0]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[0]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[1]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,lcos(this.spin.under.under.top[1]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[1]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[1]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,lcos(this.spin.under.under.button[0]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.75,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[1]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,lcos(this.spin.under.under.button[1]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.75,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.bottom&&lcos(this.spin.under.under.bottom[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.bottom[0],lcos(this.spin.under.under.bottom[0]+this.anim.direction))),this.fade*this.fades.under.under.bottom)
                    this.layer.beginShape()
                    this.layer.vertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*1.5,-31)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.endShape()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.bottom[1],lcos(this.spin.under.under.bottom[0]+this.anim.direction))),this.fade*this.fades.under.under.bottom)
                    this.layer.beginShape()
                    this.layer.vertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*1.5,-31)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.endShape()
                }
                if(this.trigger.display.under.tanga){
                    this.sprites.temp=createGraphics(40,40)
                    setupLayer(this.sprites.temp)
                    this.sprites.temp.noStroke()
                    this.sprites.temp.fill(...this.color.under.tanga,this.fade*this.fades.under.tanga)
                    if(abs(this.anim.direction)<this.spin.under.tanga){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+this.spin.under.tanga),42,0,90)
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-this.spin.under.tanga),42,90,180)
                    }else if(this.anim.direction>=this.spin.under.tanga&&this.anim.direction<(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+this.spin.under.tanga),42,0,90)
                    }else if(this.anim.direction<=-this.spin.under.tanga&&this.anim.direction>-(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-this.spin.under.tanga),42,90,180)
                    }
                    if(abs(this.anim.direction)>=(180-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-(180-this.spin.under.tanga)),42,0,90)
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+(180-this.spin.under.tanga)),42,90,180)
                    }else if(this.anim.direction>=-(180-this.spin.under.tanga)&&this.anim.direction<-(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-(180-this.spin.under.tanga)),42,0,90)
                    }else if(this.anim.direction<=(180-this.spin.under.tanga)&&this.anim.direction>(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+(180-this.spin.under.tanga)),42,90,180)
                    }
                    this.sprites.temp.erase()
                    this.sprites.temp.rect(20,6,40,11)
                    if(this.anim.direction>=this.spin.under.tanga&&this.anim.direction<(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-this.spin.under.tanga),42,0,90)
                    }else if(this.anim.direction<=-this.spin.under.tanga&&this.anim.direction>-(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+this.spin.under.tanga),42,90,180)
                    }
                    if(this.anim.direction>=-(180-this.spin.under.tanga)&&this.anim.direction<-(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+(180-this.spin.under.tanga)),42,0,90)
                    }else if(this.anim.direction<=(180-this.spin.under.tanga)&&this.anim.direction>(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-(180-this.spin.under.tanga)),42,90,180)
                    }
                    this.sprites.temp.noErase()
                    this.sprites.temp.rect(20,11,18,1/this.anim.under.bottom.y)
                    if(this.anim.under.bottom.y<=0){
                        this.layer.push()
                        this.layer.translate(0,this.parts.under.bottom-6*this.anim.under.bottom.y)
                        this.layer.scale(1,-1)
                        this.layer.image(this.sprites.temp,-10*this.anim.under.bottom.x,-5,20*this.anim.under.bottom.x,20*abs(this.anim.under.bottom.y))
                        this.layer.pop()
                    }else{
                        this.layer.image(this.sprites.temp,-10*this.anim.under.bottom.x,this.parts.under.bottom-6*this.anim.under.bottom.y-5,20*this.anim.under.bottom.x,20*abs(this.anim.under.bottom.y))
                    }
                }
                if(this.trigger.display.under.bottom){
                    this.layer.noStroke()
                    this.layer.fill(...this.color.under.outside,this.fade*this.fades.under.bottom)
                    this.layer.beginShape()
                    this.layer.vertex(-4.75*this.anim.under.bottom.x,this.parts.under.bottom-6.5*this.anim.under.bottom.y)
                    this.layer.bezierVertex(-4.5*this.anim.under.bottom.x,this.parts.under.bottom-5*this.anim.under.bottom.y,-3*this.anim.under.bottom.x,this.parts.under.bottom-1*this.anim.under.bottom.y,0,this.parts.under.bottom)
                    this.layer.bezierVertex(3*this.anim.under.bottom.x,this.parts.under.bottom-1*this.anim.under.bottom.y,4.5*this.anim.under.bottom.x,this.parts.under.bottom-5*this.anim.under.bottom.y,4.75*this.anim.under.bottom.x,this.parts.under.bottom-6.5*this.anim.under.bottom.y)
                    this.layer.endShape()
                    this.layer.fill(this.color.under.fringe[0],this.color.under.fringe[1],this.color.under.fringe[2],this.fade)
                    for(let g=0,lg=this.spin.under.top[0].length;g<lg;g++){
                        if(lcos(this.spin.under.top[0][g]+this.anim.direction)>0){
                            this.layer.arc(4.5*lsin(this.spin.under.top[0][g]+this.anim.direction)*this.anim.under.bottom.x,this.parts.under.bottom-6.5*this.anim.under.bottom.y,lcos(this.spin.under.top[0][g]+this.anim.direction)*1.1*this.anim.under.bottom.x,3*this.anim.under.bottom.y,0,180)
                        }
                    }
                    for(let g=0,lg=this.spin.under.bottom[0].length;g<lg;g++){
                        if(lcos(this.spin.under.bottom[0][g]+this.anim.direction)>0){
                            this.layer.arc(4.5*lsin(this.spin.under.bottom[0][g]+this.anim.direction)*this.anim.under.bottom.x,this.parts.under.bottom-6.5*this.anim.under.bottom.y,lcos(this.spin.under.bottom[0][g]+this.anim.direction)*0.8*this.anim.under.bottom.x,2*this.anim.under.bottom.y,0,180)
                        }
                    }
                    for(let g=0,lg=10;g<lg;g++){
                        if(lcos(360*g/lg+this.anim.direction)>0){
                            this.layer.push()
                            this.layer.translate(4*lsin(360*g/lg+this.anim.direction),-35)
                            this.layer.rotate(30*lsin(360*g/lg+this.anim.direction))
                            this.layer.image(graphics.minor[18],-1.5*lcos(360*g/lg+this.anim.direction)*this.fade*this.fades.under.bottom,-1.5*this.fade*this.fades.under.bottom,3*lcos(360*g/lg+this.anim.direction)*this.fade*this.fades.under.bottom,3*this.fade*this.fades.under.bottom)
                            this.layer.pop()
                        }
                    }
                    for(let g=0,lg=6;g<lg;g++){
                        if(lcos(360*(g+0.25)/lg+this.anim.direction)>0){
                            this.layer.push()
                            this.layer.translate(2.5*lsin(360*(g+0.25)/lg+this.anim.direction),-33)
                            this.layer.rotate(30*lsin(360*(g+0.25)/lg+this.anim.direction))
                            this.layer.image(graphics.minor[18],-1.5*lcos(360*(g+0.25)/lg+this.anim.direction)*this.fade*this.fades.under.bottom,-1.5*this.fade*this.fades.under.bottom,3*lcos(360*(g+0.25)/lg+this.anim.direction)*this.fade*this.fades.under.bottom,3*this.fade*this.fades.under.bottom)
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.under.top){
                    this.sprites.temp=createGraphics(80,80)
                    setupLayer(this.sprites.temp)
                    this.sprites.temp.translate(40,0)
                    this.sprites.temp.noStroke()
                    this.sprites.temp.fill(...this.color.under.outside,this.fade*this.fades.under.top)
                    for(let g=0;g<2;g++){
                        if(lcos(this.spin.under.under.top[g]+this.anim.direction)){
                            if(lsin(this.spin.under.under.top[g]+this.anim.direction+27)*13.5-lsin(this.spin.under.under.top[g]+this.anim.direction)*9>0){
                                this.sprites.temp.arc(lsin(this.spin.under.under.top[g]+this.anim.direction)*15,74,lsin(this.spin.under.under.top[g]+this.anim.direction+27)*54-lsin(this.spin.under.under.top[g]+this.anim.direction)*36,75,-90,0)
                                this.sprites.temp.ellipse(lsin(this.spin.under.under.top[g]+this.anim.direction)*15,74,6,75)
                            }
                            if(lsin(this.spin.under.under.top[g]+this.anim.direction)*9-lsin(this.spin.under.under.top[g]+this.anim.direction-27)*13.5>0){
                                this.sprites.temp.arc(lsin(this.spin.under.under.top[g]+this.anim.direction)*15,74,lsin(this.spin.under.under.top[g]+this.anim.direction)*36-lsin(this.spin.under.under.top[g]+this.anim.direction-27)*54,75,-180,-90)
                                this.sprites.temp.ellipse(lsin(this.spin.under.under.top[g]+this.anim.direction)*15,74,6,75)
                            }
                        }
                    }
                    this.sprites.temp.rect(0,58.5,44,3)
                    this.sprites.temp.erase()
                    this.sprites.temp.rect(0,70,80,20)
                    this.layer.image(this.sprites.temp,-10*this.anim.under.top.x,this.parts.under.top-12*this.anim.under.top.y,20*this.anim.under.top.x,20*this.anim.under.top.y)
                    this.layer.noStroke()
                    this.layer.fill(...this.color.under.outside,this.fade*this.fades.under.top)
                    if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[0]+this.anim.direction)>-0.4){
                        this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.5)
                    }
                    if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[1]+this.anim.direction)>-0.4){
                        this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.5)
                    }
                    this.layer.fill(this.color.under.fringe[0],this.color.under.fringe[1],this.color.under.fringe[2],this.fade)
                    for(let g=0,lg=this.spin.under.top[1].length;g<lg;g++){
                        if(lcos(this.spin.under.top[1][g]+this.anim.direction)>0){
                            this.layer.arc(5.5*lsin(this.spin.under.top[1][g]+this.anim.direction)*this.anim.under.top.x,this.parts.under.top+3*this.anim.under.top.y,lcos(this.spin.under.top[1][g]+this.anim.direction)*0.8*this.anim.under.top.x,2*this.anim.under.top.y,0,180)
                        }
                    }
                    for(let g=0,lg=this.spin.under.bottom[1].length;g<lg;g++){
                        if(lcos(this.spin.under.bottom[1][g]+this.anim.direction)>0){
                            this.layer.arc(5.5*lsin(this.spin.under.bottom[1][g]+this.anim.direction)*this.anim.under.bottom.x,this.parts.under.top+3*this.anim.under.bottom.y,lcos(this.spin.under.bottom[1][g]+this.anim.direction)*1.1*this.anim.under.bottom.x,3*this.anim.under.bottom.y,0,180)
                        }
                    }
                    for(let g=0,lg=2;g<lg;g++){
                        if(lcos(this.spin.under.under.top[g]+this.anim.direction)>0){
                            this.layer.push()
                            this.layer.translate(5*lsin(this.spin.under.under.top[g]+this.anim.direction),-51)
                            this.layer.rotate(-15*lsin(this.spin.under.under.top[g]+this.anim.direction))
                            this.layer.image(graphics.minor[18],-1.5*lcos(this.spin.under.under.top[g]+this.anim.direction)*this.fade*this.fades.under.bottom,-1.5*this.fade*this.fades.under.bottom,3*lcos(this.spin.under.under.top[g]+this.anim.direction)*this.fade*this.fades.under.bottom,3*this.fade*this.fades.under.bottom)
                            this.layer.pop()
                        }
                        for(let h=0;h<2;h++){
                            if(lcos(this.spin.under.under.top[g]-12+h*24+this.anim.direction)>0){
                                this.layer.push()
                                this.layer.translate(5*lsin(this.spin.under.under.top[g]-12+h*24+this.anim.direction),-49)
                                this.layer.rotate(-15*lsin(this.spin.under.under.top[g]-12+h*24+this.anim.direction))
                                this.layer.image(graphics.minor[18],-1.5*lcos(this.spin.under.under.top[g]-12+h*24+this.anim.direction)*this.fade*this.fades.under.bottom,
                                -1.5*this.fade*this.fades.under.bottom,3*lcos(this.spin.under.under.top[g]-12+h*24+this.anim.direction)*this.fade*this.fades.under.bottom,3*this.fade*this.fades.under.bottom)
                                this.layer.pop()
                            }
                        }
                    }
                }
                if(this.trigger.display.under.bow.top){
                    this.layer.noFill()
                    this.layer.stroke(this.color.under.bow[0],this.color.under.bow[1],this.color.under.bow[2],this.fade*this.fades.under.bow.top)
                    this.layer.strokeWeight(0.2)
                    if(lcos(this.spin.underBow.top.center/2+this.spin.underBow.top.loop[0]/2+this.anim.direction)>0){
                        this.layer.ellipse(lsin(this.spin.underBow.top.center+this.anim.direction)*2.875*this.anim.under.bow.top.position.x+lsin(this.spin.underBow.top.loop[0]*this.anim.under.bow.top.size.x/this.anim.under.bow.top.position.x+this.anim.direction)*2.875*this.anim.under.bow.top.position.x,this.parts.under.top+this.parts.under.bow.top*this.anim.under.bow.top.position.y,(lsin(this.spin.underBow.top.center+this.anim.direction)*5.5*this.anim.under.bow.top.position.x-lsin(this.spin.underBow.top.loop[0]*this.anim.under.bow.top.size.x/this.anim.under.bow.top.position.x+this.anim.direction)*5.5*this.anim.under.bow.top.position.x),0.8*this.anim.under.bow.top.size.y)
                    }
                    if(lcos(this.spin.underBow.top.center/2+this.spin.underBow.top.loop[1]/2+this.anim.direction)>0){
                        this.layer.ellipse(lsin(this.spin.underBow.top.center+this.anim.direction)*2.875*this.anim.under.bow.top.position.x+lsin(this.spin.underBow.top.loop[1]*this.anim.under.bow.top.size.x/this.anim.under.bow.top.position.x+this.anim.direction)*2.875*this.anim.under.bow.top.position.x,this.parts.under.top+this.parts.under.bow.top*this.anim.under.bow.top.position.y,(lsin(this.spin.underBow.top.center+this.anim.direction)*5.5*this.anim.under.bow.top.position.x-lsin(this.spin.underBow.top.loop[1]*this.anim.under.bow.top.size.x/this.anim.under.bow.top.position.x+this.anim.direction)*5.5*this.anim.under.bow.top.position.x),0.8*this.anim.under.bow.top.size.y)
                    }
                    if(lcos(this.spin.underBow.top.center/2+this.spin.underBow.top.end[0]/2+this.anim.direction)>0){
                        this.layer.line(lsin(this.spin.underBow.top.center+this.anim.direction)*5.75*this.anim.under.bow.top.position.x,this.parts.under.top+this.parts.under.bow.top*this.anim.under.bow.top.position.y,lsin(this.spin.underBow.top.end[0]*this.anim.under.bow.top.size.x/this.anim.under.bow.top.position.x+this.anim.direction)*(5.75*this.anim.under.bow.top.position.x+0.25*this.anim.under.bow.top.size.x),this.parts.under.top+(this.parts.under.bow.top+1.2)*this.anim.under.bow.top.size.y)
                    }
                    if(lcos(this.spin.underBow.top.center/2+this.spin.underBow.top.end[1]/2+this.anim.direction)>0){
                        this.layer.line(lsin(this.spin.underBow.top.center+this.anim.direction)*5.75*this.anim.under.bow.top.position.x,this.parts.under.top+this.parts.under.bow.top*this.anim.under.bow.top.position.y,lsin(this.spin.underBow.top.end[1]*this.anim.under.bow.top.size.x/this.anim.under.bow.top.position.x+this.anim.direction)*(5.75*this.anim.under.bow.top.position.x+0.25*this.anim.under.bow.top.size.x),this.parts.under.top+(this.parts.under.bow.top+1.2)*this.anim.under.bow.top.size.y)
                    }
                }
                if(this.trigger.display.under.bow.bottom){
                    this.layer.noFill()
                    this.layer.stroke(this.color.under.bow[0],this.color.under.bow[1],this.color.under.bow[2],this.fade*this.fades.under.bow.bottom)
                    this.layer.strokeWeight(0.2)
                    if(lcos(this.spin.underBow.bottom.center/2+this.spin.underBow.bottom.loop[0]/2+this.anim.direction)>0){
                        this.layer.ellipse(lsin(this.spin.underBow.bottom.center+this.anim.direction)*2.875*this.anim.under.bow.bottom.position.x+lsin(this.spin.underBow.bottom.loop[0]*this.anim.under.bow.bottom.size.x/this.anim.under.bow.bottom.position.x+this.anim.direction)*2.875*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+this.parts.under.bow.bottom*this.anim.under.bow.bottom.position.y,(lsin(this.spin.underBow.bottom.center+this.anim.direction)*5.5*this.anim.under.bow.bottom.position.x-lsin(this.spin.underBow.bottom.loop[0]*this.anim.under.bow.bottom.size.x/this.anim.under.bow.bottom.position.x+this.anim.direction)*5.5*this.anim.under.bow.bottom.position.x),0.8*this.anim.under.bow.bottom.size.y)
                    }
                    if(lcos(this.spin.underBow.bottom.center/2+this.spin.underBow.bottom.loop[1]/2+this.anim.direction)>0){
                        this.layer.ellipse(lsin(this.spin.underBow.bottom.center+this.anim.direction)*2.875*this.anim.under.bow.bottom.position.x+lsin(this.spin.underBow.bottom.loop[1]*this.anim.under.bow.bottom.size.x/this.anim.under.bow.bottom.position.x+this.anim.direction)*2.875*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+this.parts.under.bow.bottom*this.anim.under.bow.bottom.position.y,(lsin(this.spin.underBow.bottom.center+this.anim.direction)*5.5*this.anim.under.bow.bottom.position.x-lsin(this.spin.underBow.bottom.loop[1]*this.anim.under.bow.bottom.size.x/this.anim.under.bow.bottom.position.x+this.anim.direction)*5.5*this.anim.under.bow.bottom.position.x),0.8*this.anim.under.bow.bottom.size.y)
                    }
                    if(lcos(this.spin.underBow.bottom.center/2+this.spin.underBow.bottom.end[0]/2+this.anim.direction)>0){
                        this.layer.line(lsin(this.spin.underBow.bottom.center+this.anim.direction)*5.75*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+this.parts.under.bow.bottom*this.anim.under.bow.bottom.position.y,lsin(this.spin.underBow.bottom.end[0]*this.anim.under.bow.bottom.size.x/this.anim.under.bow.bottom.position.x+this.anim.direction)*(5.75*this.anim.under.bow.bottom.position.x+0.25*this.anim.under.bow.bottom.size.x),this.parts.under.bottom+(this.parts.under.bow.bottom+1.2)*this.anim.under.bow.bottom.size.y)
                    }
                    if(lcos(this.spin.underBow.bottom.center/2+this.spin.underBow.bottom.end[1]/2+this.anim.direction)>0){
                        this.layer.line(lsin(this.spin.underBow.bottom.center+this.anim.direction)*5.75*this.anim.under.bow.bottom.position.x,this.parts.under.bottom+this.parts.under.bow.bottom*this.anim.under.bow.bottom.position.y,lsin(this.spin.underBow.bottom.end[1]*this.anim.under.bow.bottom.size.x/this.anim.under.bow.bottom.position.x+this.anim.direction)*(5.75*this.anim.under.bow.bottom.position.x+0.25*this.anim.under.bow.bottom.size.x),this.parts.under.bottom+(this.parts.under.bow.bottom+1.2)*this.anim.under.bow.bottom.size.y)
                    }
                }
                if(this.trigger.display.under.towel){
                    this.layer.noStroke()
                    this.layer.fill(this.color.under.towel[0],this.color.under.towel[1],this.color.under.towel[2],this.fade*this.fades.under.towel)
                    this.layer.quad(-5,this.parts.under.top-3,5,this.parts.under.top-3,8,this.parts.under.bottom+6,-8,this.parts.under.bottom+6)
                    this.layer.ellipse(lsin(this.spin.under.under.top[0]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[0]+this.anim.direction)*2.5+3.5,6)
                    this.layer.ellipse(lsin(this.spin.under.under.top[1]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[1]+this.anim.direction)*2.5+3.5,6)
                    this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.75,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.25)
                    this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.75,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.necklace.front){
                    this.layer.noFill()
                    this.layer.stroke(this.color.necklace[0],this.color.necklace[1],this.color.necklace[2],this.fade*this.fades.necklace.front)
                    this.layer.strokeWeight(0.4)
                    if(lcos(this.spin.necklace[0]+this.anim.direction)>0){
                        this.layer.arc(0,-59,6,3,atan2(lsin(90-this.spin.necklace[0]-this.anim.direction),lcos(90-this.spin.necklace[0]-this.anim.direction)*2),180)
                    }
                    if(lcos(this.spin.necklace[1]+this.anim.direction)>0){
                        this.layer.arc(0,-59,6,3,0,atan2(lsin(90-this.spin.necklace[1]-this.anim.direction),lcos(90-this.spin.necklace[1]-this.anim.direction)*2))
                    }
                    if(lcos(this.spin.necklace[0]+this.anim.direction)<=0&&lcos(this.spin.necklace[1]+this.anim.direction)<=0){
                        this.layer.arc(0,-59,6,3,0,180)
                    }
                    if(lcos(this.spin.necklaceBow.center+this.anim.direction)>0){
                        this.layer.line(lsin(this.spin.necklaceBow.center+this.anim.direction)*3,this.parts.necklaceBow+1.5*sqrt(1-lsin(this.spin.necklaceBow.center+this.anim.direction)*lsin(this.spin.necklaceBow.center+this.anim.direction)),
                        lsin(this.spin.necklaceBow.end[0]+this.anim.direction)*3.5,this.parts.necklaceBow+2+1.5*sqrt(1-lsin(this.spin.necklaceBow.end[0]+this.anim.direction)*lsin(this.spin.necklaceBow.end[0]+this.anim.direction)))
                        this.layer.line(lsin(this.spin.necklaceBow.center+this.anim.direction)*3,this.parts.necklaceBow+1.5*sqrt(1-lsin(this.spin.necklaceBow.center+this.anim.direction)*lsin(this.spin.necklaceBow.center+this.anim.direction)),
                        lsin(this.spin.necklaceBow.end[1]+this.anim.direction)*3.5,this.parts.necklaceBow+2+1.5*sqrt(1-lsin(this.spin.necklaceBow.end[1]+this.anim.direction)*lsin(this.spin.necklaceBow.end[1]+this.anim.direction)))
                        this.layer.ellipse(lsin(this.spin.necklaceBow.loop[0]+this.anim.direction)*3.2,this.parts.necklaceBow+0.5+1.5*sqrt(1-lsin(this.spin.necklaceBow.loop[0]+this.anim.direction)*lsin(this.spin.necklaceBow.loop[0]+this.anim.direction)),
                        lcos(this.spin.necklaceBow.loop[0]+this.anim.direction)*1.2,1.2)
                        this.layer.ellipse(lsin(this.spin.necklaceBow.loop[1]+this.anim.direction)*3.2,this.parts.necklaceBow+0.5+1.5*sqrt(1-lsin(this.spin.necklaceBow.loop[1]+this.anim.direction)*lsin(this.spin.necklaceBow.loop[1]+this.anim.direction)),
                        lcos(this.spin.necklaceBow.loop[1]+this.anim.direction)*1.2,1.2)
                    }
                    if(this.spin.necklace[0]+this.anim.direction>-130&&this.spin.necklace[0]+this.anim.direction<65){
                        if(lsin(this.spin.necklace[2]+this.anim.direction)*5.25<lsin(this.spin.necklace[0]+this.anim.direction)*3){
                            this.layer.arc(lsin(this.spin.necklace[0]+this.anim.direction)*3,-54,lsin(this.spin.necklace[2]+this.anim.direction)*10.5-lsin(this.spin.necklace[0]+this.anim.direction)*6,10-lcos(this.spin.necklace[0]+this.anim.direction)*3,-180,-90)
                        }else{
                            this.layer.arc(lsin(this.spin.necklace[0]+this.anim.direction)*3,-54,lsin(this.spin.necklace[2]+this.anim.direction)*10.5-lsin(this.spin.necklace[0]+this.anim.direction)*6,10-lcos(this.spin.necklace[0]+this.anim.direction)*3,-90,0)
                        }
                    }
                    if(this.spin.necklace[1]+this.anim.direction<130&&this.spin.necklace[1]+this.anim.direction>-65){
                        if(lsin(this.spin.necklace[2]+this.anim.direction)*5.25>lsin(this.spin.necklace[1]+this.anim.direction)*3){
                            this.layer.arc(lsin(this.spin.necklace[1]+this.anim.direction)*3,-54,lsin(this.spin.necklace[2]+this.anim.direction)*10.5-lsin(this.spin.necklace[1]+this.anim.direction)*6,10-lcos(this.spin.necklace[1]+this.anim.direction)*3,-90,0)
                        }else{
                            this.layer.arc(lsin(this.spin.necklace[1]+this.anim.direction)*3,-54,lsin(this.spin.necklace[2]+this.anim.direction)*10.5-lsin(this.spin.necklace[1]+this.anim.direction)*6,10-lcos(this.spin.necklace[1]+this.anim.direction)*3,-180,-90)
                        }
                    }
                }
                if(this.trigger.display.under.dress.front){
                    this.layer.image(graphics.combatant[1].sprites.under.dress.front[this.sprites.spinDetail],-15*this.fade*this.fades.under.dress.front.x,this.parts.under.dress-15*this.fades.under.dress.front.y,30*this.fade*this.fades.under.dress.front.x,50*this.fade*this.fades.under.dress.front.y)
                }
                if(this.trigger.display.under.dress.decoration.large){
                    this.layer.noStroke()
                    for(let g=0,lg=this.under.dressDecoration.large.length;g<lg;g++){
                        if(lcos(this.under.dressDecoration.large[g].spin+this.anim.direction)>0){
                            this.layer.push()
                            this.layer.translate((2.5+this.under.dressDecoration.large[g].y*3/20)*lsin(this.under.dressDecoration.large[g].spin+this.anim.direction)*this.fades.under.dress.decoration.position.large.x,this.parts.under.dress-13*this.fades.under.dress.decoration.position.large.y+this.under.dressDecoration.large[g].y*this.fades.under.dress.decoration.position.large.y)
                            this.layer.rotate(-12*lsin(this.under.dressDecoration.large[g].spin+this.anim.direction))
                            this.layer.scale(this.fades.under.dress.decoration.size.large.x*lcos(this.under.dressDecoration.large[g].spin+this.anim.direction),this.fades.under.dress.decoration.size.large.y)
                            this.layer.rotate(this.under.dressDecoration.large[g].rotate)
                            this.layer.fill(this.color.under.dressDecoration[this.under.dressDecoration.large[g].type][0],this.color.under.dressDecoration[this.under.dressDecoration.large[g].type][1],this.color.under.dressDecoration[this.under.dressDecoration.large[g].type][2],this.fade*this.fades.under.dress.decoration.fade.large)
                            for(let h=0;h<5;h++){
                                this.layer.rotate(72)
                                this.layer.beginShape()
                                this.layer.vertex(0,0)
                                this.layer.bezierVertex(this.under.dressDecoration.large[g].width*-2,this.under.dressDecoration.large[g].height*0.5,this.under.dressDecoration.large[g].width*-3,this.under.dressDecoration.large[g].height*1,this.under.dressDecoration.large[g].width*-1,this.under.dressDecoration.large[g].height*1.5)
                                this.layer.vertex(0,this.under.dressDecoration.large[g].height*1.2)
                                this.layer.vertex(this.under.dressDecoration.large[g].width*1,this.under.dressDecoration.large[g].height*1.5)
                                this.layer.bezierVertex(this.under.dressDecoration.large[g].width*3,this.under.dressDecoration.large[g].height*1,this.under.dressDecoration.large[g].width*2,this.under.dressDecoration.large[g].height*0.5,0,0)
                                this.layer.endShape()
                            }
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.kimono.main.front){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[1].sprites.kimono.mainDamage.front[this.sprites.spinDetail],-20*this.fade*this.fades.kimono.main.front.x,this.parts.kimono.main-15*this.fades.kimono.main.front.y,40*this.fade*this.fades.kimono.main.front.x,66*this.fade*this.fades.kimono.main.front.y)
                    }else{
                        this.layer.image(graphics.combatant[1].sprites.kimono.main.front[this.sprites.spinDetail],-20*this.fade*this.fades.kimono.main.front.x,this.parts.kimono.main-15*this.fades.kimono.main.front.y,40*this.fade*this.fades.kimono.main.front.x,66*this.fade*this.fades.kimono.main.front.y)
                    }
                }
                if(this.trigger.display.kimono.decoration.small&&!this.trigger.display.extra.damage){
                    this.layer.noStroke()
                    this.layer.fill(this.color.kimono.decoration.front[0],this.color.kimono.decoration.front[1],this.color.kimono.decoration.front[2],this.fade*this.fades.kimono.decoration.fade.small)
                    for(let g=0,lg=this.kimono.decoration.small.length;g<lg;g++){
                        if(lcos(this.kimono.decoration.small[g].spin+this.anim.direction)>0){
                            if(this.kimono.decoration.small[g].y<36||this.trigger.display.mode.kimono.main==0){
                                this.layer.translate((2.375+this.kimono.decoration.small[g].y*0.16)*lsin(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.small.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.small.y+this.kimono.decoration.small[g].y*this.fades.kimono.decoration.position.small.y)
                                this.layer.rotate(this.kimono.decoration.small[g].rotate)
                                this.layer.ellipse(0,0,this.kimono.decoration.small[g].width*lcos(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.small.x,this.kimono.decoration.small[g].height*this.fades.kimono.decoration.size.small.y)
                                this.layer.rotate(-this.kimono.decoration.small[g].rotate)
                                this.layer.translate(-(2.375+this.kimono.decoration.small[g].y*0.16)*lsin(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.small.x,-this.parts.kimono.main+13*this.fades.kimono.decoration.position.small.y-this.kimono.decoration.small[g].y*this.fades.kimono.decoration.position.small.y)
                            }else{
                                this.layer.translate((0+this.kimono.decoration.small[g].y*0.26)*lsin(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.small.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.small.y+(25.5+this.kimono.decoration.small[g].y*0.4)*this.fades.kimono.decoration.position.small.y)
                                this.layer.rotate(this.kimono.decoration.small[g].rotate)
                                this.layer.ellipse(0,0,this.kimono.decoration.small[g].width*lcos(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.small.x,this.kimono.decoration.small[g].height*this.fades.kimono.decoration.size.small.y)
                                this.layer.rotate(-this.kimono.decoration.small[g].rotate)
                                this.layer.translate(-(0+this.kimono.decoration.small[g].y*0.26)*lsin(this.kimono.decoration.small[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.small.x,-this.parts.kimono.main+13*this.fades.kimono.decoration.position.small.y-(25.5+this.kimono.decoration.small[g].y*0.4)*this.fades.kimono.decoration.position.small.y)
                            }
                        }
                    }
                }
                if(this.trigger.display.kimono.decoration.large&&!this.trigger.display.extra.damage){
                    this.layer.noStroke()
                    this.layer.fill(this.color.kimono.decoration.front[0],this.color.kimono.decoration.front[1],this.color.kimono.decoration.front[2],this.fade*this.fades.kimono.decoration.fade.large)
                    for(let g=0,lg=this.kimono.decoration.large.length;g<lg;g++){
                        if(lcos(this.kimono.decoration.large[g].spin+this.anim.direction)>0){
                            if(this.kimono.decoration.large[g].y<36||this.trigger.display.mode.kimono.main==0){
                                this.layer.translate((2.375+this.kimono.decoration.large[g].y*0.16)*lsin(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.large.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.large.y+this.kimono.decoration.large[g].y*this.fades.kimono.decoration.position.large.y)
                                this.layer.rotate(this.kimono.decoration.large[g].rotate)
                                diamond(this.layer,0,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*this.fades.kimono.decoration.size.large.y,0)
                                diamond(this.layer,-this.kimono.decoration.large[g].width*8/3*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*3/4*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*3/4*this.fades.kimono.decoration.size.large.y,15)
                                diamond(this.layer,this.kimono.decoration.large[g].width*8/3*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*3/4*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*3/4*this.fades.kimono.decoration.size.large.y,-15)
                                this.layer.rotate(-this.kimono.decoration.large[g].rotate)
                                this.layer.translate(-(2.375+this.kimono.decoration.large[g].y*0.16)*lsin(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.large.x,-this.parts.kimono.main+13*this.fades.kimono.decoration.position.large.y-this.kimono.decoration.large[g].y*this.fades.kimono.decoration.position.large.y)
                            }else{
                                this.layer.translate((0+this.kimono.decoration.large[g].y*0.26)*lsin(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.large.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.large.y+(25.5+this.kimono.decoration.large[g].y*0.4)*this.fades.kimono.decoration.position.large.y)
                                this.layer.rotate(this.kimono.decoration.large[g].rotate)
                                diamond(this.layer,0,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*this.fades.kimono.decoration.size.large.y,0)
                                diamond(this.layer,-this.kimono.decoration.large[g].width*8/3*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*3/4*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*3/4*this.fades.kimono.decoration.size.large.y,15)
                                diamond(this.layer,this.kimono.decoration.large[g].width*8/3*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.size.large.x,0,this.kimono.decoration.large[g].width*lcos(this.kimono.decoration.large[g].spin+this.anim.direction)*3/4*this.fades.kimono.decoration.size.large.x,this.kimono.decoration.large[g].height*3/4*this.fades.kimono.decoration.size.large.y,-15)
                                this.layer.rotate(-this.kimono.decoration.large[g].rotate)
                                this.layer.translate(-(0+this.kimono.decoration.large[g].y*0.26)*lsin(this.kimono.decoration.large[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.large.x,-this.parts.kimono.main+13*this.fades.kimono.decoration.position.large.y-(25.5+this.kimono.decoration.large[g].y*0.4)*this.fades.kimono.decoration.position.large.y)
                            }
                        }
                    }
                }
                if(this.trigger.display.kimono.shadow){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[1].sprites.kimono.shadowDamage[this.sprites.spin%24],-15*this.fade*this.fades.kimono.shadow.x,this.parts.kimono.shadow,30*this.fade*this.fades.kimono.shadow.x,10*this.fade*this.fades.kimono.shadow.y)
                    }else{
                        this.layer.image(graphics.combatant[1].sprites.kimono.shadow[this.sprites.spin%24],-15*this.fade*this.fades.kimono.shadow.x,this.parts.kimono.shadow,30*this.fade*this.fades.kimono.shadow.x,10*this.fade*this.fades.kimono.shadow.y)
                    }
                }
                if(this.trigger.display.kimono.outside.front){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[1].sprites.kimono.outsideDamage.front[this.sprites.spin%24],-15*this.fade*this.fades.kimono.outside.front.x,this.parts.kimono.outside,30*this.fade*this.fades.kimono.outside.front.x,40*this.fade*this.fades.kimono.outside.front.y)
                    }else{
                        this.layer.image(graphics.combatant[1].sprites.kimono.outside.front[this.sprites.spin%24],-15*this.fade*this.fades.kimono.outside.front.x,this.parts.kimono.outside,30*this.fade*this.fades.kimono.outside.front.x,40*this.fade*this.fades.kimono.outside.front.y)
                    }
                }
                if(this.trigger.display.kimono.string&&!this.trigger.display.extra.damage){
                    this.layer.noStroke()
                    this.layer.fill(this.color.kimono.string[0],this.color.kimono.string[1],this.color.kimono.string[2],this.fade*this.fades.kimono.string)
                    for(let g=0,lg=this.kimono.string.length;g<lg;g++){
                        if(lcos(this.kimono.string[g]+this.anim.direction)>0){
                            this.layer.rect(lsin(this.kimono.string[g]+this.anim.direction)*5.4*this.fades.kimono.outside.front.x,this.parts.kimono.outside+this.parts.kimono.string*this.fades.kimono.outside.front.y,lcos(this.kimono.string[g]+this.anim.direction)*this.fades.kimono.outside.front.x,0.25)
                        }
                    }
                }
                if(this.trigger.display.wrap.round){
                    this.layer.strokeJoin(ROUND)
                    this.layer.strokeWeight(0.4)
                    this.layer.fill(this.color.wrap.in[0],this.color.wrap.in[1],this.color.wrap.in[2],this.fade*this.fades.wrap.round)
                    this.layer.stroke(this.color.wrap.out[0],this.color.wrap.out[1],this.color.wrap.out[2],this.fade*this.fades.wrap.round)
                    this.layer.quad(-7*this.fades.kimono.outside.front.x,this.parts.kimono.outside+16*this.fades.kimono.outside.front.y,7*this.fades.kimono.outside.front.x,this.parts.kimono.outside+16*this.fades.kimono.outside.front.y,7.3*this.fades.kimono.outside.front.x,this.parts.kimono.outside+18*this.fades.kimono.outside.front.y,-7.3*this.fades.kimono.outside.front.x,this.parts.kimono.outside+18*this.fades.kimono.outside.front.y)
                    this.layer.quad(-7.3*this.fades.kimono.outside.front.x,this.parts.kimono.outside+18*this.fades.kimono.outside.front.y,7.3*this.fades.kimono.outside.front.x,this.parts.kimono.outside+18*this.fades.kimono.outside.front.y,7.6*this.fades.kimono.outside.front.x,this.parts.kimono.outside+20*this.fades.kimono.outside.front.y,-7.6*this.fades.kimono.outside.front.x,this.parts.kimono.outside+20*this.fades.kimono.outside.front.y)
                    this.layer.strokeWeight(0.6)
                    this.layer.stroke(this.color.wrap.center[0],this.color.wrap.center[1],this.color.wrap.center[2],this.fade*this.fades.wrap.round)
                    this.layer.line(7.3*this.fades.kimono.outside.front.x,this.parts.kimono.outside+18*this.fades.kimono.outside.front.y,-7.3*this.fades.kimono.outside.front.x,this.parts.kimono.outside+18*this.fades.kimono.outside.front.y)
                    this.layer.strokeJoin(MITER)
                }
                if(this.trigger.display.wrap.bar&&lcos(this.spin.wrap.bar+this.anim.direction)>0){
                    this.layer.strokeJoin(ROUND)
                    this.layer.strokeWeight(0.4)
                    this.layer.fill(this.color.wrap.in[0],this.color.wrap.in[1],this.color.wrap.in[2],this.fade*this.fades.wrap.bar)
                    this.layer.stroke(this.color.wrap.out[0],this.color.wrap.out[1],this.color.wrap.out[2],this.fade*this.fades.wrap.bar)
                    if(this.trigger.display.extra.damage){
                        this.layer.triangle(
                            lsin(this.spin.wrap.bar-this.parts.wrap.bar+this.anim.direction)*7.8*this.fades.kimono.outside.front.x,this.parts.kimono.outside+20*this.fades.kimono.outside.front.y,
                            lsin(this.spin.wrap.bar+this.parts.wrap.bar+this.anim.direction)*7.8*this.fades.kimono.outside.front.x,this.parts.kimono.outside+20*this.fades.kimono.outside.front.y,
                            lsin(this.spin.wrap.bar+this.anim.direction)*9.2*this.fades.kimono.outside.front.x,this.parts.kimono.outside+29*this.fades.kimono.outside.front.y,
                        )
                    }else{
                        this.layer.quad(
                            lsin(this.spin.wrap.bar-this.parts.wrap.bar+this.anim.direction)*7.8*this.fades.kimono.outside.front.x,this.parts.kimono.outside+20*this.fades.kimono.outside.front.y,
                            lsin(this.spin.wrap.bar+this.parts.wrap.bar+this.anim.direction)*7.8*this.fades.kimono.outside.front.x,this.parts.kimono.outside+20*this.fades.kimono.outside.front.y,
                            lsin(this.spin.wrap.bar+this.parts.wrap.bar+this.anim.direction)*9.2*this.fades.kimono.outside.front.x,this.parts.kimono.outside+29*this.fades.kimono.outside.front.y,
                            lsin(this.spin.wrap.bar-this.parts.wrap.bar+this.anim.direction)*9.2*this.fades.kimono.outside.front.x,this.parts.kimono.outside+29*this.fades.kimono.outside.front.y
                        )
                    }
                    this.layer.strokeJoin(MITER)
                }
                if(this.trigger.display.kimono.fringe.front){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[1].sprites.kimono.fringeDamage.front[this.sprites.spin%12],-15*this.fade*this.fades.kimono.fringe.front.x,this.parts.kimono.fringe-10*this.fade*this.fades.kimono.fringe.front.y,30*this.fade*this.fades.kimono.fringe.front.x,20*this.fade*this.fades.kimono.fringe.front.y)
                    }else{
                        this.layer.image(graphics.combatant[1].sprites.kimono.fringe.front[this.sprites.spin%12],-15*this.fade*this.fades.kimono.fringe.front.x,this.parts.kimono.fringe-10*this.fade*this.fades.kimono.fringe.front.y,30*this.fade*this.fades.kimono.fringe.front.x,20*this.fade*this.fades.kimono.fringe.front.y)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)>0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.extra.sword2&&lcos(this.spin.arms[g].top+this.anim.direction)>0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6&&g==1){
                        this.minorDisplay(1,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.wrap.bow&&lcos(this.spin.wrap.bow+this.anim.direction)>0&&lcos(this.spin.wrap.bow+this.anim.direction)<0.5){
                    this.layer.strokeJoin(ROUND)
                    this.layer.strokeWeight(0.4)
                    this.layer.fill(this.color.wrap.in[0],this.color.wrap.in[1],this.color.wrap.in[2],this.fade*this.fades.wrap.bow)
                    this.layer.stroke(this.color.wrap.out[0],this.color.wrap.out[1],this.color.wrap.out[2],this.fade*this.fades.wrap.bow)
                    this.calc.int=[this.parts.kimono.main+(this.parts.wrap.bow-this.parts.kimono.main)*this.fades.kimono.main.front.y]
                    if(this.trigger.display.extra.damage){
                        this.layer.beginShape()
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0])
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*9.1*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+3.6)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.8*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.2*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.9*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-3.6)
                        this.layer.endShape(CLOSE)
                        this.layer.beginShape()
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0])
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*9.1*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+3.6)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.8*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.2*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.9*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-3.6)
                        this.layer.endShape(CLOSE)
                    }else{
                        this.layer.triangle(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*9.3*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+4.8,lsin(this.spin.wrap.bow+this.anim.direction)*7.7*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-4.8)
                        this.layer.triangle(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*9.3*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+4.8,lsin(this.spin.wrap.bow+this.anim.direction)*7.7*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-4.8)
                    }
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.8*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+1.2)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.8*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+1.2)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.6*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-1.2)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.6*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-1.2)
                    this.layer.strokeJoin(MITER)
                }
                if(this.trigger.display.kimono.bow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.kimono.bow[0],this.color.kimono.bow[1],this.color.kimono.bow[2],this.fade*this.fades.kimono.bow)
                    this.layer.strokeWeight(0.25)
                    if(this.trigger.display.extra.damage){
                        if(lcos(this.spin.bow.center/2+this.spin.bow.loop[0]/2+this.anim.direction)>0){
                            this.layer.arc(
                                lsin(this.spin.bow.center+this.anim.direction)*2.875*this.anim.kimono.bow.position.x*this.fades.kimono.outside.front.x+lsin(this.spin.bow.loop[0]*this.anim.kimono.bow.size.x/this.anim.kimono.bow.position.x+this.anim.direction)*2.875*this.fades.kimono.outside.front.x*this.anim.kimono.bow.position.x,
                                this.parts.kimono.outside+(this.parts.kimono.bow-this.parts.kimono.outside)*this.fades.kimono.outside.front.y,
                                (lsin(this.spin.bow.center+this.anim.direction)*5.5*this.anim.kimono.bow.position.x*this.fades.kimono.outside.front.x-lsin(this.spin.bow.loop[0]*this.anim.kimono.bow.size.x/this.anim.kimono.bow.position.x+this.anim.direction)*5.5*this.fades.kimono.outside.front.x*this.anim.kimono.bow.position.x),
                                1*this.anim.kimono.bow.size.y*this.fades.kimono.outside.front.y,0,180
                            )
                        }
                        if(lcos(this.spin.bow.center/2+this.spin.bow.loop[1]/2+this.anim.direction)>0){
                            this.layer.arc(
                                lsin(this.spin.bow.center+this.anim.direction)*2.875*this.anim.kimono.bow.position.x*this.fades.kimono.outside.front.x+lsin(this.spin.bow.loop[1]*this.anim.kimono.bow.size.x/this.anim.kimono.bow.position.x+this.anim.direction)*2.875*this.fades.kimono.outside.front.x*this.anim.kimono.bow.position.x,
                                this.parts.kimono.outside+(this.parts.kimono.bow-this.parts.kimono.outside)*this.fades.kimono.outside.front.y,
                                (lsin(this.spin.bow.center+this.anim.direction)*5.5*this.anim.kimono.bow.position.x*this.fades.kimono.outside.front.x-lsin(this.spin.bow.loop[1]*this.anim.kimono.bow.size.x/this.anim.kimono.bow.position.x+this.anim.direction)*5.5*this.fades.kimono.outside.front.x*this.anim.kimono.bow.position.x),
                                1*this.anim.kimono.bow.size.y*this.fades.kimono.outside.front.y,0,180
                            )
                        }
                    }else{
                        if(lcos(this.spin.bow.center/2+this.spin.bow.loop[0]/2+this.anim.direction)>0){
                            this.layer.ellipse(
                                lsin(this.spin.bow.center+this.anim.direction)*2.875*this.anim.kimono.bow.position.x*this.fades.kimono.outside.front.x+lsin(this.spin.bow.loop[0]*this.anim.kimono.bow.size.x/this.anim.kimono.bow.position.x+this.anim.direction)*2.875*this.fades.kimono.outside.front.x*this.anim.kimono.bow.position.x,
                                this.parts.kimono.outside+(this.parts.kimono.bow-this.parts.kimono.outside)*this.fades.kimono.outside.front.y,
                                (lsin(this.spin.bow.center+this.anim.direction)*5.5*this.anim.kimono.bow.position.x*this.fades.kimono.outside.front.x-lsin(this.spin.bow.loop[0]*this.anim.kimono.bow.size.x/this.anim.kimono.bow.position.x+this.anim.direction)*5.5*this.fades.kimono.outside.front.x*this.anim.kimono.bow.position.x),
                                1*this.anim.kimono.bow.size.y*this.fades.kimono.outside.front.y
                            )
                        }
                        if(lcos(this.spin.bow.center/2+this.spin.bow.loop[1]/2+this.anim.direction)>0){
                            this.layer.ellipse(
                                lsin(this.spin.bow.center+this.anim.direction)*2.875*this.anim.kimono.bow.position.x*this.fades.kimono.outside.front.x+lsin(this.spin.bow.loop[1]*this.anim.kimono.bow.size.x/this.anim.kimono.bow.position.x+this.anim.direction)*2.875*this.fades.kimono.outside.front.x*this.anim.kimono.bow.position.x,
                                this.parts.kimono.outside+(this.parts.kimono.bow-this.parts.kimono.outside)*this.fades.kimono.outside.front.y,
                                (lsin(this.spin.bow.center+this.anim.direction)*5.5*this.anim.kimono.bow.position.x*this.fades.kimono.outside.front.x-lsin(this.spin.bow.loop[1]*this.anim.kimono.bow.size.x/this.anim.kimono.bow.position.x+this.anim.direction)*5.5*this.fades.kimono.outside.front.x*this.anim.kimono.bow.position.x),
                                1*this.anim.kimono.bow.size.y*this.fades.kimono.outside.front.y
                            )
                        }
                    }
                    if(lcos(this.spin.bow.center/2+this.spin.bow.end[0]/2+this.anim.direction)>0){
                        this.layer.line(
                            lsin(this.spin.bow.center+this.anim.direction)*5.75*this.anim.kimono.bow.position.x*this.fades.kimono.outside.front.x,
                            this.parts.kimono.outside+(this.parts.kimono.bow-this.parts.kimono.outside)*this.fades.kimono.outside.front.y,
                            lsin(this.spin.bow.end[0]*this.anim.kimono.bow.size.x/this.anim.kimono.bow.position.x+this.anim.direction)*(5.75*this.anim.kimono.bow.position.x+0.25*this.anim.kimono.bow.size.x)*this.fades.kimono.outside.front.x,
                            this.parts.kimono.outside+(this.parts.kimono.bow-this.parts.kimono.outside)*this.fades.kimono.outside.front.y+1.5*this.anim.kimono.bow.size.y*this.fades.kimono.outside.front.y
                        )
                    }
                    if(lcos(this.spin.bow.center/2+this.spin.bow.end[1]/2+this.anim.direction)>0){
                        this.layer.line(
                            lsin(this.spin.bow.center+this.anim.direction)*5.75*this.anim.kimono.bow.position.x*this.fades.kimono.outside.front.x,
                            this.parts.kimono.outside+(this.parts.kimono.bow-this.parts.kimono.outside)*this.fades.kimono.outside.front.y,
                            lsin(this.spin.bow.end[1]*this.anim.kimono.bow.size.x/this.anim.kimono.bow.position.x+this.anim.direction)*(5.75*this.anim.kimono.bow.position.x+0.25*this.anim.kimono.bow.size.x)*this.fades.kimono.outside.front.x,
                            this.parts.kimono.outside+(this.parts.kimono.bow-this.parts.kimono.outside)*this.fades.kimono.outside.front.y+1.5*this.anim.kimono.bow.size.y*this.fades.kimono.outside.front.y
                        )
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-75,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3)&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.extra.sword2&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3)&&g==1){
                        this.minorDisplay(1,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.sleeve&&(lcos(this.spin.arms[g].top+this.anim.direction)>-0.3||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.6)){
                        this.layer.noStroke()
                        for(let h=0,lh=10;h<lh;h++){
                            this.layer.fill(mergeColor(this.color.sleeve.back,this.color.sleeve.front,h/lh),this.fade*this.fades.sleeve)
                            if(lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                                if(this.trigger.display.extra.damage){
                                    this.layer.beginShape()
                                    this.layer.vertex(this.graphics.arms[g].top.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.18*(g*2-1)*sign(lcos(this.anim.direction))*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*3+0.3)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.125+(0.175+g*0.05)*h/lh),
                                        this.graphics.arms[g].top.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.18*(g*2-1)*sign(lcos(this.anim.direction))*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*3+0.3)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.125+(0.175+g*0.05)*h/lh))
                                    this.layer.vertex(this.graphics.arms[g].top.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(-0.05+g*0.075)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.3+g*0.05),
                                        this.graphics.arms[g].top.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(-0.05+g*0.075)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.3+g*0.05))
                                    this.layer.vertex(this.graphics.arms[g].top.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.12-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.125+(0.175+g*0.05)*h/lh),
                                        this.graphics.arms[g].top.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.12-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.125+(0.175+g*0.05)*h/lh))
                                    this.layer.vertex(this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.15-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                        this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.15-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                    this.layer.vertex(this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(g*2-1)*sign(lcos(this.anim.direction))*(0.15+0.12*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*2+0.8)),
                                        this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(g*2-1)*sign(lcos(this.anim.direction))*(0.15+0.12*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*2+0.8)))
                                    this.layer.endShape()
                                }else{
                                    this.layer.quad(
                                        this.graphics.arms[g].top.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.18*(g*2-1)*sign(lcos(this.anim.direction))*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*3+0.3)-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/8,
                                        this.graphics.arms[g].top.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.18*(g*2-1)*sign(lcos(this.anim.direction))*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*3+0.3)-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/8,
                                        this.graphics.arms[g].top.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.12-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/8,
                                        this.graphics.arms[g].top.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.12-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/8,
                                        this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.15-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                        this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.15-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                        this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(g*2-1)*sign(lcos(this.anim.direction))*(0.15+0.12*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*2+0.8)),
                                        this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(g*2-1)*sign(lcos(this.anim.direction))*(0.15+0.12*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*2+0.8))
                                    )
                                }
                            }
                            this.layer.push()
                            this.layer.translate(((this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.15-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))+
                            (this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(g*2-1)*sign(lcos(this.anim.direction))*(0.15+0.12*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*2+0.8))))/2,
                            ((this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.15-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))+
                            (this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(g*2-1)*sign(lcos(this.anim.direction))*(0.15+0.12*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*2+0.8))))/2)
                            this.layer.rotate(atan2(this.graphics.arms[g].middle.x-this.graphics.arms[g].top.x,this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y))
                            let i=dist(0,0,
                                ((this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(0.15-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))-
                                (this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*(g*2-1)*sign(lcos(this.anim.direction))*(0.15+0.12*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*2+0.8)))),
                                ((this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(0.15-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))-
                                (this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*(g*2-1)*sign(lcos(this.anim.direction))*(0.15+0.12*min(1-h/lh,lcos(this.spin.arms[g].top+this.anim.direction)*2+0.8)))))
                            this.layer.arc(0,0,i,i*(0.6-0.1*h/lh),-180,0)
                            this.layer.pop()
                            if(this.trigger.display.extra.damage){
                                this.layer.beginShape()
                                this.layer.vertex(this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.45+(0.2+g*0.05)*h/lh),
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.45+(0.2+g*0.05)*h/lh))
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(-0.1+g*0.175)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.65+g*0.05),
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(-0.1+g*0.175)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.65+g*0.05))
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.45+(0.2+g*0.05)*h/lh),
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.45+(0.2+g*0.05)*h/lh))
                                this.layer.endShape()
                            }else{
                                this.layer.quad(
                                    this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.165-0.12*h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/4,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/4,
                                    this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/4,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*(0.27-0.18*h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/4
                                )
                            }
                        }
                    }
                    if(this.trigger.display.wrap.sleeve){
                        this.layer.strokeJoin(ROUND)
                        this.layer.strokeWeight(0.4)
                        this.layer.fill(this.color.wrap.in[0],this.color.wrap.in[1],this.color.wrap.in[2],this.fade*this.fades.wrap.bow)
                        this.layer.stroke(this.color.wrap.out[0],this.color.wrap.out[1],this.color.wrap.out[2],this.fade*this.fades.wrap.bow)
                        this.calc.int=[
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.135-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/8,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.135-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/8,
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.15-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/4,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.15-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/4
                        ]
                        if(this.anim.direction*(g*2-1)+this.spin.arms[g].lock>-150&&this.anim.direction*(g*2-1)+this.spin.arms[g].lock<150&&(lcos(this.spin.wrap.center+this.anim.direction)>=0||lcos(90*(g*2-1)+this.anim.direction)>=0)){
                            if(this.anim.direction*(g*2-1)+this.spin.arms[g].lock<-70){
                                this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],-6.6*this.fades.kimono.outside.front.x*(g*2-1),this.parts.kimono.outside+16*this.fades.kimono.outside.front.y)
                            }else if(this.anim.direction*(g*2-1)+this.spin.arms[g].lock>30){
                                this.layer.triangle(5.7*this.fades.kimono.outside.front.x*(g*2-1),-54,6.2*this.fades.kimono.outside.front.x*(g*2-1),-52,lsin(this.spin.wrap.center+this.anim.direction)*6.6*this.fades.kimono.outside.front.x,this.parts.kimono.outside+16*this.fades.kimono.outside.front.y)
                            }else{
                                this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*6.6*this.fades.kimono.outside.front.x,this.parts.kimono.outside+16*this.fades.kimono.outside.front.y)
                            }
                        }
                        if((this.anim.direction*(g*2-1)+this.spin.arms[g].lock<-50||this.anim.direction*(g*2-1)+this.spin.arms[g].lock>50)&&(lcos(this.spin.wrap.center+this.anim.direction)<0||lcos(90*(g*2-1)+this.anim.direction)>=0)){
                            if(this.anim.direction*(g*2-1)+this.spin.arms[g].lock>-110&&this.anim.direction*(g*2-1)<0){
                                this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],6.6*this.fades.kimono.outside.front.x*(g*2-1),this.parts.kimono.outside+16*this.fades.kimono.outside.front.y)
                            }else if(this.anim.direction*(g*2-1)+this.spin.arms[g].lock<150&&this.anim.direction*(g*2-1)>90){
                                this.layer.triangle(-5.7*this.fades.kimono.outside.front.x*(g*2-1),-54,-6.2*this.fades.kimono.outside.front.x*(g*2-1),-52,lsin(this.spin.wrap.center+this.anim.direction)*-6.6*this.fades.kimono.outside.front.x,this.parts.kimono.outside+16*this.fades.kimono.outside.front.y)
                            }else{
                                this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*-6.6*this.fades.kimono.outside.front.x,this.parts.kimono.outside+16*this.fades.kimono.outside.front.y)
                            }
                        }
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.sleeveDecoration){
                    this.layer.noStroke()
                    for(let g=0,lg=this.spin.sleeve.decoration.length;g<lg;g++){
                        if(lcos(this.spin.sleeve.decoration[g].spin+this.anim.direction)>=0.2&&(lcos(this.spin.arms[this.spin.sleeve.decoration[g].part].top+this.anim.direction)>-0.3||lcos(this.spin.arms[this.spin.sleeve.decoration[g].part].bottom+this.anim.direction)>=0.6)&&!(this.spin.sleeve.decoration[g].length>1.5&&this.trigger.display.extra.damage)){
                            h=this.spin.sleeve.decoration[g].part
                            this.layer.push()
                            if(this.spin.sleeve.decoration[g].length>1){
                                this.layer.translate(
                                    lerp(
                                        this.graphics.arms[h].middle.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.165*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.graphics.arms[h].bottom.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.27*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)/4,
                                        this.spin.sleeve.decoration[g].length-1
                                    )
                                    ,lerp(
                                        this.graphics.arms[h].middle.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.165*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.graphics.arms[h].bottom.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.27*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)/4,
                                        this.spin.sleeve.decoration[g].length-1
                                    ))
                                this.layer.rotate(-atan2(
                                    ((this.graphics.arms[h].middle.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.165*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))-
                                    (this.graphics.arms[h].bottom.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.27*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)/4)),
                                    ((this.graphics.arms[h].middle.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.165*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))-
                                    (this.graphics.arms[h].bottom.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.27*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)/4))
                                ))
                            }else{
                                this.layer.translate(
                                    lerp(
                                        this.graphics.arms[h].top.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.12*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)/8,
                                        this.graphics.arms[h].middle.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.15*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.spin.sleeve.decoration[g].length
                                    )
                                    ,lerp(
                                        this.graphics.arms[h].top.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.12*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)/8,
                                        this.graphics.arms[h].middle.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.15*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.spin.sleeve.decoration[g].length
                                    ))
                                this.layer.rotate(-atan2(
                                    ((this.graphics.arms[h].top.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.12*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)/8)-
                                    (this.graphics.arms[h].middle.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.15*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))),
                                    ((this.graphics.arms[h].top.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.12*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)/8)-
                                    (this.graphics.arms[h].middle.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.15*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)))
                                ))
                            }
                            this.layer.scale(lcos(this.spin.sleeve.decoration[g].spin+this.anim.direction)*1.1-0.1,1)
                            this.layer.rotate(this.spin.sleeve.decoration[g].rotate)
                            this.layer.fill(this.color.sleeve.decoration[this.spin.sleeve.decoration[g].type],this.fade)
                            this.layer.beginShape()
                            this.layer.vertex(0,2)
                            this.layer.vertex(-0.375,0.25)
                            this.layer.vertex(-2,0)
                            this.layer.vertex(-0.5,-0.25)
                            this.layer.vertex(-1,-1.5)
                            this.layer.vertex(0,-0.5)
                            this.layer.vertex(1,-1.5)
                            this.layer.vertex(0.5,-0.25)
                            this.layer.vertex(2,0)
                            this.layer.vertex(0.375,0.25)
                            this.layer.endShape()
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.wrap.bow&&lcos(this.spin.wrap.bow+this.anim.direction)>=0.5){
                    this.layer.strokeJoin(ROUND)
                    this.layer.strokeWeight(0.4)
                    this.layer.fill(this.color.wrap.in[0],this.color.wrap.in[1],this.color.wrap.in[2],this.fade*this.fades.wrap.bow)
                    this.layer.stroke(this.color.wrap.out[0],this.color.wrap.out[1],this.color.wrap.out[2],this.fade*this.fades.wrap.bow)
                    this.calc.int=[this.parts.kimono.main+(this.parts.wrap.bow-this.parts.kimono.main)*this.fades.kimono.main.front.y]
                    if(this.trigger.display.extra.damage){
                        this.layer.beginShape()
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0])
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*9.1*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+3.6)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.8*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.2*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.9*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-3.6)
                        this.layer.endShape(CLOSE)
                        this.layer.beginShape()
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0])
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*9.1*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+3.6)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.8*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*8.2*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-1.8)
                        this.layer.vertex(lsin(this.spin.wrap.bow+this.anim.direction)*7.9*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-3.6)
                        this.layer.endShape(CLOSE)
                    }else{
                        this.layer.triangle(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*9.3*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+4.8,lsin(this.spin.wrap.bow+this.anim.direction)*7.7*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-4.8)
                        this.layer.triangle(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*9.3*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]+4.8,lsin(this.spin.wrap.bow+this.anim.direction)*7.7*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*8,this.calc.int[0]-4.8)
                    }
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.8*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+1.2)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.8*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]+1.2)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.6*this.fades.kimono.outside.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-1.2)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*7.3*this.fades.kimono.outside.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*7.6*this.fades.kimono.outside.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*6,this.calc.int[0]-1.2)
                    this.layer.strokeJoin(MITER)
                }
                if(this.trigger.display.kimono.flower&&this.fades.kimono.flower>0){
                    if(constrain((pow(lcos(this.spin.flower[1]+this.anim.direction),1.5)*2-0.2),0,1)>0){
                        this.layer.image(graphics.minor[10],lsin(this.spin.flower[1]+this.anim.direction)*8*this.fades.kimono.outside.front.x-15*this.fade*this.fades.kimono.flower*this.fades.kimono.outside.front.x*constrain((pow(lcos(this.spin.flower[1]+this.anim.direction),1.5)*2-0.2),0,1),this.parts.kimono.outside+(this.parts.kimono.flowerLevel-this.parts.kimono.outside)*this.fades.kimono.outside.front.y-15*this.fade*this.fades.kimono.flower*this.fades.kimono.outside.front.x,30*this.fade*this.fades.kimono.flower*this.fades.kimono.outside.front.x*constrain((pow(lcos(this.spin.flower[1]+this.anim.direction),1.5)*2-0.2),0,1),30*this.fade*this.fades.kimono.flower*this.fades.kimono.outside.front.y)
                    }
                }
                if(this.trigger.display.hair.tail&&lcos(this.spin.tail+this.anim.direction)>0){
                    this.layer.image(graphics.combatant[1].sprites.hair.tail[this.sprites.spinDetailHead],lsin(this.spin.tail+this.anim.direction)*14.5-10*this.fade,-50-25*this.fade,20*this.fade,50*this.fade)
                }
                if(this.trigger.display.hair.front){
                    this.layer.image(graphics.combatant[1].sprites.hair.front[this.sprites.spinDetailHead],-20*this.fade,-75-20*this.fade,40*this.fade,60*this.fade)
                }
                if(this.trigger.display.hair.glow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.hair.glow[0],this.color.hair.glow[1],this.color.hair.glow[2],this.fade/4)
                    for(let g=0;g<6;g++){
                        this.layer.strokeWeight((3-g/2)*this.fade)
                        this.layer.arc(0,-75,30+g,30+g,-72+g*6,-12-g*6)
                    }
                }
                if(this.trigger.display.flower&&this.fades.flower>0){
                    if(constrain((pow(lcos(this.spin.flower[0]+this.anim.direction),1.5)*2-0.2),0,1)>0){
                        this.layer.image(graphics.minor[9],lsin(this.spin.flower[0]+this.anim.direction)*18-10*this.fade*this.fades.flower*constrain((pow(lcos(this.spin.flower[0]+this.anim.direction),1.5)*2-0.2),0,1),this.parts.flowerLevel-15*this.fade*this.fades.flower,20*this.fade*this.fades.flower*constrain((pow(lcos(this.spin.flower[0]+this.anim.direction),1.5)*2-0.2),0,1),30*this.fade*this.fades.flower)
                    }
                }
                if(this.trigger.display.flower2&&this.fades.flower2>0){
                    if(constrain((pow(lcos(this.spin.flower[0]+this.anim.direction),1.5)*2-0.2),0,1)>0){
                        this.layer.image(graphics.minor[11],lsin(this.spin.flower[0]+this.anim.direction)*18-10*this.fade*this.fades.flower2*constrain((pow(lcos(this.spin.flower[0]+this.anim.direction),1.5)*2-0.2),0,1),this.parts.flowerLevel-15*this.fade*this.fades.flower2,20*this.fade*this.fades.flower2*constrain((pow(lcos(this.spin.flower[0]+this.anim.direction),1.5)*2-0.2),0,1),30*this.fade*this.fades.flower2)
                    }
                }
            break
            case 'Certes':
                if(this.trigger.display.hair.back){
                    this.layer.image(graphics.combatant[2].sprites.hair.back[this.sprites.spinDetailHead],-20*this.fade,-75-20*this.fade,40*this.fade,60*this.fade)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.under.dress.back){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[2].sprites.under.dressDamage.back[this.sprites.spinDetail],-15*this.fade*this.fades.under.dress.back.x,this.parts.under.dress-15*this.fades.under.dress.back.y,30*this.fade*this.fades.under.dress.back.x,50*this.fade*this.fades.under.dress.back.y)
                    }else{
                        this.layer.image(graphics.combatant[2].sprites.under.dress.back[this.sprites.spinDetail],-15*this.fade*this.fades.under.dress.back.x,this.parts.under.dress-15*this.fades.under.dress.back.y,30*this.fade*this.fades.under.dress.back.x,50*this.fade*this.fades.under.dress.back.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-46,11,30)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                let color=this.flashColor(upColor(this.color.skin.legs,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                if(this.trigger.display.under.dress.front){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[2].sprites.under.dressDamage.front[this.sprites.spinDetail],-15*this.fade*this.fades.under.dress.front.x,this.parts.under.dress-15*this.fades.under.dress.front.y,30*this.fade*this.fades.under.dress.front.x,50*this.fade*this.fades.under.dress.front.y)
                    }else{
                        this.layer.image(graphics.combatant[2].sprites.under.dress.front[this.sprites.spinDetail],-15*this.fade*this.fades.under.dress.front.x,this.parts.under.dress-15*this.fades.under.dress.front.y,30*this.fade*this.fades.under.dress.front.x,50*this.fade*this.fades.under.dress.front.y)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-75,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.hair.front){
                    this.layer.image(graphics.combatant[2].sprites.hair.front[this.sprites.spinDetailHead],-20*this.fade,-75-20*this.fade,40*this.fade,60*this.fade)
                }
                if(this.trigger.display.hair.glow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.hair.glow[0],this.color.hair.glow[1],this.color.hair.glow[2],this.fade/4)
                    for(let g=0;g<6;g++){
                        this.layer.strokeWeight((3-g/2)*this.fade)
                        this.layer.arc(0,-75,30+g,30+g,-72+g*6,-12-g*6)
                    }
                }
            break
            case 'Azis':
                if(this.trigger.display.cape&&lcos(this.anim.direction+180)<-0.1){
                    this.layer.noStroke()
                    this.layer.fill(this.color.cape[0],this.color.cape[1],this.color.cape[2],this.fade*this.fades.cape)
                    this.layer.arc(5*lsin(this.anim.direction+180),-54,12*lcos(this.anim.direction+180),12,-180,0)
                    for(let a=0,la=3;a<la;a++){
                        this.layer.triangle(5*lsin(this.anim.direction+180)-6*lcos(this.anim.direction+180),-54,5*lsin(this.anim.direction+180)+6*lcos(this.anim.direction+180),-54,8*lsin(this.anim.direction+180)+(-10+a*10)*lcos(this.anim.direction+180),-3)
                    }
                }
                if(this.trigger.display.hood){
                    this.layer.fill(...this.flashColor(this.color.hoodBack),this.fade*this.fades.hood)
                    this.layer.stroke(...this.flashColor(this.color.hoodBack),this.fade*this.fades.hood)
                    this.layer.strokeWeight(0.5)
                    for(let a=0,la=10;a<la;a++){
                        if(lcos(this.anim.direction+112.5+a*15)<0){
                            this.layer.rect(lsin(this.anim.direction+122.5+a*15)*16,-70,5*lcos(this.anim.direction+122.5+a*15),16)
                        }
                    }
                    displayTrianglesBack(this.layer,this.hood,this.anim.direction,-78,32,0.5,0.1,this.flashColor(this.color.hoodBack),this.fade)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-46,16,38)
                }
                if(this.trigger.display.button&&lcos(this.anim.direction+48)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.button),this.fade*this.fades.button)
                    this.layer.ellipse(lsin(this.anim.direction+48)*8,-46,3*lcos(this.anim.direction+48),3)
                    this.layer.ellipse(lsin(this.anim.direction+48)*7.5,-52,3*lcos(this.anim.direction+48),3)
                    this.layer.ellipse(lsin(this.anim.direction+48)*7.5,-40,3*lcos(this.anim.direction+48),3)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-78,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.hood){
                    this.layer.fill(...this.flashColor(this.color.hood),this.fade*this.fades.hood)
                    this.layer.stroke(...this.flashColor(this.color.hood),this.fade*this.fades.hood)
                    this.layer.strokeWeight(0.5)
                    this.layer.arc(0,-78,32,32,-180,0)
                    for(let a=0,la=10;a<la;a++){
                        if(lcos(this.anim.direction+112.5+a*15)>0){
                            this.layer.rect(lsin(this.anim.direction+122.5+a*15)*16,-70,5*lcos(this.anim.direction+122.5+a*15),16)
                        }
                    }
                    displayTrianglesFront(this.layer,this.hood,this.anim.direction,-78,32,0.5,0.1,this.flashColor(this.color.hood),this.fade)
                }
                if(this.trigger.display.cape&&lcos(this.anim.direction+180)>0.1){
                    this.layer.noStroke()
                    this.layer.fill(this.color.cape[0],this.color.cape[1],this.color.cape[2],this.fade*this.fades.cape)
                    this.layer.arc(5*lsin(this.anim.direction+180),-54,12*lcos(this.anim.direction+180),12,-180,0)
                    for(let a=0,la=3;a<la;a++){
                        this.layer.triangle(5*lsin(this.anim.direction+180)-6*lcos(this.anim.direction+180),-54,5*lsin(this.anim.direction+180)+6*lcos(this.anim.direction+180),-54,8*lsin(this.anim.direction+180)+(-10+a*10)*lcos(this.anim.direction+180),-3)
                    }
                }
            break
            case 'Donakho':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x*this.anim.fat,this.graphics.arms[g].middle.y,14,14)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.legs&&lcos(this.anim.direction+this.spin.legs[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.legs,lcos(this.spin.legs[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.legs)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,14,14)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-23.5,17.6*this.anim.fat,28.5)
                }
                if(this.trigger.display.coat){
                    this.layer.fill(...this.flashColor(this.color.coat),this.fade*this.fades.coat)
                    this.layer.noStroke()
                    if(lcos(this.anim.direction)<0.5){
                        this.layer.ellipse(0,-23.5,18*this.anim.fat,29)
                    }else{
                        this.layer.arc(-3*this.anim.fat+lsin(this.anim.direction)*5.5*this.anim.fat,-23.5,20*this.anim.fat+min(0,lsin(this.anim.direction)*22*this.anim.fat),24+min(8,lsin(this.anim.direction)*6),90,270)
                        this.layer.arc(3*this.anim.fat+lsin(this.anim.direction)*5.5*this.anim.fat,-23.5,20*this.anim.fat+min(0,-lsin(this.anim.direction)*22*this.anim.fat),24+min(8,-lsin(this.anim.direction)*6),-90,90)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.legs&&lcos(this.anim.direction+this.spin.legs[g].top)>0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.legs,lcos(this.spin.legs[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.legs)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.legs[g].middle.x*this.anim.fat,this.graphics.legs[g].middle.y,14,14)
                    }
                }
                if(this.trigger.display.beak.main){
                    this.layer.fill(...this.flashColor(this.color.beak.main),this.fade*this.fades.beak.main)
                    this.layer.noStroke()
                    this.layer.ellipse(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction),8)
                }
                if(this.trigger.display.beak.mouth){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.mouth),this.fade*this.fades.beak.mouth)
                    this.layer.strokeWeight(0.5)
                    this.layer.arc(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction),1,0,180)
                }
                if(this.trigger.display.beak.nostril){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.nostril),this.fade*this.fades.beak.nostril)
                    this.layer.strokeWeight(0.5)
                    for(let g=0;g<2;g++){
                        this.layer.line(lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1.5,lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-46,27,27)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x*this.anim.fat,this.graphics.arms[g].middle.y,14,14)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(2,g)
                    }
                }
                if(this.trigger.display.beak.main&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.flashColor(this.color.beak.main),this.fade*this.fades.beak.main)
                    this.layer.noStroke()
                    this.layer.arc(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction)-max(0,lsin(this.anim.direction)-0.5)*24,8,-270,-90)
                    this.layer.arc(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction)+min(0,lsin(this.anim.direction)+0.5)*24,8,-90,90)
                }
                if(this.trigger.display.beak.mouth&&lcos(this.anim.direction)>0){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.mouth),this.fade*this.fades.beak.mouth)
                    this.layer.strokeWeight(0.5)
                    this.layer.arc(lsin(this.anim.direction)*13+max(0,lsin(this.anim.direction)-0.5)*6+min(0,lsin(this.anim.direction)+0.5)*6,this.parts.beakLevel,12+2*lcos(this.anim.direction)-max(0,lsin(this.anim.direction)-0.5)*12+min(0,lsin(this.anim.direction)+0.5)*12,1,0,180)
                }
                if(this.trigger.display.beak.nostril&&lcos(this.anim.direction)>0){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.nostril),this.fade*this.fades.beak.nostril)
                    this.layer.strokeWeight(0.5)
                    for(let g=0;g<2;g++){
                        this.layer.line(lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1.5,lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1)
                    }
                }
                if(this.trigger.display.hat){
                    this.layer.fill(...this.flashColor(this.color.hat),this.fade*this.fades.hat)
                    this.layer.noStroke()
                    this.layer.arc(0,-48,30,30,-180,0)
                    this.layer.rect(lsin(this.anim.direction)*16,-50,16+abs(lcos(this.anim.direction))*6,4)
                    this.layer.stroke(this.flashColor(this.color.hat)[0]-50,this.flashColor(this.color.hat)[1]-50,this.flashColor(this.color.hat)[2]-50,this.fade*this.fades.hat)
                    this.layer.strokeWeight(1)
                    this.layer.noFill()
                    for(let a=0,la=8;a<la;a++){
                        if(lcos(this.anim.direction+a*45)>0){
                            if(lsin(this.anim.direction+a*45)>0){
                                this.layer.arc(0,-48.5,30*lsin(this.anim.direction+a*45),29,-90,0)
                            }else if(lsin(this.anim.direction+a*45)<0){
                                this.layer.arc(0,-48.5,-30*lsin(this.anim.direction+a*45),29,-180,-90)
                            }
                        }
                    }
                }
            break
            case 'Setsuna':
                if(this.trigger.display.hair.back){
                    this.layer.image(graphics.combatant[3].sprites.hair.back[this.sprites.spinDetailHead],-25*this.fade,-81-20*this.fade,50*this.fade,100*this.fade)
                }
                if(this.trigger.display.kimono.ribbon){
                    this.layer.strokeWeight(3)
                    for(let a=0,la=8;a<la;a++){
                        for(let b=0,lb=3;b<lb;b++){
                            this.layer.stroke(
                                mergeColor(this.color.kimono.ribbon.start,this.color.kimono.ribbon.end,(a-5+b*5)/(la-1))[0],
                                mergeColor(this.color.kimono.ribbon.start,this.color.kimono.ribbon.end,(a-5+b*5)/(la-1))[1],
                                mergeColor(this.color.kimono.ribbon.start,this.color.kimono.ribbon.end,(a-5+b*5)/(la-1))[2],this.fade*this.fades.kimono.ribbon)
                            this.layer.line(lsin(this.anim.direction-45+b*45)*-(4+a*2),-42+[0,-3,3][b]+lsin(this.time*4+a*60+b*105)*2,lsin(this.anim.direction-45+b*45)*-(6+a*2),-42+[0,-3,3][b]+lsin(this.time*4+a*60+60+b*105)*2)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.band[1]&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6&&g==1){
                        this.minorDisplay(1,g)
                    }
                }
                if(this.trigger.display.kimono.outside.back){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[3].sprites.kimono.outsideDamage.back[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.outside.back.x,this.parts.kimono.outside-15*this.fades.kimono.outside.back.y,30*this.fade*this.fades.kimono.outside.back.x,66*this.fade*this.fades.kimono.outside.back.y)
                    }else{
                        this.layer.image(graphics.combatant[3].sprites.kimono.outside.back[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.outside.back.x,this.parts.kimono.outside-15*this.fades.kimono.outside.back.y,30*this.fade*this.fades.kimono.outside.back.x,66*this.fade*this.fades.kimono.outside.back.y)
                    }
                }
                if(this.trigger.display.kimono.main.back){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[3].sprites.kimono.mainDamage.back[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.main.back.x,this.parts.kimono.main-15*this.fades.kimono.main.back.y,30*this.fade*this.fades.kimono.main.back.x,66*this.fade*this.fades.kimono.main.back.y)
                    }else{
                        this.layer.image(graphics.combatant[3].sprites.kimono.main.back[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.main.back.x,this.parts.kimono.main-15*this.fades.kimono.main.back.y,30*this.fade*this.fades.kimono.main.back.x,66*this.fade*this.fades.kimono.main.back.y)
                    }
                }
                if(this.trigger.display.kimono.decoration){
                    this.layer.noStroke()
                    for(let g=0,lg=this.kimono.decoration.length;g<lg;g++){
                        if(lcos(this.kimono.decoration[g].spin+this.anim.direction)<=0&&!(this.trigger.display.extra.damage&&this.kimono.decoration[g].y<20)){
                            this.layer.push()
                            this.layer.translate((2.2+this.kimono.decoration[g].y*0.12)*lsin(this.kimono.decoration[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.y+this.kimono.decoration[g].y*this.fades.kimono.decoration.position.y)
                            this.layer.rotate(-9*lsin(this.kimono.decoration[g].spin+this.anim.direction))
                            this.layer.scale(this.fades.kimono.decoration.size.x*lcos(this.kimono.decoration[g].spin+this.anim.direction),this.fades.kimono.decoration.size.y)
                            this.layer.rotate(this.kimono.decoration[g].rotate)
                            for(let h=0,lh=5;h<lh;h++){
                                this.layer.fill(
                                    mergeColor(this.color.kimono.decoration.back[this.kimono.decoration[g].type],this.color.kimono.decoration.back[this.kimono.decoration[g].type+1],h/lh)[0],
                                    mergeColor(this.color.kimono.decoration.back[this.kimono.decoration[g].type],this.color.kimono.decoration.back[this.kimono.decoration[g].type+1],h/lh)[1],
                                    mergeColor(this.color.kimono.decoration.back[this.kimono.decoration[g].type],this.color.kimono.decoration.back[this.kimono.decoration[g].type+1],h/lh)[2],this.fade*this.fades.kimono.decoration.fade)
                                for(let i=0;i<4;i++){
                                    this.layer.rotate(45)
                                    this.layer.quad(0,0,this.kimono.decoration[g].width*0.5*(1-h/lh),-this.kimono.decoration[g].height*0.6,0,-this.kimono.decoration[g].height*1.5*(1-h/lh),-this.kimono.decoration[g].width*0.5*(1-h/lh),-this.kimono.decoration[g].height*0.6)
                                    this.layer.quad(0,0,this.kimono.decoration[g].width*0.5*(1-h/lh),this.kimono.decoration[g].height*0.6,0,this.kimono.decoration[g].height*1.5*(1-h/lh),-this.kimono.decoration[g].width*0.5*(1-h/lh),this.kimono.decoration[g].height*0.6)
                                }
                                this.layer.rotate(-180)
                            }
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[0]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,-lcos(this.spin.under.under.button[0]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[1]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,-lcos(this.spin.under.under.button[1]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[0]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,-lcos(this.spin.under.under.top[0]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[0]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[0]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[1]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,-lcos(this.spin.under.under.top[1]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[1]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[1]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-49,12,35)
                }
                if(this.trigger.display.skin.button){
                    if(lcos(this.spin.button+this.anim.direction)>0){
                        this.layer.noStroke()
                        this.layer.fill(...this.flashColor(this.color.skin.button),this.fade*this.fades.skin.button)
                        this.layer.ellipse(lsin(this.spin.button+this.anim.direction)*5.2,-42,1*lcos(this.spin.button+this.anim.direction),2)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.band[1]&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6&&g==1){
                        this.minorDisplay(1,g)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.fades.sandal.back[h]>0&&this.trigger.display.sandal.back[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.back.x,this.graphics.legs[h].sandal.back.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                if(this.trigger.display.extra.damage){
                                    this.layer.image(graphics.minor[28+h],-4*this.fades.sandal.back[h]*this.fade,-4*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade)
                                }else{
                                    this.layer.image(graphics.minor[27],-4*this.fades.sandal.back[h]*this.fade,-4*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade)
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.back.x,-this.graphics.legs[h].sandal.back.y-1.5)
                            }
                            if(this.fades.sandal.front[h]>0&&this.trigger.display.sandal.front[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.front.x,this.graphics.legs[h].sandal.front.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                for(let i=0;i<2;i++){
                                    if((lcos(this.anim.direction+65*(i*2-1)-this.spin.sandal[h])<=0.2&&this.trigger.display.mode.sandal.edge==0||i%2!=h&&this.trigger.display.mode.sandal.edge==1)){
                                        this.layer.image(graphics.minor[30+i],-4*this.fades.sandal.front[h]*this.fade,-4*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade)
                                    }
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.front.x,-this.graphics.legs[h].sandal.front.y-1.5)
                            }
                            if(this.trigger.display.skin.legs){
                                let color=this.flashColor(upColor(this.color.skin.legs,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                            if(this.trigger.display.band[0]&&h==0){
                                this.layer.noFill()
                                this.layer.stroke(this.color.band[0][0],this.color.band[0][1],this.color.band[0][2],this.fade*this.fades.band[0])
                                this.layer.strokeWeight(0.45)
                                this.layer.line(
                                    this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5+1.9*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                    this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5+1.9*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                    this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5-1.9*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                    this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5-1.9*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90))
                                this.layer.strokeWeight(0.3)
                                if(this.trigger.display.extra.damage){
                                    this.layer.line(
                                        this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5,this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5,
                                        this.graphics.legs[h].top.x*0.375+this.graphics.legs[h].middle.x*0.625-0.3125*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.375+this.graphics.legs[h].middle.y*0.625-0.3125*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90))
                                    this.layer.line(
                                        this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5,this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5,
                                        this.graphics.legs[h].top.x*0.4+this.graphics.legs[h].middle.x*0.6+0.25*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.4+this.graphics.legs[h].middle.y*0.6+0.25*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90))
                                    this.layer.arc(
                                        this.graphics.legs[h].top.x*0.46+this.graphics.legs[h].middle.x*0.54-0.5*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.46+this.graphics.legs[h].middle.y*0.54-0.5*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),1,1,-150,30)
                                    this.layer.arc(
                                        this.graphics.legs[h].top.x*0.46+this.graphics.legs[h].middle.x*0.54+0.5*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.46+this.graphics.legs[h].middle.y*0.54+0.5*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),1,1,-210,-30)
                                }else{
                                    this.layer.line(
                                        this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5,this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5,
                                        this.graphics.legs[h].top.x*0.35+this.graphics.legs[h].middle.x*0.65-0.375*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.35+this.graphics.legs[h].middle.y*0.65-0.375*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90))
                                    this.layer.line(
                                        this.graphics.legs[h].top.x*0.5+this.graphics.legs[h].middle.x*0.5,this.graphics.legs[h].top.y*0.5+this.graphics.legs[h].middle.y*0.5,
                                        this.graphics.legs[h].top.x*0.35+this.graphics.legs[h].middle.x*0.65+0.375*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.35+this.graphics.legs[h].middle.y*0.65+0.375*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90))
                                    this.layer.ellipse(
                                        this.graphics.legs[h].top.x*0.46+this.graphics.legs[h].middle.x*0.54-0.5*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.46+this.graphics.legs[h].middle.y*0.54-0.5*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),1,1)
                                    this.layer.ellipse(
                                        this.graphics.legs[h].top.x*0.46+this.graphics.legs[h].middle.x*0.54+0.5*lsin(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),
                                        this.graphics.legs[h].top.y*0.46+this.graphics.legs[h].middle.y*0.54+0.5*lcos(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].top.y-this.graphics.legs[h].middle.y)+90),1,1)
                                }
                            }
                            if(this.fades.sandal.front[h]>0&&this.trigger.display.sandal.front[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.front.x,this.graphics.legs[h].sandal.front.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                for(let i=0;i<2;i++){
                                    if((lcos(this.anim.direction+65*(i*2-1)-this.spin.sandal[h])>0.2&&this.trigger.display.mode.sandal.edge==0||i%2==h&&this.trigger.display.mode.sandal.edge==1)){
                                        this.layer.image(graphics.minor[30+i],-4*this.fades.sandal.front[h]*this.fade,-4*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade)
                                    }
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.front.x,-this.graphics.legs[h].sandal.front.y-1.5)
                            }
                        }
                    }
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,lcos(this.spin.under.under.top[0]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[0]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[0]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[1]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,lcos(this.spin.under.under.top[1]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[1]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[1]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,lcos(this.spin.under.under.button[0]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[1]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,lcos(this.spin.under.under.button[1]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.bottom&&lcos(this.spin.under.under.bottom[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.bottom[0],lcos(this.spin.under.under.bottom[0]+this.anim.direction))),this.fade*this.fades.under.under.bottom)
                    this.layer.beginShape()
                    this.layer.vertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*1.5,-31)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.endShape()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.bottom[1],lcos(this.spin.under.under.bottom[0]+this.anim.direction))),this.fade*this.fades.under.under.bottom)
                    this.layer.beginShape()
                    this.layer.vertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*1.5,-31)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.endShape()
                }
                if(this.trigger.display.kimono.main.front){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[3].sprites.kimono.mainDamage.front[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.main.back.x,this.parts.kimono.main-15*this.fades.kimono.main.back.y,30*this.fade*this.fades.kimono.main.back.x,66*this.fade*this.fades.kimono.main.back.y)
                    }else{
                        this.layer.image(graphics.combatant[3].sprites.kimono.main.front[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.main.back.x,this.parts.kimono.main-15*this.fades.kimono.main.back.y,30*this.fade*this.fades.kimono.main.back.x,66*this.fade*this.fades.kimono.main.back.y)
                    }
                }
                if(this.trigger.display.kimono.decoration){
                    this.layer.noStroke()
                    for(let g=0,lg=this.kimono.decoration.length;g<lg;g++){
                        if(lcos(this.kimono.decoration[g].spin+this.anim.direction)>0&&!(this.trigger.display.extra.damage&&this.kimono.decoration[g].y<20)){
                            this.layer.push()
                            this.layer.translate((2.2+this.kimono.decoration[g].y*0.12)*lsin(this.kimono.decoration[g].spin+this.anim.direction)*this.fades.kimono.decoration.position.x,this.parts.kimono.main-13*this.fades.kimono.decoration.position.y+this.kimono.decoration[g].y*this.fades.kimono.decoration.position.y)
                            this.layer.rotate(-9*lsin(this.kimono.decoration[g].spin+this.anim.direction))
                            this.layer.scale(this.fades.kimono.decoration.size.x*lcos(this.kimono.decoration[g].spin+this.anim.direction),this.fades.kimono.decoration.size.y)
                            this.layer.rotate(this.kimono.decoration[g].rotate)
                            for(let h=0,lh=5;h<lh;h++){
                                this.layer.fill(
                                    mergeColor(this.color.kimono.decoration.front[this.kimono.decoration[g].type],this.color.kimono.decoration.front[this.kimono.decoration[g].type+1],h/lh)[0],
                                    mergeColor(this.color.kimono.decoration.front[this.kimono.decoration[g].type],this.color.kimono.decoration.front[this.kimono.decoration[g].type+1],h/lh)[1],
                                    mergeColor(this.color.kimono.decoration.front[this.kimono.decoration[g].type],this.color.kimono.decoration.front[this.kimono.decoration[g].type+1],h/lh)[2],this.fade*this.fades.kimono.decoration.fade)
                                for(let i=0;i<4;i++){
                                    this.layer.rotate(45)
                                    this.layer.quad(0,0,this.kimono.decoration[g].width*0.5*(1-h/lh),-this.kimono.decoration[g].height*0.6,0,-this.kimono.decoration[g].height*1.5*(1-h/lh),-this.kimono.decoration[g].width*0.5*(1-h/lh),-this.kimono.decoration[g].height*0.6)
                                    this.layer.quad(0,0,this.kimono.decoration[g].width*0.5*(1-h/lh),this.kimono.decoration[g].height*0.6,0,this.kimono.decoration[g].height*1.5*(1-h/lh),-this.kimono.decoration[g].width*0.5*(1-h/lh),this.kimono.decoration[g].height*0.6)
                                }
                                this.layer.rotate(-180)
                            }
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.kimono.outside.front){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[3].sprites.kimono.outsideDamage.front[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.outside.back.x,this.parts.kimono.outside-15*this.fades.kimono.outside.back.y,30*this.fade*this.fades.kimono.outside.back.x,66*this.fade*this.fades.kimono.outside.back.y)
                    }else{
                        this.layer.image(graphics.combatant[3].sprites.kimono.outside.front[this.sprites.spinDetail],-15*this.fade*this.fades.kimono.outside.back.x,this.parts.kimono.outside-15*this.fades.kimono.outside.back.y,30*this.fade*this.fades.kimono.outside.back.x,66*this.fade*this.fades.kimono.outside.back.y)
                    }
                }
                if(this.trigger.display.kimono.bow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.kimono.bow[0],this.color.kimono.bow[1],this.color.kimono.bow[2],this.fade*this.fades.kimono.bow)
                    this.layer.strokeWeight(0.25)
                    if(this.trigger.display.extra.damage){
                        if(lcos(this.anim.direction+this.spin.bow.loop[0]/2)>0){
                            this.layer.arc(lsin(this.anim.direction+this.spin.bow.loop[0]/2)*5.4,this.parts.kimono.bow,lcos(this.anim.direction+this.spin.bow.loop[0]/2)*2.4,2.4,0,135)
                        }
                        if(lcos(this.anim.direction+this.spin.bow.loop[1]/2)>0){
                            this.layer.arc(lsin(this.anim.direction+this.spin.bow.loop[1]/2)*5.4,this.parts.kimono.bow,lcos(this.anim.direction+this.spin.bow.loop[1]/2)*2.4,2.4,45,180)
                        }
                        if(lcos(this.anim.direction)>0){
                            this.layer.arc(lsin(this.anim.direction)*5.5,this.parts.kimono.bow+1.2,lcos(this.anim.direction)*2.4,2.4,-45,225)
                        }
                    }else{
                        if(lcos(this.anim.direction+this.spin.bow.loop[0]/2)>0){
                            this.layer.ellipse(lsin(this.anim.direction+this.spin.bow.loop[0]/2)*5.4,this.parts.kimono.bow,lcos(this.anim.direction+this.spin.bow.loop[0]/2)*2.4,2.4)
                        }
                        if(lcos(this.anim.direction+this.spin.bow.loop[1]/2)>0){
                            this.layer.ellipse(lsin(this.anim.direction+this.spin.bow.loop[1]/2)*5.4,this.parts.kimono.bow,lcos(this.anim.direction+this.spin.bow.loop[1]/2)*2.4,2.4)
                        }
                        if(lcos(this.anim.direction)>0){
                            this.layer.ellipse(lsin(this.anim.direction)*5.3,this.parts.kimono.bow-1.2,lcos(this.anim.direction)*2.4,2.4)
                            this.layer.ellipse(lsin(this.anim.direction)*5.5,this.parts.kimono.bow+1.2,lcos(this.anim.direction)*2.4,2.4)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6)&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.band[1]&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6&&g==1){
                        this.minorDisplay(1,g)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-81,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3)&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.band[1]&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.2)&&g==1){
                        this.minorDisplay(1,g)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.hair.front){
                    this.layer.image(graphics.combatant[3].sprites.hair.front[this.sprites.spinDetailHead],-25*this.fade,-81-20*this.fade,50*this.fade,100*this.fade)
                }
                if(this.trigger.display.hair.glow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.hair.glow[0],this.color.hair.glow[1],this.color.hair.glow[2],this.fade/4)
                    for(let g=0;g<6;g++){
                        this.layer.strokeWeight((3-g/2)*this.fade)
                        this.layer.arc(0,-81,30+g,30+g,-72+g*6,-12-g*6)
                    }
                }
                if(this.trigger.display.flower[2]&&this.fades.flower[2]>0){
                    if(constrain((pow(lcos(this.spin.flower[2]+this.anim.head),1.5)*2-0.2),0,1)>0){
                        this.layer.image(graphics.minor[35],lsin(this.spin.flower[2]+this.anim.head)*18.5-8*this.fade*this.fades.flower[2]*constrain((pow(lcos(this.spin.flower[2]+this.anim.head),1.5)*2-0.2),0,1),this.parts.flowerLevel[2]-8*this.fade*this.fades.flower[2],16*this.fade*this.fades.flower[2]*constrain((pow(lcos(this.spin.flower[2]+this.anim.head),1.5)*2-0.2),0,1),16*this.fade*this.fades.flower[2])
                    }
                }
                if(this.trigger.display.flower[1]&&this.fades.flower[1]>0){
                    if(constrain((pow(lcos(this.spin.flower[1]+this.anim.head),1.5)*2-0.2),0,1)>0){
                        this.layer.image(graphics.minor[34],lsin(this.spin.flower[1]+this.anim.head)*18.5-9*this.fade*this.fades.flower[1]*constrain((pow(lcos(this.spin.flower[1]+this.anim.head),1.5)*2-0.2),0,1),this.parts.flowerLevel[1]-9*this.fade*this.fades.flower[1],18*this.fade*this.fades.flower[1]*constrain((pow(lcos(this.spin.flower[1]+this.anim.head),1.5)*2-0.2),0,1),18*this.fade*this.fades.flower[1])
                    }
                }
                if(this.trigger.display.flower[0]&&this.fades.flower[0]>0){
                    if(constrain((pow(lcos(this.spin.flower[0]+this.anim.head),1.5)*2-0.2),0,1)>0){
                        if(this.trigger.display.extra.damage){
                            this.layer.image(graphics.minor[33],lsin(this.spin.flower[0]+this.anim.head)*18.5-10*this.fade*this.fades.flower[0]*constrain((pow(lcos(this.spin.flower[0]+this.anim.head),1.5)*2-0.2),0,1),this.parts.flowerLevel[0]-10*this.fade*this.fades.flower[0],20*this.fade*this.fades.flower[0]*constrain((pow(lcos(this.spin.flower[0]+this.anim.head),1.5)*2-0.2),0,1),20*this.fade*this.fades.flower[0])
                        }else{
                            this.layer.image(graphics.minor[32],lsin(this.spin.flower[0]+this.anim.head)*18.5-10*this.fade*this.fades.flower[0]*constrain((pow(lcos(this.spin.flower[0]+this.anim.head),1.5)*2-0.2),0,1),this.parts.flowerLevel[0]-10*this.fade*this.fades.flower[0],20*this.fade*this.fades.flower[0]*constrain((pow(lcos(this.spin.flower[0]+this.anim.head),1.5)*2-0.2),0,1),20*this.fade*this.fades.flower[0])
                        }
                    }
                }
            break
            case 'Airi':
                if(this.trigger.display.hair.pin){
                    this.layer.noStroke()
                    for(let g=0;g<2;g++){
                        if(lcos(this.anim.direction+this.spin.hair.pin[g])<=0){
                            this.layer.push()
                            this.layer.translate(lsin(this.anim.direction+this.spin.hair.pin[g])*14,-83.75)
                            this.layer.rotate(lsin(this.anim.direction+this.spin.hair.pin[g])*-30)
                            this.layer.scale(lcos(this.anim.direction+this.spin.hair.pin[g])*0.95+0.05,1)
                            this.layer.noStroke()
                            this.layer.fill(this.color.hair.pin[1][0],this.color.hair.pin[1][1],this.color.hair.pin[1][2],this.fades.hair.pin)
                            this.layer.triangle(-1.5,0,1.5,0,0,3)
                            this.layer.fill(this.color.hair.pin[0][0],this.color.hair.pin[0][1],this.color.hair.pin[0][2],this.fades.hair.pin)
                            this.layer.ellipse(0,-1.5,4.5,4.5)
                            for(let a=0,la=9;a<la;a++){
                                this.layer.ellipse(lsin(a*40+20)*2,-1.5+lcos(a*40+20)*2,1,1)
                            }
                            this.layer.fill(upColor(this.color.hair.pin[0],25,[1,1,1])[0],upColor(this.color.hair.pin[0],25,[1,1,1])[1],upColor(this.color.hair.pin[0],25,[1,1,1])[2],this.fades.hair.pin)
                            this.layer.ellipse(0,-1.5,3.375,3.375)
                            for(let a=0,la=9;a<la;a++){
                                this.layer.ellipse(lsin(a*40)*1.5,-1.5+lcos(a*40)*1.5,0.75,0.75)
                            }
                            this.layer.fill(upColor(this.color.hair.pin[0],50,[1,1,1])[0],upColor(this.color.hair.pin[0],50,[1,1,1])[1],upColor(this.color.hair.pin[0],50,[1,1,1])[2],this.fades.hair.pin)
                            this.layer.ellipse(0,-1.5,2.25,2.25)
                            for(let a=0,la=9;a<la;a++){
                                this.layer.ellipse(lsin(a*40+20),-1.5+lcos(a*40+20),0.5,0.5)
                            }
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.hair.back){
                    this.layer.image(graphics.combatant[4].sprites.hair.back[this.sprites.spinDetailHead],-20*this.fade,-75-20*this.fade,40*this.fade,60*this.fade)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.trigger.display.uniform.shirt){
                            this.layer.stroke(...this.flashColor(this.color.uniform.main),this.fade*this.fades.uniform.shirt)
                            this.layer.strokeWeight(4)
                            this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                            this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].middle.x*0.5+this.graphics.arms[g].bottom.x*0.5,this.graphics.arms[g].middle.y*0.5+this.graphics.arms[g].bottom.y*0.5)
                            this.layer.strokeCap(SQUARE)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.5+this.graphics.arms[g].bottom.x*0.5,this.graphics.arms[g].middle.y*0.5+this.graphics.arms[g].bottom.y*0.5,
                                this.graphics.arms[g].middle.x*0.2+this.graphics.arms[g].bottom.x*0.8,this.graphics.arms[g].middle.y*0.2+this.graphics.arms[g].bottom.y*0.8)
                            if(this.trigger.display.uniform.stripeShirt){
                                let diff=[this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x,this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y]
                                this.layer.stroke(...this.flashColor(this.color.uniform.stripe),this.fade*this.fades.uniform.stripeShirt)
                                this.layer.strokeWeight(0.5)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.275+this.graphics.arms[g].bottom.x*0.725-diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.275+this.graphics.arms[g].bottom.y*0.725+diff[0]/sqrt(diff[0]**2+diff[1]**2)*2,
                                    this.graphics.arms[g].middle.x*0.275+this.graphics.arms[g].bottom.x*0.725+diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.275+this.graphics.arms[g].bottom.y*0.725-diff[0]/sqrt(diff[0]**2+diff[1]**2)*2)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.35+this.graphics.arms[g].bottom.x*0.65-diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.35+this.graphics.arms[g].bottom.y*0.65+diff[0]/sqrt(diff[0]**2+diff[1]**2)*2,
                                    this.graphics.arms[g].middle.x*0.35+this.graphics.arms[g].bottom.x*0.65+diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.35+this.graphics.arms[g].bottom.y*0.65-diff[0]/sqrt(diff[0]**2+diff[1]**2)*2)
                            }
                            this.layer.strokeCap(ROUND)
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-46,11,30)
                }
                if(this.trigger.display.skin.button){
                    if(lcos(this.spin.button+this.anim.direction)>0){
                        this.layer.noStroke()
                        this.layer.fill(...this.flashColor(this.color.skin.button),this.fade*this.fades.skin.button)
                        this.layer.ellipse(lsin(this.spin.button+this.anim.direction)*5.2,-42,1*lcos(this.spin.button+this.anim.direction),2)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.trigger.display.uniform.shirt){
                            this.layer.stroke(...this.flashColor(this.color.uniform.main),this.fade*this.fades.uniform.shirt)
                            this.layer.strokeWeight(4)
                            this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                            this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].middle.x*0.5+this.graphics.arms[g].bottom.x*0.5,this.graphics.arms[g].middle.y*0.5+this.graphics.arms[g].bottom.y*0.5)
                            this.layer.strokeCap(SQUARE)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.5+this.graphics.arms[g].bottom.x*0.5,this.graphics.arms[g].middle.y*0.5+this.graphics.arms[g].bottom.y*0.5,
                                this.graphics.arms[g].middle.x*0.2+this.graphics.arms[g].bottom.x*0.8,this.graphics.arms[g].middle.y*0.2+this.graphics.arms[g].bottom.y*0.8)
                            if(this.trigger.display.uniform.stripeShirt){
                                let diff=[this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x,this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y]
                                this.layer.stroke(...this.flashColor(this.color.uniform.stripe),this.fade*this.fades.uniform.stripeShirt)
                                this.layer.strokeWeight(0.5)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.275+this.graphics.arms[g].bottom.x*0.725-diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.275+this.graphics.arms[g].bottom.y*0.725+diff[0]/sqrt(diff[0]**2+diff[1]**2)*2,
                                    this.graphics.arms[g].middle.x*0.275+this.graphics.arms[g].bottom.x*0.725+diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.275+this.graphics.arms[g].bottom.y*0.725-diff[0]/sqrt(diff[0]**2+diff[1]**2)*2)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.35+this.graphics.arms[g].bottom.x*0.65-diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.35+this.graphics.arms[g].bottom.y*0.65+diff[0]/sqrt(diff[0]**2+diff[1]**2)*2,
                                    this.graphics.arms[g].middle.x*0.35+this.graphics.arms[g].bottom.x*0.65+diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.35+this.graphics.arms[g].bottom.y*0.65-diff[0]/sqrt(diff[0]**2+diff[1]**2)*2)
                            }
                            this.layer.strokeCap(ROUND)
                        }
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.shoe){
                                let color=this.flashColor(upColor(this.color.shoe,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.fill(...color,this.fade*this.fades.shoe)
                                this.layer.noStroke()
                                this.layer.ellipse(this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y+1,6,4.5)
                            }
                            if(this.trigger.display.sock&&lcos(this.anim.direction-90+h*180)<=0){
                                let color=this.flashColor(upColor(this.color.sock,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.sock)
                                this.layer.noStroke()
                                this.layer.push()
                                this.layer.translate(this.graphics.legs[h].top.x*0.35+this.graphics.legs[h].middle.x*0.65+2*lsin(this.anim.direction-90+h*180),this.graphics.legs[h].top.y*0.35+this.graphics.legs[h].middle.y*0.6)
                                this.layer.scale(lcos(this.anim.direction-90+h*180),1)
                                this.layer.rotate(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y-this.graphics.legs[h].top.y))
                                this.layer.triangle(0,0,-2.4,-1.2,-2.4,1.2)
                                this.layer.triangle(0,0,2.4,-1.2,2.4,1.2)
                                this.layer.pop()
                            }
                            if(this.trigger.display.skin.legs){
                                let color=this.flashColor(upColor(this.color.skin.legs,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                            if(this.trigger.display.sock){
                                let color=this.flashColor(upColor(this.color.sock,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.sock)
                                this.layer.strokeWeight(4)
                                this.layer.strokeCap(SQUARE)
                                this.layer.line(this.graphics.legs[h].top.x*0.4+this.graphics.legs[h].middle.x*0.6,this.graphics.legs[h].top.y*0.4+this.graphics.legs[h].middle.y*0.6,this.graphics.legs[h].top.x*0.2+this.graphics.legs[h].middle.x*0.8,this.graphics.legs[h].top.y*0.2+this.graphics.legs[h].middle.y*0.8)
                                this.layer.strokeCap(ROUND)
                                this.layer.line(this.graphics.legs[h].top.x*0.2+this.graphics.legs[h].middle.x*0.8,this.graphics.legs[h].top.y*0.2+this.graphics.legs[h].middle.y*0.8,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                                if(lcos(this.anim.direction-90+h*180)>0){
                                    this.layer.fill(upColor(this.color.sock[1],lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1])[0],upColor(this.color.sock[1],lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1])[1],upColor(this.color.sock[1],lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1])[2],this.fade*this.fades.sock)
                                    this.layer.noStroke()
                                    this.layer.push()
                                    this.layer.translate(this.graphics.legs[h].top.x*0.35+this.graphics.legs[h].middle.x*0.65+2*lsin(this.anim.direction-90+h*180),this.graphics.legs[h].top.y*0.35+this.graphics.legs[h].middle.y*0.6)
                                    this.layer.scale(lcos(this.anim.direction-90+h*180),1)
                                    this.layer.rotate(atan2(this.graphics.legs[h].top.x-this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y-this.graphics.legs[h].top.y))
                                    this.layer.triangle(0,0,-2.4,-1.2,-2.4,1.2)
                                    this.layer.triangle(0,0,2.4,-1.2,2.4,1.2)
                                    this.layer.pop()
                                }
                            }
                            if(this.trigger.display.shoe){
                                let color=this.flashColor(upColor(this.color.shoe,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.fill(...color,this.fade*this.fades.shoe)
                                this.layer.noStroke()
                                this.layer.ellipse(this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y+1.25,6,2)
                            }
                        }
                    }
                }
                if(this.trigger.display.uniform.shirt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.uniform.main),this.fade*this.fades.uniform.shirt)
                    this.layer.arc(0,-42,11.5,38,-180,0)
                }
                if(this.trigger.display.uniform.skirt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.uniform.underskirt),this.fade*this.fades.uniform.skirt*0.5)
                    this.layer.quad(-5.75,-42,5.75,-42,10,-29,-10,-29)
                    this.layer.arc(0,-29,20,3,0,180)
                    for(let a=0,la=18;a<la;a++){
                        this.layer.ellipse(lcos(a*10+5)*10,-29+lsin(a*10+5)*1.5,2*lsin(a*10+5),1.5)
                    }
                    this.layer.fill(...this.flashColor(this.color.uniform.main),this.fade*this.fades.uniform.shirt)
                    this.layer.quad(-5.75,-42,5.75,-42,10,-30,-10,-30)
                    for(let a=0,la=9;a<la;a++){
                        this.layer.fill(this.flashColor(this.color.uniform.main)[0]-a%2*10,this.flashColor(this.color.uniform.main)[1]-a%2*10,this.flashColor(this.color.uniform.main)[2]-a%2*10,this.fade*this.fades.uniform.shirt)
                        this.layer.quad(-5.75+11.5*a/la,-42,-5.75+11.5*(a+1)/la,-42,-10+20*(a+1)/la,-30,-10+20*a/la,-30)
                    }
                    for(let a=0,la=5;a<la;a++){
                        this.layer.fill(this.flashColor(this.color.uniform.main)[0]-a%2*10,this.flashColor(this.color.uniform.main)[1]-a%2*10,this.flashColor(this.color.uniform.main)[2]-a%2*10,this.fade*this.fades.uniform.shirt)
                        this.layer.arc(0,-30,20*(1-a*2/9),3,0,180)
                    }
                    if(this.trigger.display.uniform.stripeShirt){
                        this.layer.noFill()
                        this.layer.strokeCap(SQUARE)
                        this.layer.stroke(...this.flashColor(this.color.uniform.stripe),this.fade*this.fades.uniform.stripeShirt)
                        this.layer.strokeWeight(0.5)
                        this.layer.arc(0,-31,19.5,3,0,180)
                        this.layer.strokeCap(ROUND)
                    }
                }
                if(this.trigger.display.uniform.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.uniform.belt),this.fade*this.fades.uniform.belt)
                    this.layer.rect(0,-42,11.5,1)
                }
                if(this.trigger.display.uniform.collar&&lcos(this.anim.direction)>0.1){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.uniform.stripe),this.fade*this.fades.uniform.collar)
                    this.layer.triangle(lsin(this.anim.direction)*0.5-lcos(this.anim.direction)*2.3,-61,lsin(this.anim.direction)*0.5+lcos(this.anim.direction)*2.3,-61,lsin(this.anim.direction)*6.5,-53)
                    this.layer.fill(...this.flashColor(this.color.uniform.main),this.fade*this.fades.uniform.collar)
                    this.layer.triangle(lsin(this.anim.direction)*0.5-lcos(this.anim.direction)*2.07,-61,lsin(this.anim.direction)*0.5+lcos(this.anim.direction)*2.07,-61,lsin(this.anim.direction)*5.9,-54)
                    this.layer.fill(...this.flashColor(this.color.uniform.stripe),this.fade*this.fades.uniform.collar)
                    this.layer.triangle(lsin(this.anim.direction)*0.5-lcos(this.anim.direction)*1.84,-61,lsin(this.anim.direction)*0.5+lcos(this.anim.direction)*1.84,-61,lsin(this.anim.direction)*5.3,-55)
                    this.layer.fill(this.flashColor(this.color.skin.body)[0]-20,this.flashColor(this.color.skin.body)[1]-20,this.flashColor(this.color.skin.body)[2]-20,this.fade*this.fades.uniform.collar)
                    this.layer.triangle(lsin(this.anim.direction)*0.5-lcos(this.anim.direction)*1.2,-61,lsin(this.anim.direction)*0.5+lcos(this.anim.direction)*1.2,-61,lsin(this.anim.direction)*6.5,-53)
                    this.layer.fill(this.flashColor(this.color.uniform.main)[0]-25,this.flashColor(this.color.uniform.main)[1]-25,this.flashColor(this.color.uniform.main)[2]-25,this.fade*this.fades.uniform.collar)
                    this.layer.triangle(lsin(this.anim.direction)*3.5-lcos(this.anim.direction)*0.6,-57,lsin(this.anim.direction)*3.5+lcos(this.anim.direction)*0.6,-57,lsin(this.anim.direction)*6.5,-53)
                    this.layer.fill(...this.flashColor(this.color.uniform.stripe),this.fade*this.fades.uniform.collar)
                    this.layer.ellipse(lsin(this.anim.direction)*4.25,-56,0.5,0.5)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.trigger.display.uniform.shirt){
                            this.layer.stroke(...this.flashColor(this.color.uniform.main),this.fade*this.fades.uniform.shirt)
                            this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                            this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                            this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].middleStack.x*0.5+this.graphics.arms[g].bottomStack.x*0.5,this.graphics.arms[g].middleStack.y*0.5+this.graphics.arms[g].bottomStack.y*0.5)
                            this.layer.strokeCap(SQUARE)
                            this.layer.line(
                                this.graphics.arms[g].middleStack.x*0.5+this.graphics.arms[g].bottomStack.x*0.5,this.graphics.arms[g].middleStack.y*0.5+this.graphics.arms[g].bottomStack.y*0.5,
                                this.graphics.arms[g].middleStack.x*0.2+this.graphics.arms[g].bottomStack.x*0.8,this.graphics.arms[g].middleStack.y*0.2+this.graphics.arms[g].bottomStack.y*0.8)
                            if(this.trigger.display.uniform.stripeShirt){
                                let diff=[this.graphics.arms[g].middleStack.x-this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].middleStack.y-this.graphics.arms[g].bottomStack.y]
                                this.layer.stroke(...this.flashColor(this.color.uniform.stripe),this.fade*this.fades.uniform.stripeShirt)
                                this.layer.strokeWeight(0.5)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.275+this.graphics.arms[g].bottom.x*0.725-diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.275+this.graphics.arms[g].bottom.y*0.725+diff[0]/sqrt(diff[0]**2+diff[1]**2)*2,
                                    this.graphics.arms[g].middle.x*0.275+this.graphics.arms[g].bottom.x*0.725+diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.275+this.graphics.arms[g].bottom.y*0.725-diff[0]/sqrt(diff[0]**2+diff[1]**2)*2)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.35+this.graphics.arms[g].bottom.x*0.65-diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.35+this.graphics.arms[g].bottom.y*0.65+diff[0]/sqrt(diff[0]**2+diff[1]**2)*2,
                                    this.graphics.arms[g].middle.x*0.35+this.graphics.arms[g].bottom.x*0.65+diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.35+this.graphics.arms[g].bottom.y*0.65-diff[0]/sqrt(diff[0]**2+diff[1]**2)*2)
                            }
                            this.layer.strokeCap(ROUND)
                        }
                    }
                }
                if(this.trigger.display.uniform.bow&&lcos(this.anim.direction)>0.1){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.uniform.bow)[0]-20,this.flashColor(this.color.uniform.bow)[1]-20,this.flashColor(this.color.uniform.bow)[2]-20,this.fade*this.fades.uniform.bow)
                    this.layer.triangle(lsin(this.anim.direction)*6.5,-52.5,lsin(this.anim.direction)*6.5-lcos(this.anim.direction)*6.5,-47.5,lsin(this.anim.direction)*6.5-lcos(this.anim.direction)*3.5,-45.5)
                    this.layer.triangle(lsin(this.anim.direction)*6.5,-52.5,lsin(this.anim.direction)*6.5+lcos(this.anim.direction)*6.5,-47.5,lsin(this.anim.direction)*6.5+lcos(this.anim.direction)*3.5,-45.5)
                    this.layer.fill(this.flashColor(this.color.uniform.bow)[0]-30,this.flashColor(this.color.uniform.bow)[1]-30,this.flashColor(this.color.uniform.bow)[2]-30,this.fade*this.fades.uniform.bow)
                    this.layer.triangle(lsin(this.anim.direction)*6.5,-52.5,lsin(this.anim.direction)*6.5-lcos(this.anim.direction)*5.75,-47,lsin(this.anim.direction)*6.5-lcos(this.anim.direction)*4.25,-46)
                    this.layer.triangle(lsin(this.anim.direction)*6.5,-52.5,lsin(this.anim.direction)*6.5+lcos(this.anim.direction)*5.75,-47,lsin(this.anim.direction)*6.5+lcos(this.anim.direction)*4.25,-46)
                    this.layer.fill(...this.flashColor(this.color.uniform.bow),this.fade*this.fades.uniform.bow)
                    this.layer.ellipse(lsin(this.anim.direction)*6.5,-52.5,1.5,1.5)
                    this.layer.triangle(lsin(this.anim.direction)*6.5,-52.5,lsin(this.anim.direction)*6.5-lcos(this.anim.direction)*7,-53,lsin(this.anim.direction)*6.5-lcos(this.anim.direction)*5,-48)
                    this.layer.triangle(lsin(this.anim.direction)*6.5,-52.5,lsin(this.anim.direction)*6.5+lcos(this.anim.direction)*7,-53,lsin(this.anim.direction)*6.5+lcos(this.anim.direction)*5,-48)
                    this.layer.fill(this.flashColor(this.color.uniform.bow)[0]-10,this.flashColor(this.color.uniform.bow)[1]-10,this.flashColor(this.color.uniform.bow)[2]-10,this.fade*this.fades.uniform.bow)
                    this.layer.triangle(lsin(this.anim.direction)*6.5,-52.5,lsin(this.anim.direction)*6.5-lcos(this.anim.direction)*6.5,-51.75,lsin(this.anim.direction)*6.5-lcos(this.anim.direction)*5.5,-49.25)
                    this.layer.triangle(lsin(this.anim.direction)*6.5,-52.5,lsin(this.anim.direction)*6.5+lcos(this.anim.direction)*6.5,-51.75,lsin(this.anim.direction)*6.5+lcos(this.anim.direction)*5.5,-49.25)
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-75,30,30)
                }
                if(this.trigger.display.skin.blush){
                    this.layer.fill(...this.flashColor(this.color.skin.blush),this.fade*this.fades.skin.blush*0.2)
                    for(let g=0;g<2;g++){
                        if(lcos(this.spin.blush[g]+this.anim.direction)>0){
                            this.layer.push()
                            this.layer.translate(13.5*lsin(this.spin.blush[g]+this.anim.direction),this.parts.blush)
                            this.layer.rotate(30*lsin(this.spin.blush[g]+this.anim.direction))
                            this.layer.ellipse(0,0,5*lcos(this.spin.blush[g]+this.anim.direction),4)
                            this.layer.ellipse(0,0,3.75*lcos(this.spin.blush[g]+this.anim.direction),3)
                            this.layer.ellipse(0,0,2.5*lcos(this.spin.blush[g]+this.anim.direction),2)
                            this.layer.ellipse(0,0,1.25*lcos(this.spin.blush[g]+this.anim.direction),1)
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.trigger.display.uniform.shirt){
                            this.layer.stroke(...this.flashColor(this.color.uniform.main),this.fade*this.fades.uniform.shirt)
                            this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                            this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                            this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].middleStack.x*0.5+this.graphics.arms[g].bottomStack.x*0.5,this.graphics.arms[g].middleStack.y*0.5+this.graphics.arms[g].bottomStack.y*0.5)
                            this.layer.strokeCap(SQUARE)
                            this.layer.line(
                                this.graphics.arms[g].middleStack.x*0.5+this.graphics.arms[g].bottomStack.x*0.5,this.graphics.arms[g].middleStack.y*0.5+this.graphics.arms[g].bottomStack.y*0.5,
                                this.graphics.arms[g].middleStack.x*0.2+this.graphics.arms[g].bottomStack.x*0.8,this.graphics.arms[g].middleStack.y*0.2+this.graphics.arms[g].bottomStack.y*0.8)
                            if(this.trigger.display.uniform.stripeShirt){
                                let diff=[this.graphics.arms[g].middleStack.x-this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].middleStack.y-this.graphics.arms[g].bottomStack.y]
                                this.layer.stroke(...this.flashColor(this.color.uniform.stripe),this.fade*this.fades.uniform.stripeShirt)
                                this.layer.strokeWeight(0.5)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.275+this.graphics.arms[g].bottom.x*0.725-diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.275+this.graphics.arms[g].bottom.y*0.725+diff[0]/sqrt(diff[0]**2+diff[1]**2)*2,
                                    this.graphics.arms[g].middle.x*0.275+this.graphics.arms[g].bottom.x*0.725+diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.275+this.graphics.arms[g].bottom.y*0.725-diff[0]/sqrt(diff[0]**2+diff[1]**2)*2)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.35+this.graphics.arms[g].bottom.x*0.65-diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.35+this.graphics.arms[g].bottom.y*0.65+diff[0]/sqrt(diff[0]**2+diff[1]**2)*2,
                                    this.graphics.arms[g].middle.x*0.35+this.graphics.arms[g].bottom.x*0.65+diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.35+this.graphics.arms[g].bottom.y*0.65-diff[0]/sqrt(diff[0]**2+diff[1]**2)*2)
                            }
                            this.layer.strokeCap(ROUND)
                        }
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.trigger.display.uniform.shirt){
                            this.layer.stroke(...this.flashColor(this.color.uniform.main),this.fade*this.fades.uniform.shirt)
                            this.layer.strokeWeight(4)
                            this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].middle.x*0.5+this.graphics.arms[g].bottom.x*0.5,this.graphics.arms[g].middle.y*0.5+this.graphics.arms[g].bottom.y*0.5)
                            this.layer.strokeCap(SQUARE)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.5+this.graphics.arms[g].bottom.x*0.5,this.graphics.arms[g].middle.y*0.5+this.graphics.arms[g].bottom.y*0.5,
                                this.graphics.arms[g].middle.x*0.15+this.graphics.arms[g].bottom.x*0.85,this.graphics.arms[g].middle.y*0.15+this.graphics.arms[g].bottom.y*0.85)
                            if(this.trigger.display.uniform.stripeShirt){
                                let diff=[this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x,this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y]
                                this.layer.stroke(...this.flashColor(this.color.uniform.stripe),this.fade*this.fades.uniform.stripeShirt)
                                this.layer.strokeWeight(0.5)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.275+this.graphics.arms[g].bottom.x*0.725-diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.275+this.graphics.arms[g].bottom.y*0.725+diff[0]/sqrt(diff[0]**2+diff[1]**2)*2,
                                    this.graphics.arms[g].middle.x*0.275+this.graphics.arms[g].bottom.x*0.725+diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.275+this.graphics.arms[g].bottom.y*0.725-diff[0]/sqrt(diff[0]**2+diff[1]**2)*2)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.35+this.graphics.arms[g].bottom.x*0.65-diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.35+this.graphics.arms[g].bottom.y*0.65+diff[0]/sqrt(diff[0]**2+diff[1]**2)*2,
                                    this.graphics.arms[g].middle.x*0.35+this.graphics.arms[g].bottom.x*0.65+diff[1]/sqrt(diff[0]**2+diff[1]**2)*2,this.graphics.arms[g].middle.y*0.35+this.graphics.arms[g].bottom.y*0.65-diff[0]/sqrt(diff[0]**2+diff[1]**2)*2)
                            }
                            this.layer.strokeCap(ROUND)
                        }
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.hair.front){
                    this.layer.image(graphics.combatant[4].sprites.hair.front[this.sprites.spinDetailHead],-20*this.fade,-75-20*this.fade,40*this.fade,60*this.fade)
                }
                if(this.trigger.display.hair.glow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.hair.glow[0],this.color.hair.glow[1],this.color.hair.glow[2],this.fade/4)
                    for(let g=0;g<6;g++){
                        this.layer.strokeWeight((3-g/2)*this.fade)
                        this.layer.arc(0,-75,28+g,28+g,-72+g*6,-12-g*6)
                    }
                }
                if(this.trigger.display.hair.pin){
                    this.layer.noStroke()
                    for(let g=0;g<2;g++){
                        if(lcos(this.anim.direction+this.spin.hair.pin[g])>0){
                            this.layer.push()
                            this.layer.translate(lsin(this.anim.direction+this.spin.hair.pin[g])*14,-78)
                            this.layer.rotate(lsin(this.anim.direction+this.spin.hair.pin[g])*-5)
                            this.layer.scale(lcos(this.anim.direction+this.spin.hair.pin[g])*0.95+0.05,1)
                            this.layer.noStroke()
                            this.layer.fill(this.color.hair.pin[1][0],this.color.hair.pin[1][1],this.color.hair.pin[1][2],this.fades.hair.pin)
                            this.layer.triangle(-1.5,0,1.5,0,0,3)
                            this.layer.fill(this.color.hair.pin[0][0],this.color.hair.pin[0][1],this.color.hair.pin[0][2],this.fades.hair.pin)
                            this.layer.ellipse(0,-1.5,4.5,4.5)
                            for(let a=0,la=9;a<la;a++){
                                this.layer.ellipse(lsin(a*40+20)*2,-1.5+lcos(a*40+20)*2,1,1)
                            }
                            this.layer.fill(upColor(this.color.hair.pin[0],25,[1,1,1])[0],upColor(this.color.hair.pin[0],25,[1,1,1])[1],upColor(this.color.hair.pin[0],25,[1,1,1])[2],this.fades.hair.pin)
                            this.layer.ellipse(0,-1.5,3.375,3.375)
                            for(let a=0,la=9;a<la;a++){
                                this.layer.ellipse(lsin(a*40)*1.5,-1.5+lcos(a*40)*1.5,0.75,0.75)
                            }
                            this.layer.fill(upColor(this.color.hair.pin[0],50,[1,1,1])[0],upColor(this.color.hair.pin[0],50,[1,1,1])[1],upColor(this.color.hair.pin[0],50,[1,1,1])[2],this.fades.hair.pin)
                            this.layer.ellipse(0,-1.5,2.25,2.25)
                            for(let a=0,la=9;a<la;a++){
                                this.layer.ellipse(lsin(a*40+20),-1.5+lcos(a*40+20),0.5,0.5)
                            }
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.halo){
                    this.layer.push()
                    this.layer.translate(0,-96)
                    this.layer.scale(1,0.5)
                    this.layer.rotate(-this.anim.direction)
                    this.layer.noFill()
                    this.layer.stroke(this.color.halo[0],this.color.halo[1],this.color.halo[2],this.fade*this.fades.halo)
                    this.layer.strokeWeight(2)
                    this.layer.ellipse(0,0,20,20)
                    this.layer.strokeWeight(3)
                    this.layer.arc(0,0,30,30,-135,-45)
                    this.layer.arc(0,0,30,30,45,75)
                    this.layer.arc(0,0,30,30,-255,-225)
                    this.layer.line(15*lcos(75),15*lsin(75),18*lcos(75),18*lsin(75))
                    this.layer.line(-15*lcos(75),15*lsin(75),-18*lcos(75),18*lsin(75))
                    this.layer.fill(this.color.halo[0],this.color.halo[1],this.color.halo[2],this.fade*this.fades.halo)
                    this.layer.noStroke()
                    for(let a=0,la=5;a<la;a++){
                        this.layer.ellipse(-14*lcos(-27+a*13.5),-14*lsin(-27+a*13.5),2.5,2.5)
                        this.layer.ellipse(14*lcos(-27+a*13.5),14*lsin(-27+a*13.5),2.5,2.5)
                    }
                    for(let a=0,la=4;a<la;a++){
                        this.layer.ellipse(-16.5*lcos(-20.25+a*13.5),-16.5*lsin(-20.25+a*13.5),2.5,2.5)
                        this.layer.ellipse(16.5*lcos(-20.25+a*13.5),16.5*lsin(-20.25+a*13.5),2.5,2.5)
                    }
                    this.layer.pop()
                }
                if(!this.graphic){
                    if(this.team==0){
                        this.layer.translate(0,30)
                    }
                    this.layer.stroke(240,255,250,this.fade)
                    this.layer.strokeWeight(1)
                    this.layer.noFill()
                    this.layer.translate(0,10-this.offset.position.y)
                    this.layer.ellipse(0,0,10)
                    for(let a=0,la=5;a<la;a++){
                        this.layer.rotate(72)
                        this.layer.line(0,5,0,8)
                        this.layer.line(0,8,-2,7)
                    }
                    this.layer.translate(0,-10+this.offset.position.y)
                    this.layer.noStroke()
                    this.layer.fill(240,255,250,this.fade)
                    this.layer.textSize(8)
                    this.layer.text(this.charge,0,10.5-this.offset.position.y)
                }
            break
            case 'Edgar':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3&&g==1){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-48,13,39)
                }
                if(this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.belt[0])[0],this.flashColor(this.color.belt[0])[1],this.flashColor(this.color.belt[0])[2],this.fade*this.fades.belt)
                    this.layer.rect(0,-48,13,2)
                    if(lcos(this.anim.direction)>=0){
                        this.layer.fill(this.flashColor(this.color.belt[1])[0],this.flashColor(this.color.belt[1])[1],this.flashColor(this.color.belt[1])[2],this.fade*this.fades.belt)
                        this.layer.ellipse(lsin(this.anim.direction)*6.5,-48,4*lcos(this.anim.direction),4)
                        this.layer.fill(this.flashColor(this.color.belt[2])[0],this.flashColor(this.color.belt[2])[1],this.flashColor(this.color.belt[2])[2],this.fade*this.fades.belt)
                        this.layer.rect(lsin(this.anim.direction)*6.5,-48,2*lcos(this.anim.direction),2)
                    }
                }
                if(this.trigger.display.tie&&lcos(this.anim.direction)>0.1){
                    this.layer.fill(this.flashColor(this.color.tie[0])[0],this.flashColor(this.color.tie[0])[1],this.flashColor(this.color.tie[0])[2],this.fade*this.fades.tie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*3-lcos(this.anim.direction)*3,-68,lsin(this.anim.direction)*3+lcos(this.anim.direction)*3,-68,lsin(this.anim.direction)*9,-50)
                    this.layer.fill(this.flashColor(this.color.tie[1])[0],this.flashColor(this.color.tie[1])[1],this.flashColor(this.color.tie[1])[2],this.fade*this.fades.tie)
                    this.layer.quad(lsin(this.anim.direction)*6-lcos(this.anim.direction)*1.5,-60,lsin(this.anim.direction)*3,-70,lsin(this.anim.direction)*6+lcos(this.anim.direction)*1.5,-60,lsin(this.anim.direction)*9,-50)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3&&lcos(this.spin.arms[g].top+this.anim.direction)<=0.4&&g==1){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)>0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6&&g==1){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-81,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6&&g==1){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.monocle&&lcos(this.anim.direction-18)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.color.monocle[0][0],this.color.monocle[0][1],this.color.monocle[0][2],this.fade*this.fades.monocle/5)
                    this.layer.stroke(this.color.monocle[1][0],this.color.monocle[1][1],this.color.monocle[1][2],this.fade*this.fades.monocle)
                    this.layer.strokeWeight(1)
                    this.layer.ellipse(lsin(this.anim.direction-18)*16,-78,6*lcos(this.anim.direction-16),6)
                }
            break
            case 'Chip':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-48,13,39)
                    this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                    this.layer.arc(0,-48,13.5,39,-180,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.rose&&lcos(this.anim.direction-54)>=0){
                    this.layer.noStroke()
                    this.layer.fill(this.color.rose[0][0],this.color.rose[0][1],this.color.rose[0][2],this.fade)
                    this.layer.rect(lsin(this.anim.direction-54)*6,-54,1*lcos(this.anim.direction-54),4)
                    this.layer.fill(this.color.rose[1][0],this.color.rose[1][1],this.color.rose[1][2],this.fade)
                    this.layer.ellipse(lsin(this.anim.direction-54)*6,-58,4*lcos(this.anim.direction-54),4)
                    for(let a=0,la=12;a<la;a++){
                        this.layer.ellipse(lsin(this.anim.direction-54)*6+lsin(a*30)*lcos(this.anim.direction-54)*2,-58+lcos(a*30)*lcos(this.anim.direction-54)*2,lcos(this.anim.direction-54),1)
                    }
                }
                if(this.trigger.display.bowtie&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.bowtie[0])[0],this.flashColor(this.color.bowtie[0])[1],this.flashColor(this.color.bowtie[0])[2],this.fade*this.fades.bowtie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)-lcos(this.anim.direction)*3,-68,lsin(this.anim.direction)+lcos(this.anim.direction)*3,-68,lsin(this.anim.direction)*7,-54)
                    this.layer.fill(this.color.bowtie[1][0],this.color.bowtie[1][1],this.color.bowtie[1][2],this.fade*this.fades.bowtie)
                    this.layer.triangle(lsin(this.anim.direction)*4,-62,lsin(this.anim.direction)*4-lcos(this.anim.direction)*5,-64,lsin(this.anim.direction)*4-lcos(this.anim.direction)*5,-60)
                    this.layer.triangle(lsin(this.anim.direction)*4,-62,lsin(this.anim.direction)*4+lcos(this.anim.direction)*5,-64,lsin(this.anim.direction)*4+lcos(this.anim.direction)*5,-60)
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-81,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.hat){
                    this.layer.stroke(...this.flashColor(this.color.hat),this.fade*this.fades.hat)
                    this.layer.strokeWeight(4)
                    this.layer.fill(...this.flashColor(this.color.hat),this.fade*this.fades.hat)
                    this.layer.line(-16,-90,16,-90)
                    this.layer.rect(0,-94,20,8,3)
                }
            break
            case 'Shiru':
                if(this.trigger.display.hair.bow){
                    this.layer.noStroke()
                    for(let g=0;g<2;g++){
                        if(lcos(this.anim.direction+this.spin.hair.bow[g])<=0){
                            this.layer.translate(lsin(this.anim.direction+this.spin.hair.bow[g])*16,-80)
                            this.layer.scale(lcos(this.anim.direction+this.spin.hair.bow[g])*0.6+0.4,1)
                            this.layer.fill(this.color.hair.bow[0],this.color.hair.bow[1],this.color.hair.bow[2],this.fade)
                            this.layer.ellipse(0,0,2)
                            this.layer.quad(0.5,-0.5,-5,2.75,-3.75,3.75,-2.75,5)
                            this.layer.quad(-0.5,-0.5,5,2.75,3.75,3.75,2.75,5)
                            this.layer.scale(1/(lcos(this.anim.direction+this.spin.hair.bow[g])*0.6+0.4),1)
                            this.layer.translate(lsin(this.anim.direction+this.spin.hair.bow[g])*-16,80)
                        }
                    }
                }
                if(this.trigger.display.hair.back){
                    this.layer.image(graphics.combatant[5].sprites.hair.back[this.sprites.spinDetail],-20*this.fade,-72-20*this.fade,40*this.fade,60*this.fade)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.hair.tail&&lcos(this.spin.tail[g]+this.anim.direction)<=0){
                        this.layer.translate(lsin(this.spin.tail[g]+this.anim.direction)*16,-50)
                        this.layer.rotate(lsin(this.spin.tail[g]+this.anim.direction)*-12)
                        this.layer.image(graphics.combatant[5].sprites.hair.tail[g][this.sprites.spinDetail],-10*this.fade,-25*this.fade,20*this.fade,60*this.fade)
                        this.layer.rotate(lsin(this.spin.tail[g]+this.anim.direction)*12)
                        this.layer.translate(lsin(this.spin.tail[g]+this.anim.direction)*-16,50)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(0,g)
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(this.color.skin.body[0],this.color.skin.body[1],this.color.skin.body[2],this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-44,9,28)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(0,g)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(0,g)
                        }
                    }
                }
                if(this.trigger.display.dress.main){
                    this.layer.noStroke()
                    this.layer.fill(this.color.dress.inside[0],this.color.dress.inside[1],this.color.dress.inside[2],this.fade*this.fades.dress.main)
                    for(let a=0,la=16;a<la;a++){
                        if(lcos((a+0.5)/la*360+this.anim.direction)>0){
                            this.layer.arc(11.7*lsin((a+0.5)/la*360+this.anim.direction),-27.25,4*lcos((a+0.5)/la*360+this.anim.direction),3.5,0,180)
                        }
                    }
                    this.layer.fill(this.color.dress.main[0],this.color.dress.main[1],this.color.dress.main[2],this.fade*this.fades.dress.main)
                    this.layer.arc(0,-35,11,42,-180,0)
                    this.layer.quad(-5.5,-36,5.5,-36,12,-27,-12,-27)
                    for(let a=0,la=16;a<la;a++){
                        if(lcos(a/la*360+this.anim.direction)>0){
                            this.layer.arc(11.7*lsin(a/la*360+this.anim.direction),-27.25,5*lcos(a/la*360+this.anim.direction),4,0,180)
                        }
                    }
                    this.layer.stroke(this.color.dress.highlight[0],this.color.dress.highlight[1],this.color.dress.highlight[2],this.fade*this.fades.dress.main)
                    this.layer.strokeWeight(0.25)
                    for(let a=0,la=16;a<la;a++){
                        if(lcos(a/la*360+this.anim.direction)>0){
                            this.layer.arc(10.8*lsin(a/la*360+this.anim.direction),-28.5,4.5*lcos(a/la*360+this.anim.direction),2,10,170)
                        }
                    }
                    this.layer.stroke(this.color.dress.border[0],this.color.dress.border[1],this.color.dress.border[2],this.fade*this.fades.dress.main)
                    this.layer.strokeWeight(0.5)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-22.5+a*45)>0){
                            this.layer.line(5.4*lsin(this.anim.direction-22.5+a*45),-37,3.9*lsin(this.anim.direction-22.5+a*45),-52)
                            if(a==0){
                                this.layer.line(5.4*lsin(this.anim.direction-22.5+a*45),-37,-5.4,-37)
                            }else if(a==1){
                                this.layer.line(5.4*lsin(this.anim.direction-22.5+a*45),-37,5.4,-37)
                            }
                        }
                    }
                    if(lcos(this.anim.direction-22.5)<=0&&lcos(this.anim.direction+22.5)<=0){
                        this.layer.line(-5.4,-37,5.4,-37)
                    }
                    this.layer.strokeWeight(0.3)
                    if(lcos(this.anim.direction-22.5)>0&&lcos(this.anim.direction+22.5)>0){
                        for(let a=0,la=4;a<la;a++){
                            this.layer.line((5.1-a*0.25)*lsin(this.anim.direction-22.5),-40-a*2.5,(5.35-a*0.25)*lsin(this.anim.direction+22.5),-37.5-a*2.5)
                            this.layer.line((5.35-a*0.25)*lsin(this.anim.direction-22.5),-37.5-a*2.5,(5.1-a*0.25)*lsin(this.anim.direction+22.5),-40-a*2.5)
                        }
                    }else if(lcos(this.anim.direction-22.5)>0){
                        for(let a=0,la=4;a<la;a++){
                            this.layer.line((5.1-a*0.25)*lsin(this.anim.direction-22.5),-40-a*2.5,5.4-a*0.25,-37.5-a*2.5)
                            this.layer.line((5.35-a*0.25)*lsin(this.anim.direction-22.5),-37.5-a*2.5,5.4-a*0.25,-40-a*2.5)
                        }
                    }else if(lcos(this.anim.direction+22.5)>0){
                        for(let a=0,la=4;a<la;a++){
                            this.layer.line((5.1-a*0.25)*lsin(this.anim.direction+22.5),-40-a*2.5,-5.4+a*0.25,-37.5-a*2.5)
                            this.layer.line((5.35-a*0.25)*lsin(this.anim.direction+22.5),-37.5-a*2.5,-5.4+a*0.25,-40-a*2.5)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.4){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(0,g)
                        }
                    }
                }
                if(this.trigger.display.dress.main){
                    this.layer.noStroke()
                    this.layer.fill(this.color.dress.shawl[0],this.color.dress.shawl[1],this.color.dress.shawl[2],this.fade*this.fades.dress.main)
                    this.layer.arc(0,-46,18,21,-180,0)
                    for(let a=0,la=20;a<la;a++){
                        if(lcos(a/la*360+this.anim.direction)>0){
                            this.layer.arc(8.9*lsin(a/la*360+this.anim.direction),-46.25,3*lcos(a/la*360+this.anim.direction),2,0,180)
                        }
                    }
                    this.layer.stroke(this.color.dress.highlight[0],this.color.dress.highlight[1],this.color.dress.highlight[2],this.fade*this.fades.dress.main)
                    this.layer.strokeWeight(0.25)
                    for(let a=0,la=20;a<la;a++){
                        if(lcos(a/la*360+this.anim.direction)>0){
                            this.layer.arc(8.75*lsin(a/la*360+this.anim.direction),-48,3*lcos(a/la*360+this.anim.direction),2,10,170)
                        }
                    }
                    this.layer.arc(0,-56,8,4,10,170)
                    this.layer.noStroke()
                    this.layer.fill(this.color.skin.body[0],this.color.skin.body[1],this.color.skin.body[2],this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-56,5,2)
                }
                if(this.trigger.display.dress.bow&&lcos(this.anim.direction)>0){
                    this.layer.push()
                    this.layer.translate(lsin(this.anim.direction)*5.5,-54)
                    this.layer.rotate(lsin(this.anim.direction)*-15)
                    this.layer.scale(lcos(this.anim.direction),1)
                    this.layer.noStroke()

                    this.layer.fill(this.color.dress.bow[0][0]-30,this.color.dress.bow[0][1]-30,this.color.dress.bow[0][2]-30,this.fade*this.fades.dress.bow)
                    this.layer.rotate(-24)
                    this.layer.quad(0,0,-1,6,0,5,1,6)
                    this.layer.rotate(48)
                    this.layer.quad(0,0,-1,6,0,5,1,6)
                    this.layer.rotate(-24)
                    this.layer.fill(this.color.dress.bow[0][0],this.color.dress.bow[0][1],this.color.dress.bow[0][2],this.fade*this.fades.dress.bow)
                    this.layer.rotate(-81)
                    pentagon(this.layer,0.8,0,-0.8,0,-2.4,6,0,5.25,2.4,6)
                    this.layer.rotate(162)
                    pentagon(this.layer,0.8,0,-0.8,0,-2.4,6,0,5.25,2.4,6)
                    this.layer.rotate(-81)

                    this.layer.fill(this.color.dress.bow[1][0]-30,this.color.dress.bow[1][1]-30,this.color.dress.bow[1][2]-30,this.fade*this.fades.dress.bow)
                    this.layer.rotate(-24)
                    this.layer.quad(0,-0.1,-0.8,4.8,0,4,0.8,4.8)
                    this.layer.rotate(48)
                    this.layer.quad(0,-0.1,-0.8,4.8,0,4,0.8,4.8)
                    this.layer.rotate(-24)
                    this.layer.fill(this.color.dress.bow[1][0],this.color.dress.bow[1][1],this.color.dress.bow[1][2],this.fade*this.fades.dress.bow)
                    this.layer.rotate(-81)
                    pentagon(this.layer,0.85,0,-0.85,0,-2.08,4.8,0,4.2,2.08,4.8)
                    this.layer.rotate(162)
                    pentagon(this.layer,0.85,0,-0.85,0,-2.08,4.8,0,4.2,2.08,4.8)
                    this.layer.rotate(-81)

                    this.layer.fill(this.color.dress.bow[0][0]-30,this.color.dress.bow[0][1]-30,this.color.dress.bow[0][2]-30,this.fade*this.fades.dress.bow)
                    this.layer.rotate(-24)
                    this.layer.quad(0,-0.2,-0.7,4.2,0,3.5,0.7,4.2)
                    this.layer.rotate(48)
                    this.layer.quad(0,-0.2,-0.7,4.2,0,3.5,0.7,4.2)
                    this.layer.rotate(-24)
                    this.layer.fill(this.color.dress.bow[0][0],this.color.dress.bow[0][1],this.color.dress.bow[0][2],this.fade*this.fades.dress.bow)
                    this.layer.rotate(-81)
                    pentagon(this.layer,0.9,0,-0.9,0,-1.92,4.2,0,3.675,1.92,4.2)
                    this.layer.rotate(162)
                    pentagon(this.layer,0.9,0,-0.9,0,-1.92,4.2,0,3.675,1.92,4.2)
                    this.layer.rotate(-81)

                    this.layer.fill(this.color.dress.bow[1][0],this.color.dress.bow[1][1],this.color.dress.bow[1][2],this.fade*this.fades.dress.bow)
                    this.layer.rotate(-81)
                    this.layer.quad(0.2,0,-0.2,0,-1.6,5.75,-1.1,5.5)
                    this.layer.quad(-0.2,0,0.2,0,1.6,5.75,1.1,5.5)
                    this.layer.rotate(162)
                    this.layer.quad(0.2,0,-0.2,0,-1.6,5.75,-1.1,5.5)
                    this.layer.quad(-0.2,0,0.2,0,1.6,5.75,1.1,5.5)
                    this.layer.rotate(-81)
                    this.layer.fill(this.color.dress.bow[0][0]-15,this.color.dress.bow[0][1]-15,this.color.dress.bow[0][2]-15,this.fade*this.fades.dress.bow)
                    this.layer.rect(0,0,2.5,2.5,0.5)
                    this.layer.fill(this.color.dress.bow[1][0]-15,this.color.dress.bow[1][1]-15,this.color.dress.bow[1][2]-15,this.fade*this.fades.dress.bow)
                    this.layer.rect(0,0,2.5,0.5)
                    this.layer.rect(0,0,0.5,2.5)

                    this.layer.pop()
                }
                if(this.trigger.display.skin.head){
                    let base=this.flashColor(this.color.skin.head)
                    this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-72,30,30)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.hair.tail&&lcos(this.spin.tail[g]+this.anim.direction)>0){
                        this.layer.translate(lsin(this.spin.tail[g]+this.anim.direction)*16,-50)
                        this.layer.rotate(lsin(this.spin.tail[g]+this.anim.direction)*-12)
                        this.layer.image(graphics.combatant[5].sprites.hair.tail[g][this.sprites.spinDetail],-10*this.fade,-25*this.fade,20*this.fade,60*this.fade)
                        this.layer.rotate(lsin(this.spin.tail[g]+this.anim.direction)*12)
                        this.layer.translate(lsin(this.spin.tail[g]+this.anim.direction)*-16,50)
                    }
                }
                if(this.trigger.display.hair.front){
                    this.layer.image(graphics.combatant[5].sprites.hair.front[this.sprites.spinDetail],-20*this.fade,-72-20*this.fade,40*this.fade,60*this.fade)
                }
                if(this.trigger.display.hair.glow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.hair.glow[0],this.color.hair.glow[1],this.color.hair.glow[2],this.fade/4)
                    for(let g=0;g<6;g++){
                        this.layer.strokeWeight((3-g/2)*this.fade)
                        this.layer.arc(0,-72,30+g,30+g,-72+g*6,-12-g*6)
                    }
                }
                if(this.trigger.display.hair.bow){
                    this.layer.noStroke()
                    for(let g=0;g<2;g++){
                        if(lcos(this.anim.direction+this.spin.hair.bow[g])>0){
                            this.layer.translate(lsin(this.anim.direction+this.spin.hair.bow[g])*16,-80)
                            this.layer.scale(lcos(this.anim.direction+this.spin.hair.bow[g])*0.6+0.4,1)
                            this.layer.fill(this.color.hair.bow[0],this.color.hair.bow[1],this.color.hair.bow[2],this.fade)
                            this.layer.ellipse(0,0,2)
                            this.layer.quad(0.5,-0.5,-5,2.75,-3.75,3.75,-2.75,5)
                            this.layer.quad(-0.5,-0.5,5,2.75,3.75,3.75,2.75,5)
                            this.layer.scale(1/(lcos(this.anim.direction+this.spin.hair.bow[g])*0.6+0.4),1)
                            this.layer.translate(lsin(this.anim.direction+this.spin.hair.bow[g])*-16,80)
                        }
                    }
                }
            break
            case 'DD-610':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        this.minorDisplay(0,g)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        this.minorDisplay(0,g)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                                this.minorDisplay(1,h)
                                if(lcos(this.anim.direction)>0){
                                    this.minorDisplay(2,h)
                                }
                            }
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    for(let a=0,la=15;a<la;a++){
                        for(let b=0,lb=4;b<lb;b++){
                            if(lcos(this.anim.direction+b*90)>0){
                                let base=this.flashColor(mergeColor(this.color.skin.bodyUpper.out,this.color.skin.bodyLower.out,a/la))
                                this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.body)
                                this.layer.rect(8*lsin(this.anim.direction+b*90),-59+a*2,16*lcos(this.anim.direction+b*90),2.5)
                                base=this.flashColor(mergeColor(this.color.skin.bodyUpper.in,this.color.skin.bodyLower.in,a/la))
                                this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.body)
                                this.layer.rect(8*lsin(this.anim.direction+b*90),-59+a*2,max(0,16*lcos(this.anim.direction+b*90)-3),2.5)
                            }
                        }
                    }
                    this.layer.strokeWeight(3)
                    this.layer.stroke(this.flashColor(this.color.skin.bodyUpper.out)[0],this.flashColor(this.color.skin.bodyUpper.out)[1],this.flashColor(this.color.skin.bodyUpper.out)[2],this.fade*this.fades.skin.body)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>0){
                            this.layer.line(6.5*lsin(this.anim.direction+a*90)-6.5*lcos(this.anim.direction+a*90),-60,6.5*lsin(this.anim.direction+a*90)+6.5*lcos(this.anim.direction+a*90),-60)
                        }
                    }
                    this.layer.stroke(this.flashColor(this.color.skin.bodyLower.out)[0],this.flashColor(this.color.skin.bodyLower.out)[1],this.flashColor(this.color.skin.bodyLower.out)[2],this.fade*this.fades.skin.body)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>0){
                            this.layer.line(6.5*lsin(this.anim.direction+a*90)-6.5*lcos(this.anim.direction+a*90),-30,6.5*lsin(this.anim.direction+a*90)+6.5*lcos(this.anim.direction+a*90),-30)
                        }
                    }
                }
                if(this.trigger.display.seal&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.seal)[0],this.flashColor(this.color.seal)[1],this.flashColor(this.color.seal)[2],this.fade*this.fades.seal)
                    this.layer.quad(8*lsin(this.anim.direction),-48,8*lsin(this.anim.direction)-2*lcos(this.anim.direction),-50,8*lsin(this.anim.direction),-52,8*lsin(this.anim.direction)+2*lcos(this.anim.direction),-50)
                }
                if(this.trigger.display.belt){
                    this.layer.noStroke()
                    for(let a=0,la=15;a<la;a++){
                        for(let b=0,lb=4;b<lb;b++){
                            if(lcos(this.anim.direction+b*90)>0){
                                let base=this.flashColor(this.color.belt)
                                this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.belt)
                                this.layer.rect(8*lsin(this.anim.direction+b*90),-42,8*lcos(this.anim.direction+b*90),1)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        this.minorDisplay(0,g)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.stroke(this.flashColor(this.color.wire)[0],this.flashColor(this.color.wire)[1],this.flashColor(this.color.wire)[2],this.fade*this.fades.skin.body)
                    this.layer.strokeWeight(0.5)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>0.1){
                            this.layer.line(8*lsin(this.anim.direction+a*90)-3*lcos(this.anim.direction+a*90),-65,8*lsin(this.anim.direction+a*90)-3*lcos(this.anim.direction+a*90),-57+a%2*3)
                            this.layer.line(8*lsin(this.anim.direction+a*90)+3*lcos(this.anim.direction+a*90),-65,8*lsin(this.anim.direction+a*90)+3*lcos(this.anim.direction+a*90),-54-a%2*3)
                        }
                    }
                }
                if(this.trigger.display.antenna){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.antenna)[0],this.flashColor(this.color.antenna)[1],this.flashColor(this.color.antenna)[2],this.fade*this.fades.antenna)
                    this.layer.quad(0,-87,-6*abs(lcos(this.anim.direction)),-91,-10*abs(lcos(this.anim.direction)),-97,-4*abs(lcos(this.anim.direction)),-93)
                    this.layer.quad(0,-87,6*abs(lcos(this.anim.direction)),-91,10*abs(lcos(this.anim.direction)),-97,4*abs(lcos(this.anim.direction)),-93)
                }
                if(this.trigger.display.skin.head){
                    this.layer.stroke(this.flashColor(this.color.skin.head.out)[0],this.flashColor(this.color.skin.head.out)[1],this.flashColor(this.color.skin.head.out)[2],this.fade*this.fades.skin.head)
                    this.layer.strokeWeight(3)
                    this.layer.fill(this.flashColor(this.color.skin.head.in)[0],this.flashColor(this.color.skin.head.in)[1],this.flashColor(this.color.skin.head.in)[2],this.fade*this.fades.skin.head)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>0){
                            this.layer.rect(13.5*lsin(this.anim.direction+a*90),-75,27*lcos(this.anim.direction+a*90),27,1)
                        }
                    }
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.dots[0])[0],this.flashColor(this.color.dots[0])[1],this.flashColor(this.color.dots[0])[2],this.fade*this.fades.skin.head)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>0){
                            this.layer.ellipse(13.5*lsin(this.anim.direction+a*90)-9*lcos(this.anim.direction+a*90),-84,3*lcos(this.anim.direction+a*90),3)
                            this.layer.ellipse(13.5*lsin(this.anim.direction+a*90)+9*lcos(this.anim.direction+a*90),-84,3*lcos(this.anim.direction+a*90),3)
                            this.layer.ellipse(13.5*lsin(this.anim.direction+a*90)-9*lcos(this.anim.direction+a*90),-66,3*lcos(this.anim.direction+a*90),3)
                            this.layer.ellipse(13.5*lsin(this.anim.direction+a*90)+9*lcos(this.anim.direction+a*90),-66,3*lcos(this.anim.direction+a*90),3)
                        }
                    }
                    this.layer.fill(this.flashColor(this.color.dots[1])[0],this.flashColor(this.color.dots[1])[1],this.flashColor(this.color.dots[1])[2],this.fade*this.fades.skin.head)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>0){
                            this.layer.ellipse(13.5*lsin(this.anim.direction+a*90)-9*lcos(this.anim.direction+a*90),-80,2*lcos(this.anim.direction+a*90),2)
                            this.layer.ellipse(13.5*lsin(this.anim.direction+a*90)+5*lcos(this.anim.direction+a*90),-84,2*lcos(this.anim.direction+a*90),2)
                            this.layer.ellipse(13.5*lsin(this.anim.direction+a*90)-5*lcos(this.anim.direction+a*90),-66,2*lcos(this.anim.direction+a*90),2)
                            this.layer.ellipse(13.5*lsin(this.anim.direction+a*90)+9*lcos(this.anim.direction+a*90),-70,2*lcos(this.anim.direction+a*90),2)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Prehextorica':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        let base=this.flashColor(this.color.skin.arms)
                        this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        base=this.flashColor(upColor(this.color.skin.arms,20,[1,1,1]))
                        this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(2)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        this.layer.noStroke()
                        base=this.flashColor(this.color.skin.node)
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,2.5,2.5,0)
                        regPoly(this.layer,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y,16,2.5,2.5,0)
                        base=this.flashColor(upColor(this.color.skin.node,20,[1,1,1]))
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,1.5,1.5,0)
                        regPoly(this.layer,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y,16,1.5,1.5,0)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    let base=this.flashColor(this.color.skin.body)
                    this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.head)
                    regPoly(this.layer,0,-48,16,6.5,19.5,0)
                    base=this.flashColor(upColor(this.color.skin.body,20,[1,1,1]))
                    this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.head)
                    regPoly(this.layer,0,-48,16,4.5,17.5,0)
                    base=this.flashColor(this.color.skin.body)
                    this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.head)
                    this.layer.quad(-5,-54,-5,-52,5,-42,5,-44)
                    this.layer.quad(0,-59,0,-57,5,-52,5,-54)
                    this.layer.quad(-5,-44,-5,-42,0,-37,0,-39)
                    base=this.flashColor(this.color.skin.rock)
                    this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.head)
                    for(let a=0,la=9;a<la;a++){
                        if(lcos(this.anim.direction+360*a/la)>=0){
                            regPoly(this.layer,6.5*lsin(this.anim.direction+360*a/la),-48.5+a%2+12*lsin(360*a/la),16,(2+a%3*0.5)*lcos(this.anim.direction+360*a/la),2+a%3*0.5,0)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        let base=this.flashColor(this.color.skin.arms)
                        this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        base=this.flashColor(upColor(this.color.skin.arms,20,[1,1,1]))
                        this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(2)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        this.layer.noStroke()
                        base=this.flashColor(this.color.skin.node)
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,2.5,2.5,0)
                        regPoly(this.layer,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y,16,2.5,2.5,0)
                        base=this.flashColor(upColor(this.color.skin.node,20,[1,1,1]))
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,1.5,1.5,0)
                        regPoly(this.layer,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y,16,1.5,1.5,0)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                let base=this.flashColor(this.color.skin.legs)
                                this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[g].top.x,this.graphics.legs[g].top.y,this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y)
                                this.layer.line(this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,this.graphics.legs[g].bottom.x,this.graphics.legs[g].bottom.y)
                                base=this.flashColor(upColor(this.color.skin.legs,20,[1,1,1]))
                                this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(2)
                                this.layer.line(this.graphics.legs[g].top.x,this.graphics.legs[g].top.y,this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y)
                                this.layer.line(this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,this.graphics.legs[g].bottom.x,this.graphics.legs[g].bottom.y)
                                this.layer.noStroke()
                                base=this.flashColor(this.color.skin.node)
                                this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.legs)
                                regPoly(this.layer,this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,16,2.5,2.5,0)
                                regPoly(this.layer,this.graphics.legs[g].bottom.x,this.graphics.legs[g].bottom.y,16,2.5,2.5,0)
                                base=this.flashColor(upColor(this.color.skin.node,20,[1,1,1]))
                                this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.legs)
                                regPoly(this.layer,this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,16,1.5,1.5,0)
                                regPoly(this.layer,this.graphics.legs[g].bottom.x,this.graphics.legs[g].bottom.y,16,1.5,1.5,0)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        let base=this.flashColor(this.color.skin.arms)
                        this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        base=this.flashColor(upColor(this.color.skin.arms,20,[1,1,1]))
                        this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(2)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        this.layer.noStroke()
                        base=this.flashColor(this.color.skin.node)
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,2.5,2.5,0)
                        regPoly(this.layer,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y,16,2.5,2.5,0)
                        base=this.flashColor(upColor(this.color.skin.node,20,[1,1,1]))
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,1.5,1.5,0)
                        regPoly(this.layer,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y,16,1.5,1.5,0)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.noStroke()
                    let base=this.flashColor(this.color.skin.head)
                    this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.head)
                    regPoly(this.layer,0,-81,16,15,15,0)
                    base=this.flashColor(upColor(this.color.skin.head,20,[1,1,1]))
                    this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.head)
                    regPoly(this.layer,0,-81,16,13,13,0)
                    base=this.flashColor(this.color.skin.head)
                    this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.head)
                    this.layer.quad(-10,-92,-11,-91,10,-70,11,-71)
                    this.layer.quad(0,-92,0,-90,14,-76,14,-78)
                    this.layer.quad(-14,-86,-14,-84,0,-70,0,-72)
                    if(lcos(this.anim.direction+70)>0){
                        base=this.flashColor(this.color.skin.crack)
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.head)
                        regStar(this.layer,7*lsin(this.anim.direction+70),-84,7,7*lcos(this.anim.direction+70),7,2*lcos(this.anim.direction+70),2,9)
                    }
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        let base=this.flashColor(this.color.skin.arms)
                        this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        base=this.flashColor(upColor(this.color.skin.arms,20,[1,1,1]))
                        this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(2)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        this.layer.noStroke()
                        base=this.flashColor(this.color.skin.node)
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,2.5,2.5,0)
                        regPoly(this.layer,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y,16,2.5,2.5,0)
                        base=this.flashColor(upColor(this.color.skin.node,20,[1,1,1]))
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,1.5,1.5,0)
                        regPoly(this.layer,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y,16,1.5,1.5,0)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        let base=this.flashColor(this.color.skin.arms)
                        this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        base=this.flashColor(upColor(this.color.skin.arms,20,[1,1,1]))
                        this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(2)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.noStroke()
                        base=this.flashColor(this.color.skin.node)
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,2.5,2.5,0)
                        base=this.flashColor(upColor(this.color.skin.node,20,[1,1,1]))
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,1.5,1.5,0)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Vincent':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-48.75,11.5,40)
                    this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                    this.layer.arc(0,-48.75,12,40,-180,0)
                }
                if(this.trigger.display.pocket){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.pocket[0])[0],this.flashColor(this.color.pocket[0])[1],this.flashColor(this.color.pocket[0])[2],this.fade*this.fades.pocket)
                    if(lcos(this.anim.direction-40)>0){
                        this.layer.rect(lsin(this.anim.direction-40)*5.5,-54,3*lcos(this.anim.direction-40),3)
                    }
                    if(lcos(this.anim.direction+40)>0){
                        this.layer.rect(lsin(this.anim.direction+40)*5.5,-54,3*lcos(this.anim.direction+40),3)
                    }
                    this.layer.fill(this.flashColor(this.color.pocket[1])[0],this.flashColor(this.color.pocket[1])[1],this.flashColor(this.color.pocket[1])[2],this.fade*this.fades.pocket)
                    if(lcos(this.anim.direction-40)>0){
                        this.layer.rect(lsin(this.anim.direction-40)*5.5,-56,4*lcos(this.anim.direction-40),1)
                    }
                    if(lcos(this.anim.direction+40)>0){
                        this.layer.rect(lsin(this.anim.direction+40)*5.5,-56,4*lcos(this.anim.direction+40),1)
                    }
                }
                if(this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    for(let a=0,la=8;a<la;a++){
                        if(lcos(this.anim.direction+a*45)>0){
                            this.layer.quad(
                                sin(this.anim.direction+a*45)*6,-49.5,
                                sin(this.anim.direction+a*45)*6-cos(this.anim.direction+a*45)*1.5,-48.75,
                                sin(this.anim.direction+a*45)*6,-48,
                                sin(this.anim.direction+a*45)*6+cos(this.anim.direction+a*45)*1.5,-48.75
                            )
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-82.5,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.mouth.teeth[0])[0],this.flashColor(this.color.mouth.teeth[0])[1],this.flashColor(this.color.mouth.teeth[0])[2],this.fade)
                    this.layer.rect(lsin(this.anim.direction)*(this.parts.minor-2),this.parts.mouth-this.anim.mouth.y*(0.5+lcos(this.anim.direction)*0.5)*0.5+1,lcos(this.anim.direction)*2.5,2.5)
                    this.layer.fill(this.flashColor(this.color.mouth.teeth[1])[0],this.flashColor(this.color.mouth.teeth[1])[1],this.flashColor(this.color.mouth.teeth[1])[2],this.fade)
                    this.layer.rect(lsin(this.anim.direction)*(this.parts.minor-2),this.parts.mouth-this.anim.mouth.y*(0.5+lcos(this.anim.direction)*0.5)*0.5+1,lcos(this.anim.direction)*2,2)
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.glasses&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.color.glasses[1][0],this.color.glasses[1][1],this.color.glasses[1][2],this.fade*this.fades.glasses/5)
                    this.layer.stroke(this.color.glasses[0][0],this.color.glasses[0][1],this.color.glasses[0][2],this.fade*this.fades.glasses)
                    this.layer.strokeWeight(1)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*-5,-78.5,6*lcos(this.anim.direction),3)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*5,-78.5,6*lcos(this.anim.direction),3)
                    this.layer.line(lsin(this.anim.direction)*15+lcos(this.anim.direction)*2,-78.5,lsin(this.anim.direction)*15-lcos(this.anim.direction)*2,-78.5)
                }
            break
            case 'Daiyousei':
                this.layer.translate(0,-15)
                this.layer.scale(0.8)
                if(this.trigger.display.wing&&lcos(this.anim.direction)>0.1){
                    this.layer.push()
                    this.layer.translate(-6*lsin(this.anim.direction),0)
                    for(let a=0,la=2;a<la;a++){
                        let mult=lcos(this.anim.direction)*(lcos(this.time*2)*0.15+0.7+lcos(this.anim.direction-60+a*120)*0.3)
                        this.layer.noStroke()
                        this.layer.fill(this.flashColor(this.color.wing.back)[0],this.flashColor(this.color.wing.back)[1],this.flashColor(this.color.wing.back)[2],this.fade*this.fades.wing)
                        this.layer.beginShape()
                        this.layer.vertex(0,-37)
                        this.layer.vertex(-10*mult,-37)
                        this.layer.bezierVertex(-15*mult,-42,-12*mult,-54,-28*mult,-54)
                        this.layer.vertex(-30*mult,-54)
                        this.layer.bezierVertex(-25*mult,-50,-25*mult,-34,-15*mult,-34)
                        this.layer.vertex(0,-34)
                        this.layer.endShape()
                        this.layer.noFill()
                        this.layer.stroke(this.flashColor(this.color.wing.front)[0],this.flashColor(this.color.wing.front)[1],this.flashColor(this.color.wing.front)[2],this.fade*this.fades.wing)
                        this.layer.strokeWeight(1)
                        this.layer.beginShape()
                        this.layer.vertex(0,-37)
                        this.layer.vertex(-10*mult,-37)
                        this.layer.bezierVertex(-15*mult,-42,-12*mult,-54,-28*mult,-54)
                        this.layer.vertex(-29.5*mult,-54)
                        this.layer.endShape()
                        this.layer.strokeWeight(0.75)
                        this.layer.beginShape()
                        this.layer.vertex(0*mult,-37)
                        this.layer.vertex(-10*mult,-37)
                        this.layer.bezierVertex(-16*mult,-40,-15*mult,-48,-19*mult,-48)
                        this.layer.endShape()
                        this.layer.scale(-1,1)
                    }
                    this.layer.pop()
                }
                if(this.trigger.display.flower[0]&&this.fades.flower[0]>0&&lcos(this.spin.flower[0]+this.anim.head)<0){
                    this.layer.image(graphics.minor[36],lsin(this.spin.flower[0]+this.anim.head)*18-15*this.fade*this.fades.flower[0]*lcos(this.spin.flower[0]+this.anim.head),this.parts.flowerLevel[0]-15*this.fade*this.fades.flower[0],30*this.fade*this.fades.flower[0]*lcos(this.spin.flower[0]+this.anim.head),30*this.fade*this.fades.flower[0])
                }
                if(this.trigger.display.hair.back){
                    this.layer.image(graphics.combatant[6].sprites.hair.back[this.sprites.spinDetail],-20*this.fade,-72-20*this.fade,40*this.fade,60*this.fade)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(0,g)
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(this.color.skin.body[0],this.color.skin.body[1],this.color.skin.body[2],this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-44,9,28)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(0,g)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                let color=this.flashColor(upColor(this.color.skin.legs,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(0,g)
                        }
                    }
                }
                if(this.trigger.display.dress.main){
                    this.layer.noStroke()
                    this.layer.fill(this.color.dress.under[0],this.color.dress.under[1],this.color.dress.under[2],this.fade*this.fades.dress.main)
                    this.layer.arc(0,-49,9.5+2.5*abs(lcos(this.anim.direction)),11,-180,0)
                    this.layer.fill(this.color.dress.over[0],this.color.dress.over[1],this.color.dress.over[2],this.fade*this.fades.dress.main)
                    this.layer.quad(-5,-49,5,-49,6,-35,-6,-35)
                    this.layer.quad(-6,-36,6,-36,10,-24,-10,-24)
                    for(let a=0,la=4;a<la;a++){
                        let dir=[-153,-27,27,153][a]
                        if(lcos(this.anim.direction+dir)>0){
                            this.layer.quad(
                                lsin(this.anim.direction+dir)*5-(lcos(this.anim.direction+dir)*0.8+0.2)*0.9,-48.5,
                                lsin(this.anim.direction+dir)*5+(lcos(this.anim.direction+dir)*0.8+0.2)*0.9,-48.5,
                                lsin(this.anim.direction+dir)*3+(lcos(this.anim.direction+dir)*0.8+0.2)*0.6,-54.5,
                                lsin(this.anim.direction+dir)*3-(lcos(this.anim.direction+dir)*0.8+0.2)*0.6,-54.5)
                        }
                    }
                    for(let a=0,la=10;a<la;a++){
                        if(lcos(a/la*360+this.anim.direction)>0){
                            this.layer.arc(9.7*lsin(a/la*360+this.anim.direction),-24.25,6*lcos(a/la*360+this.anim.direction),2,0,180)
                        }
                    }
                    if(lcos(this.anim.direction)>0.1){
                        this.layer.fill(this.color.dress.tie[0],this.color.dress.tie[1],this.color.dress.tie[2],this.fade*this.fades.dress.main)
                        regPoly(this.layer,lsin(this.anim.direction)*4,-53,6,2*lcos(this.anim.direction),1.5,0)
                        pentagon(this.layer,
                            lsin(this.anim.direction)*4-lcos(this.anim.direction)*0.5,-53,
                            lsin(this.anim.direction)*4+lcos(this.anim.direction)*0.5,-53,
                            lsin(this.anim.direction)*5.2+lcos(this.anim.direction)*1.2,-47,
                            lsin(this.anim.direction)*5.4,-46,
                            lsin(this.anim.direction)*5.2-lcos(this.anim.direction)*1.2,-47
                        )
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.4){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(0,g)
                        }
                    }
                }
                if(this.trigger.display.skin.head){
                    let base=this.flashColor(this.color.skin.head)
                    this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-72,30,30)
                }
                if(this.trigger.display.skin.blush){
                    this.layer.fill(...this.flashColor(this.color.skin.blush),this.fade*this.fades.skin.blush*0.2)
                    for(let g=0;g<2;g++){
                        if(lcos(this.spin.blush[g]+this.anim.direction)>0){
                            this.layer.push()
                            this.layer.translate(13.5*lsin(this.spin.blush[g]+this.anim.direction),this.parts.blush)
                            this.layer.rotate(30*lsin(this.spin.blush[g]+this.anim.direction))
                            this.layer.ellipse(0,0,5*lcos(this.spin.blush[g]+this.anim.direction),4)
                            this.layer.ellipse(0,0,3.75*lcos(this.spin.blush[g]+this.anim.direction),3)
                            this.layer.ellipse(0,0,2.5*lcos(this.spin.blush[g]+this.anim.direction),2)
                            this.layer.ellipse(0,0,1.25*lcos(this.spin.blush[g]+this.anim.direction),1)
                            this.layer.pop()
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0){
                    this.minorDisplayGeneral(1,0)
                }
                if(this.trigger.display.hair.front){
                    this.layer.image(graphics.combatant[6].sprites.hair.front[this.sprites.spinDetail],-20*this.fade,-72-20*this.fade,40*this.fade,60*this.fade)
                }
                if(this.trigger.display.hair.glow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.hair.glow[0],this.color.hair.glow[1],this.color.hair.glow[2],this.fade/4)
                    for(let g=0;g<6;g++){
                        this.layer.strokeWeight((3-g/2)*this.fade)
                        this.layer.arc(0,-72,30+g,30+g,-72+g*6,-12-g*6)
                    }
                }
                if(this.trigger.display.flower[0]&&this.fades.flower[0]>0&&lcos(this.spin.flower[0]+this.anim.head)>0){
                    this.layer.image(graphics.minor[36],lsin(this.spin.flower[0]+this.anim.head)*18-15*this.fade*this.fades.flower[0]*lcos(this.spin.flower[0]+this.anim.head),this.parts.flowerLevel[0]-15*this.fade*this.fades.flower[0],30*this.fade*this.fades.flower[0]*lcos(this.spin.flower[0]+this.anim.head),30*this.fade*this.fades.flower[0])
                }
                if(this.trigger.display.wing&&lcos(this.anim.direction)<0.1){
                    this.layer.push()
                    this.layer.translate(-6*lsin(this.anim.direction),0)
                    for(let a=0,la=2;a<la;a++){
                        let mult=lcos(this.anim.direction)*(lcos(this.time*2)*0.15+0.7+lcos(this.anim.direction-60+a*120)*0.3)
                        this.layer.noStroke()
                        this.layer.fill(this.flashColor(this.color.wing.back)[0],this.flashColor(this.color.wing.back)[1],this.flashColor(this.color.wing.back)[2],this.fade*this.fades.wing)
                        this.layer.beginShape()
                        this.layer.vertex(0,-37)
                        this.layer.vertex(-10*mult,-37)
                        this.layer.bezierVertex(-15*mult,-42,-12*mult,-54,-28*mult,-54)
                        this.layer.vertex(-30*mult,-54)
                        this.layer.bezierVertex(-25*mult,-50,-25*mult,-34,-15*mult,-34)
                        this.layer.vertex(0,-34)
                        this.layer.endShape()
                        this.layer.noFill()
                        this.layer.stroke(this.flashColor(this.color.wing.front)[0],this.flashColor(this.color.wing.front)[1],this.flashColor(this.color.wing.front)[2],this.fade*this.fades.wing)
                        this.layer.strokeWeight(1)
                        this.layer.beginShape()
                        this.layer.vertex(0,-37)
                        this.layer.vertex(-10*mult,-37)
                        this.layer.bezierVertex(-15*mult,-42,-12*mult,-54,-28*mult,-54)
                        this.layer.vertex(-29.5*mult,-54)
                        this.layer.endShape()
                        this.layer.strokeWeight(0.75)
                        this.layer.beginShape()
                        this.layer.vertex(0*mult,-37)
                        this.layer.vertex(-10*mult,-37)
                        this.layer.bezierVertex(-16*mult,-40,-15*mult,-48,-19*mult,-48)
                        this.layer.endShape()
                        this.layer.scale(-1,1)
                    }
                    this.layer.pop()
                }
                this.layer.scale(1.25)
                this.layer.translate(0,15)
            break
            case 'Sanae':
                if(this.trigger.display.hair.back){
                    this.layer.image(graphics.combatant[7].sprites.hair.back[this.sprites.spinDetailHead],-25*this.fade,-78-20*this.fade,50*this.fade,100*this.fade)
                }
                if(this.trigger.display.hair.tail&&lcos(this.spin.tail+this.anim.direction)<=0){
                    this.layer.image(graphics.combatant[7].sprites.hair.tail[this.sprites.spinDetailHead],lsin(this.spin.tail+this.anim.direction)*14.5-10*this.fade,-50-25*this.fade,20*this.fade,50*this.fade)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(1,g)
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-47.5,11.5,32.5)
                }
                if(this.trigger.display.skin.button){
                    if(lcos(this.spin.button+this.anim.direction)>0){
                        this.layer.noStroke()
                        this.layer.fill(...this.flashColor(this.color.skin.button),this.fade*this.fades.skin.button)
                        this.layer.ellipse(lsin(this.spin.button+this.anim.direction)*5.2,-42,1*lcos(this.spin.button+this.anim.direction),2)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(1,g)
                        }
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.shoe){
                                let color=this.flashColor(upColor(this.color.shoe,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.fill(...color,this.fade*this.fades.shoe)
                                this.layer.noStroke()
                                this.layer.ellipse(this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y+1,5.5,3.75)
                            }
                            if(this.trigger.display.skin.legs){
                                let color=this.flashColor(upColor(this.color.skin.legs,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                            if(this.trigger.display.sock){
                                let color=this.flashColor(upColor(this.color.sock,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.sock)
                                this.layer.strokeWeight(4)
                                this.layer.strokeCap(SQUARE)
                                this.layer.line(this.graphics.legs[h].middle.x*0.9+this.graphics.legs[h].bottom.x*0.1,this.graphics.legs[h].middle.y*0.9+this.graphics.legs[h].bottom.y*0.1,this.graphics.legs[h].middle.x*0.2+this.graphics.legs[h].bottom.x*0.8,this.graphics.legs[h].middle.y*0.2+this.graphics.legs[h].bottom.y*0.8)
                                this.layer.strokeCap(ROUND)
                                this.layer.line(this.graphics.legs[h].middle.x*0.2+this.graphics.legs[h].bottom.x*0.8,this.graphics.legs[h].middle.y*0.2+this.graphics.legs[h].bottom.y*0.8,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                            if(this.trigger.display.shoe){
                                let color=this.flashColor(upColor(this.color.shoe,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.fill(...color,this.fade*this.fades.shoe)
                                this.layer.noStroke()
                                this.layer.ellipse(this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y+1.25,5.5,2.25)
                            }
                        }
                    }
                }
                if(this.trigger.display.dress.main){
                    this.layer.noStroke()
                    let color=[this.flashColor(upColor(this.color.dress.highlight,-20,[1,1,1]))]
                    this.layer.fill(...color,this.fade*this.fades.dress.main)
                    for(let a=0,la=18;a<la;a++){
                        if(lcos(a/la*360+this.anim.direction)>0){
                            this.layer.arc(15.7*lsin((a+0.5)/la*360+this.anim.direction),-23.25+1.5*lcos((a+0.5)/la*360+this.anim.direction),6*lcos((a+0.5)/la*360+this.anim.direction),3,0,180)
                        }
                    }
                    this.layer.fill(this.flashColor(this.color.dress.main)[0],this.flashColor(this.color.dress.main)[1],this.flashColor(this.color.dress.main)[2],this.fade*this.fades.dress.main)
                    this.layer.quad(-6,-43,6,-43,16,-23,-16,-23)
                    this.layer.ellipse(0,-23,32,3)
                    for(let a=0,la=18;a<la;a++){
                        if(lcos(a/la*360+this.anim.direction)>0){
                            this.layer.arc(15.7*lsin(a/la*360+this.anim.direction),-23.25+1.5*lcos(a/la*360+this.anim.direction),6*lcos(a/la*360+this.anim.direction),1,0,180)
                        }
                    }
                    this.layer.stroke(this.flashColor(this.color.dress.dot)[0],this.flashColor(this.color.dress.dot)[1],this.flashColor(this.color.dress.dot)[2],this.fade*this.fades.dress.main)
                    for(let a=0,la=18;a<la;a++){
                        for(let b=0,lb=5;b<lb;b++){
                            let dir=(a+b%2*0.5)/la*360+this.anim.direction
                            if(lcos(dir)>0){
                                if(a%2==b%2){
                                    this.layer.strokeWeight(0.2+0.2*lcos(dir))
                                    this.layer.line(
                                        (15.5-9*(b+0.5)/lb)*lsin(dir),-25-b*3.6+(1.5-0.9*(b+0.5)/lb)*lcos(dir),
                                        (15.5-9*(b+0.5)/lb)*lsin(dir)+1*(a%2*2-1)*lcos(dir),-25-b*3.6+(1.5-0.9*(b+0.5)/lb)*lcos(dir)+1)
                                    this.layer.line(
                                        (15.5-9*(b+0.5)/lb)*lsin(dir)-0.6*(a%2*2-1)*lcos(dir),-25-b*3.6+(1.5-0.9*(b+0.5)/lb)*lcos(dir)+0.6,
                                        (15.5-9*(b+0.5)/lb)*lsin(dir)-1.6*(a%2*2-1)*lcos(dir),-25-b*3.6+(1.5-0.9*(b+0.5)/lb)*lcos(dir)-0.4)
                                    this.layer.line(
                                        (15.5-9*(b+0.5)/lb)*lsin(dir)+0.6*(a%2*2-1)*lcos(dir),-25-b*3.6+(1.5-0.9*(b+0.5)/lb)*lcos(dir)-0.6,
                                        (15.5-9*(b+0.5)/lb)*lsin(dir)-0.4*(a%2*2-1)*lcos(dir),-25-b*3.6+(1.5-0.9*(b+0.5)/lb)*lcos(dir)-1.6)
                                }else{
                                    this.layer.strokeWeight(0.4)
                                    this.layer.point((15.5-9*(b+0.5)/lb)*lsin(dir),-25-b*3.6+(1.5-0.9*(b+0.5)/lb)*lcos(dir))
                                }
                            }
                        }
                    }
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.dress.highlight)[0],this.flashColor(this.color.dress.highlight)[1],this.flashColor(this.color.dress.highlight)[2],this.fade*this.fades.dress.main)
                    this.layer.arc(0,-43,12,43,-180,0)
                    this.layer.ellipse(0,-43,12,1)
                    controlSpin(this.dress.flaps)
                    displayTrianglesFront(this.layer,this.dress.flaps,this.anim.direction,-43,12,0,0.4,this.color.dress.highlight,this.fade*this.fades.dress.main)
                    this.layer.stroke(this.flashColor(this.color.dress.main)[0],this.flashColor(this.color.dress.main)[1],this.flashColor(this.color.dress.main)[2],this.fade*this.fades.dress.main)
                    this.layer.strokeWeight(0.6*lcos(this.anim.direction))
                    if(lcos(this.anim.direction-6)>0){
                        this.layer.line(6*lsin(this.anim.direction-6),-42,3*lsin(this.anim.direction-12),-61)
                    }
                    if(lcos(this.anim.direction+6)>0){
                        this.layer.line(6*lsin(this.anim.direction+6),-42,3*lsin(this.anim.direction+12),-61)
                    }
                    controlSpin(this.dress.top)
                    displayTrianglesFront(this.layer,this.dress.top,this.anim.direction,-61,6,0.5,0.6,this.flashColor(this.color.dress.main),this.fade*this.fades.dress.main)
                    displayTrianglesFront(this.layer,this.dress.top,this.anim.direction,-61.5,6,0,0.6,this.flashColor(this.color.dress.highlight),this.fade*this.fades.dress.main)
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-63,4,2)
                }   
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6)&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(1,g)
                        }
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-78,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3&&lcos(this.spin.arms[g].top+this.anim.direction)<=0.4)&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(1,g)
                        }
                    }else if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3&&lcos(this.spin.arms[g].top+this.anim.direction)<=0.4){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.trigger.display.dress.sleeve){
                            this.minorDisplay(2,g)
                        }
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.hair.tail&&lcos(this.spin.tail+this.anim.direction)>0){
                    this.layer.image(graphics.combatant[7].sprites.hair.tail[this.sprites.spinDetailHead],lsin(this.spin.tail+this.anim.direction)*14.5-10*this.fade,-50-25*this.fade,20*this.fade,50*this.fade)
                }
                if(this.trigger.display.hair.front){
                    this.layer.image(graphics.combatant[7].sprites.hair.front[this.sprites.spinDetailHead],-25*this.fade,-78-20*this.fade,50*this.fade,100*this.fade)
                }
                if(this.trigger.display.hair.glow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.hair.glow[0],this.color.hair.glow[1],this.color.hair.glow[2],this.fade/4)
                    for(let g=0;g<6;g++){
                        this.layer.strokeWeight((3-g/2)*this.fade)
                        this.layer.arc(0,-78,30+g,30+g,-72+g*6,-12-g*6)
                    }
                }
                if(this.trigger.display.hair.pin){
                    this.layer.noStroke()
                    if(lcos(this.anim.direction+this.spin.hair.pin)>0){
                        this.layer.push()
                        this.layer.translate(lsin(this.anim.direction+this.spin.hair.pin)*14,-83.75)
                        this.layer.rotate(lsin(this.anim.direction+this.spin.hair.pin)*-30)
                        this.layer.scale(lcos(this.anim.direction+this.spin.hair.pin)**0.25,1)
                        this.layer.fill(this.color.hair.pin[1][0],this.color.hair.pin[1][1],this.color.hair.pin[1][2],this.fade*this.fades.hair.pin)
                        this.layer.ellipse(0,0,7,4.5)
                        this.layer.fill(this.color.hair.pin[0][0],this.color.hair.pin[0][1],this.color.hair.pin[0][2],this.fade*this.fades.hair.pin)
                        this.layer.arc(0,0,8,5,-195,15)
                        this.layer.ellipse(-2.5,-2,3,2)
                        this.layer.ellipse(2.5,-2,3,2)
                        this.layer.fill(this.color.hair.pin[2][0],this.color.hair.pin[2][1],this.color.hair.pin[2][2],this.fade*this.fades.hair.pin)
                        this.layer.arc(-2.5,-2,1.5,1,-195,-15)
                        this.layer.arc(2.5,-2,1.5,1,-165,15)
                        this.layer.pop()
                    }
                }
            break
            case 'Shinmyoumaru':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-48,13,39)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-81,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Ume':
                if(this.trigger.display.hair.pin){
                    this.layer.noStroke()
                    for(let g=0;g<2;g++){
                        if(lcos(this.anim.direction+this.spin.hair.pin[g])<=0){
                            this.layer.push()
                            this.layer.translate(lsin(this.anim.direction+this.spin.hair.pin[g])*14,-83.75)
                            this.layer.rotate(lsin(this.anim.direction+this.spin.hair.pin[g])*-30)
                            this.layer.scale(lcos(this.anim.direction+this.spin.hair.pin[g])*0.95+0.05,1)
                            this.layer.fill(this.color.hair.pin[0][0],this.color.hair.pin[0][1],this.color.hair.pin[0][2],this.fade*this.fades.hair.pin)
                            this.layer.ellipse(0,0,4,3)
                            this.layer.ellipse(-1,-2.5,1,4)
                            this.layer.ellipse(1,-2.5,1,4)
                            this.layer.fill(this.color.hair.pin[1][0],this.color.hair.pin[1][1],this.color.hair.pin[1][2],this.fade*this.fades.hair.pin)
                            this.layer.ellipse(-1,-2.5,0.4,2.4)
                            this.layer.ellipse(1,-2.5,0.4,2.4)
                            this.layer.stroke(this.color.hair.pin[2][0],this.color.hair.pin[2][1],this.color.hair.pin[2][2],this.fade*this.fades.hair.pin)
                            this.layer.noFill()
                            this.layer.strokeWeight(0.4)
                            this.layer.point(-0.45,-0.4)
                            this.layer.point(0.45,-0.4)
                            this.layer.strokeWeight(0.2)
                            if(this.trigger.display.extra.damage){
                                this.layer.arc(0,1,1.6,1,-150,-30)
                            }else{
                                this.layer.arc(0,0,1.6,1,30,150)
                            }
                            this.layer.line(-1.1,-0.25,-1.5,-0.35)
                            this.layer.line(-1.1,0.25,-1.5,0.35)
                            this.layer.line(1.1,-0.25,1.5,-0.35)
                            this.layer.line(1.1,0.25,1.5,0.35)
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.hair.back){
                    this.layer.image(graphics.combatant[20].sprites.hair.back[this.sprites.spinDetailHead],-20*this.fade,-75-20*this.fade,40*this.fade,60*this.fade)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<=0.6&&g==0){
                        this.minorDisplay(-1,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.wrap.sleeve&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.strokeJoin(ROUND)
                        this.layer.strokeWeight(0.4)
                        this.layer.fill(this.color.wrap.sleeveIn[0],this.color.wrap.sleeveIn[1],this.color.wrap.sleeveIn[2],this.fade*this.fades.wrap.sleeve)
                        this.layer.stroke(this.color.wrap.sleeveOut[0],this.color.wrap.sleeveOut[1],this.color.wrap.sleeveOut[2],this.fade*this.fades.wrap.sleeve)
                        this.calc.int=[
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.135-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*3/8,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.135-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*3/8,
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.15-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/2,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.15-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/2
                        ]
                        if(!(this.anim.direction*(g*2-1)+this.spin.arms[g].lock>-150&&this.anim.direction*(g*2-1)+this.spin.arms[g].lock<150&&(lcos(this.spin.wrap.center+this.anim.direction)>=0||lcos(90*(g*2-1)+this.anim.direction)>=0))){
                            this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.parts.kimono.main+10*this.fades.kimono.main.front.y)
                        }
                        if(!((this.anim.direction*(g*2-1)+this.spin.arms[g].lock<-50||this.anim.direction*(g*2-1)+this.spin.arms[g].lock>50)&&(lcos(this.spin.wrap.center+this.anim.direction)<0||lcos(90*(g*2-1)+this.anim.direction)>=0))){
                            this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*-6.6*this.fades.kimono.main.front.x,this.parts.kimono.main+10*this.fades.kimono.main.front.y)
                        }
                    }
                    if(this.trigger.display.sleeve&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.6){
                        this.layer.noStroke()
                        for(let h=0,lh=10;h<lh;h++){
                            this.layer.fill(mergeColor(this.color.sleeve.back,this.color.sleeve.front,h/lh),this.fade*this.fades.sleeve)
                            this.layer.quad(
                                this.graphics.arms[g].top.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.15*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*3/8,
                                this.graphics.arms[g].top.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.15*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*3/8,
                                this.graphics.arms[g].top.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.15*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*3/8,
                                this.graphics.arms[g].top.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.15*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*3/8,
                                this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))
                            )
                            this.layer.push()
                            this.layer.translate(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                            this.layer.rotate(atan2(this.graphics.arms[g].middle.x-this.graphics.arms[g].top.x,this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y))
                            let i=0.36*(1-h/lh)*(g*2-1)*sqrt((this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)**2+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)**2)
                            this.layer.arc(0,0,i,i,-180,0)
                            this.layer.pop()
                            if(this.trigger.display.extra.damage){
                                this.layer.beginShape()
                                this.layer.vertex(this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.34375,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.34375)
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.5,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.5)
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.34375,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.34375)
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.5,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.5)
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.34375,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.34375)
                                this.layer.endShape()
                            }else{
                                this.layer.quad(
                                    this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/8,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/8,
                                    this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/8,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/8
                                )
                            }
                        }
                    }
                }
                if(this.trigger.display.wrap.bow&&lcos(this.spin.wrap.bow+this.anim.direction)<=0){
                    this.layer.strokeJoin(ROUND)
                    this.layer.strokeWeight(0.4)
                    this.layer.fill(this.color.wrap.bow.in[0],this.color.wrap.bow.in[1],this.color.wrap.bow.in[2],this.fade*this.fades.wrap.bow)
                    this.layer.stroke(this.color.wrap.bow.out[0],this.color.wrap.bow.out[1],this.color.wrap.bow.out[2],this.fade*this.fades.wrap.bow)
                    this.calc.int=[this.parts.kimono.main+(this.parts.wrap.bow-this.parts.kimono.main)*this.fades.kimono.main.front.y]
                    if(this.trigger.display.extra.damage){
                        this.layer.quad(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.9*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*2.25,this.calc.int[0]+1.25,lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*2.25,this.calc.int[0]-1.25)
                        this.layer.quad(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.9*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*2.25,this.calc.int[0]+1.25,lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*2.25,this.calc.int[0]-1.25)
                    }else{
                        this.layer.triangle(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.9*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0]+2,lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0]-2)
                        this.layer.triangle(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.9*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0]+2,lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0]-2)
                    }
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*2.4,this.calc.int[0]+0.5)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*2.4,this.calc.int[0]+0.5)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.4*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*2.4,this.calc.int[0]-0.5)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.4*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*2.4,this.calc.int[0]-0.5)
                    this.layer.strokeJoin(MITER)
                }
                if(this.trigger.display.kimono.bow&&lcos(this.anim.direction+this.spin.bow.center)<=0){
                    this.layer.noFill()
                    this.layer.stroke(this.color.kimono.bow[0],this.color.kimono.bow[1],this.color.kimono.bow[2],this.fade*this.fades.kimono.bow)
                    this.layer.push()
                    this.layer.translate(lsin(this.anim.direction+this.spin.bow.center)*7,this.parts.kimono.bow)
                    this.layer.scale(lcos(this.anim.direction+this.spin.bow.center),1)
                    this.layer.strokeWeight(0.45)
                    this.layer.arc(0,2.5,1.6,5,-180,0)
                    this.layer.strokeWeight(0.3)
                    if(this.trigger.display.extra.damage){
                        this.layer.arc(-0.8,4.5,1,4,-120,-60)
                        this.layer.arc(0.8,4.5,1,4,-120,-60)
                        this.layer.line(-0.8,2.5,-0.8,4)
                        this.layer.line(0.8,2.5,0.8,4)
                    }else{
                        this.layer.arc(-0.8,4.5,1,4,-180,0)
                        this.layer.arc(0.8,4.5,1,4,-180,0)
                        this.layer.line(-0.8,2.5,-0.8,5)
                        this.layer.line(0.8,2.5,0.8,5)
                    }
                    this.layer.rotate(12)
                    if(!this.trigger.display.extra.damage){
                        this.layer.ellipse(-1.2,-1.2,2.4,2.4)
                        this.layer.ellipse(-1.2,1.2,2.4,2.4)
                        this.layer.ellipse(1.2,-1.2,2.4,2.4)
                        this.layer.ellipse(1.2,1.2,2.4,2.4)
                    }
                    this.layer.rotate(30)
                    this.layer.ellipse(-0.8,-0.8,1.6,1.6)
                    this.layer.ellipse(-0.8,0.8,1.6,1.6)
                    this.layer.ellipse(0.8,-0.8,1.6,1.6)
                    this.layer.ellipse(0.8,0.8,1.6,1.6)
                    this.layer.pop()
                }
                if(this.trigger.display.kimono.main.back){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[20].sprites.kimono.mainDamage.back[this.sprites.spinDetail],-20*this.fade*this.fades.kimono.main.front.x,this.parts.kimono.main-15*this.fades.kimono.main.front.y,40*this.fade*this.fades.kimono.main.front.x,66*this.fade*this.fades.kimono.main.front.y)
                    }else{
                        this.layer.image(graphics.combatant[20].sprites.kimono.main.back[this.sprites.spinDetail],-20*this.fade*this.fades.kimono.main.back.x,this.parts.kimono.main-15*this.fades.kimono.main.back.y,40*this.fade*this.fades.kimono.main.back.x,66*this.fade*this.fades.kimono.main.back.y)
                    }
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[0]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,-lcos(this.spin.under.under.button[0]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.75,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[1]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,-lcos(this.spin.under.under.button[1]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.75,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[0]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,-lcos(this.spin.under.under.top[0]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[0]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[0]+this.anim.direction)*3.5+2.5,6)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[1]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,-lcos(this.spin.under.under.top[1]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[1]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[1]+this.anim.direction)*3.5+2.5,6)
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-46,11,30)
                }
                if(this.trigger.display.skin.button){
                    if(lcos(this.spin.button+this.anim.direction)>0){
                        this.layer.noStroke()
                        this.layer.fill(...this.flashColor(this.color.skin.button),this.fade*this.fades.skin.button)
                        this.layer.ellipse(lsin(this.spin.button+this.anim.direction)*5.2,-42,1*lcos(this.spin.button+this.anim.direction),2)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6&&g==0){
                        this.minorDisplay(-1,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.wrap.sleeve&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.strokeJoin(ROUND)
                        this.layer.strokeWeight(0.4)
                        this.layer.fill(this.color.wrap.sleeveIn[0],this.color.wrap.sleeveIn[1],this.color.wrap.sleeveIn[2],this.fade*this.fades.wrap.sleeve)
                        this.layer.stroke(this.color.wrap.sleeveOut[0],this.color.wrap.sleeveOut[1],this.color.wrap.sleeveOut[2],this.fade*this.fades.wrap.sleeve)
                        this.calc.int=[
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.135-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*3/8,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.135-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*3/8,
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.15-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/2,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.15-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/2
                        ]
                        if(!(this.anim.direction*(g*2-1)+this.spin.arms[g].lock>-150&&this.anim.direction*(g*2-1)+this.spin.arms[g].lock<150&&(lcos(this.spin.wrap.center+this.anim.direction)>=0||lcos(90*(g*2-1)+this.anim.direction)>=0))){
                            this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.parts.kimono.main+10*this.fades.kimono.main.front.y)
                        }
                        if(!((this.anim.direction*(g*2-1)+this.spin.arms[g].lock<-50||this.anim.direction*(g*2-1)+this.spin.arms[g].lock>50)&&(lcos(this.spin.wrap.center+this.anim.direction)<0||lcos(90*(g*2-1)+this.anim.direction)>=0))){
                            this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*-6.6*this.fades.kimono.main.front.x,this.parts.kimono.main+10*this.fades.kimono.main.front.y)
                        }
                    }
                    if(this.trigger.display.sleeve&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.6){
                        this.layer.noStroke()
                        for(let h=0,lh=10;h<lh;h++){
                            this.layer.fill(mergeColor(this.color.sleeve.back,this.color.sleeve.front,h/lh),this.fade*this.fades.sleeve)
                            this.layer.quad(
                                this.graphics.arms[g].top.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.15*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*3/8,
                                this.graphics.arms[g].top.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.15*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*3/8,
                                this.graphics.arms[g].top.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.15*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*3/8,
                                this.graphics.arms[g].top.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.15*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*3/8,
                                this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))
                            )
                            this.layer.push()
                            this.layer.translate(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                            this.layer.rotate(atan2(this.graphics.arms[g].middle.x-this.graphics.arms[g].top.x,this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y))
                            let i=0.36*(1-h/lh)*(g*2-1)*sqrt((this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)**2+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)**2)
                            this.layer.arc(0,0,i,i,-180,0)
                            this.layer.pop()
                            if(this.trigger.display.extra.damage){
                                this.layer.beginShape()
                                this.layer.vertex(this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.34375,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.34375)
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.5,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.5)
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.34375,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.34375)
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.5,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.5)
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.34375,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.34375)
                                this.layer.endShape()
                            }else{
                                this.layer.quad(
                                    this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/8,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/8,
                                    this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/8,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/8
                                )
                            }
                        }
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.fades.sandal.back[h]>0&&this.trigger.display.sandal.back[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.back.x,this.graphics.legs[h].sandal.back.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                if(this.trigger.display.extra.damage){
                                    this.layer.image(graphics.minor[20+h],-4*this.fades.sandal.back[h]*this.fade,-4*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade)
                                }else{
                                    this.layer.image(graphics.minor[19],-4*this.fades.sandal.back[h]*this.fade,-4*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade,8*this.fades.sandal.back[h]*this.fade)
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.back.x,-this.graphics.legs[h].sandal.back.y-1.5)
                            }
                            if(this.fades.sandal.front[h]>0&&this.trigger.display.sandal.front[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.front.x,this.graphics.legs[h].sandal.front.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                for(let i=0;i<2;i++){
                                    if((lcos(this.anim.direction+65*(i*2-1)-this.spin.sandal[h])<=0.2&&this.trigger.display.mode.sandal.edge==0||i%2!=h&&this.trigger.display.mode.sandal.edge==1)){
                                        this.layer.image(graphics.minor[22+i],-4*this.fades.sandal.front[h]*this.fade,-4*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade)
                                    }
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.front.x,-this.graphics.legs[h].sandal.front.y-1.5)
                            }
                            if(this.trigger.display.skin.legs){
                                let color=this.flashColor(upColor(this.color.skin.legs,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                            if(this.fades.sandal.front[h]>0&&this.trigger.display.sandal.front[h]){
                                this.layer.translate(this.graphics.legs[h].sandal.front.x,this.graphics.legs[h].sandal.front.y+1.5)
                                this.layer.scale(1.2,0.6)
                                this.layer.rotate(-this.anim.direction+this.spin.sandal[h])
                                for(let i=0;i<2;i++){
                                    if((lcos(this.anim.direction+65*(i*2-1)-this.spin.sandal[h])>0.2&&this.trigger.display.mode.sandal.edge==0||i%2==h&&this.trigger.display.mode.sandal.edge==1)){
                                        this.layer.image(graphics.minor[22+i],-4*this.fades.sandal.front[h]*this.fade,-4*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade,8*this.fades.sandal.front[h]*this.fade)
                                    }
                                }
                                this.layer.rotate(this.anim.direction-this.spin.sandal[h])
                                this.layer.scale(5/6,5/3)
                                this.layer.translate(-this.graphics.legs[h].sandal.front.x,-this.graphics.legs[h].sandal.front.y-1.5)
                            }
                        }
                    }
                }
                if(this.trigger.display.sleeveDecoration){
                    this.layer.noStroke()
                    for(let g=0,lg=this.spin.sleeve.decoration.length;g<lg;g++){
                        if(lcos(this.spin.sleeve.decoration[g].spin+this.anim.direction)>=0.2&&lcos(this.spin.arms[this.spin.sleeve.decoration[g].part].top+this.anim.direction)<=-0.3&&!(this.trigger.display.extra.damage&&this.spin.sleeve.decoration[g].length>1.5)){
                            h=this.spin.sleeve.decoration[g].part
                            this.layer.push()
                            if(this.spin.sleeve.decoration[g].length>1){
                                this.layer.translate(
                                    lerp(
                                        this.graphics.arms[h].middle.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.graphics.arms[h].bottom.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.24*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)/8,
                                        this.spin.sleeve.decoration[g].length-1
                                    )
                                    ,lerp(
                                        this.graphics.arms[h].middle.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.graphics.arms[h].bottom.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.24*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)/8,
                                        this.spin.sleeve.decoration[g].length-1
                                    ))
                                this.layer.rotate(-atan2(
                                    ((this.graphics.arms[h].middle.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))-
                                    (this.graphics.arms[h].bottom.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.24*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)/8)),
                                    ((this.graphics.arms[h].middle.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))-
                                    (this.graphics.arms[h].bottom.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.24*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)/8))
                                ))
                            }else{
                                this.layer.translate(
                                    lerp(
                                        this.graphics.arms[h].top.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*lerp(0.3*constrain(lcos(this.spin.arms[h].top+this.anim.direction),0.2,0.5),0.15,this.spin.sleeve.decoration[g].length)*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*3/8,
                                        this.graphics.arms[h].middle.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.spin.sleeve.decoration[g].length
                                    )
                                    ,lerp(
                                        this.graphics.arms[h].top.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*lerp(0.3*constrain(lcos(this.spin.arms[h].top+this.anim.direction),0.2,0.5),0.15,this.spin.sleeve.decoration[g].length)*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*3/8,
                                        this.graphics.arms[h].middle.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.spin.sleeve.decoration[g].length
                                    ))
                                this.layer.rotate(-atan2(
                                    ((this.graphics.arms[h].top.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*lerp(0.3*constrain(lcos(this.spin.arms[h].top+this.anim.direction),0.2,0.5),0.15,this.spin.sleeve.decoration[g].length)*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*3/8)-
                                    (this.graphics.arms[h].middle.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))),
                                    ((this.graphics.arms[h].top.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*lerp(0.3*constrain(lcos(this.spin.arms[h].top+this.anim.direction),0.2,0.5),0.15,this.spin.sleeve.decoration[g].length)*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*3/8)-
                                    (this.graphics.arms[h].middle.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)))
                                ))
                            }
                            this.layer.scale(lcos(this.spin.sleeve.decoration[g].spin+this.anim.direction)*1.25-0.25,1)
                            this.layer.rotate(this.spin.sleeve.decoration[g].rotate)
                            this.minorDisplay(this.spin.sleeve.decoration[g].type,0,this.layer)
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,lcos(this.spin.under.under.top[0]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[0]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[0]+this.anim.direction)*3.5+2.5,6)
                }
                if(this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[1]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,lcos(this.spin.under.under.top[1]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[1]+this.anim.direction)*4.2,-50,lcos(this.spin.under.under.top[1]+this.anim.direction)*3.5+2.5,6)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,lcos(this.spin.under.under.button[0]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.75,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[1]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.button,lcos(this.spin.under.under.button[1]+this.anim.direction)/4+0.75)),this.fade*this.fades.under.under.button)
                    this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.75,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.25)
                }
                if(this.trigger.display.under.shawl){
                    this.layer.fill(this.color.under.shawl[0],this.color.under.shawl[1],this.color.under.shawl[2],this.fade*this.fades.under.shawl)
                    this.layer.noStroke()
                    this.layer.quad(-5.25*this.anim.under.top.x,this.parts.under.top+3*this.anim.under.top.y,5.25*this.anim.under.top.x,this.parts.under.top+3*this.anim.under.top.y,6*this.anim.under.top.x,this.parts.under.top+5*this.anim.under.top.y,-6*this.anim.under.top.x,this.parts.under.top+5*this.anim.under.top.y,)
                    for(let g=0,lg=this.spin.under.shawl.length;g<lg;g++){
                        if(lcos(this.spin.under.shawl[g]+this.anim.direction)>0){
                            this.layer.arc(6*lsin(this.spin.under.shawl[g]+this.anim.direction)*this.anim.under.top.x,this.parts.under.top+5*this.anim.under.top.y,3*lcos(this.spin.under.shawl[g]+this.anim.direction)*this.anim.under.top.x,2*this.anim.under.top.y,0,180)
                        }
                    }
                }
                if(this.trigger.display.under.top){
                    this.sprites.temp=createGraphics(80,80)
                    setupLayer(this.sprites.temp)
                    this.sprites.temp.translate(40,0)
                    this.sprites.temp.noStroke()
                    this.sprites.temp.fill(...this.color.under.outside,this.fade*this.fades.under.top)
                    for(let g=0;g<2;g++){
                        if(lcos(this.spin.under.under.top[g]+this.anim.direction)){
                            if(lsin(this.spin.under.under.top[g]+this.anim.direction+27)*9-lsin(this.spin.under.under.top[g]+this.anim.direction)*6>0){
                                this.sprites.temp.arc(lsin(this.spin.under.under.top[g]+this.anim.direction)*18,70,lsin(this.spin.under.under.top[g]+this.anim.direction+27)*36-lsin(this.spin.under.under.top[g]+this.anim.direction)*24,60,-90,0)
                                this.sprites.temp.ellipse(lsin(this.spin.under.under.top[g]+this.anim.direction)*18,70,4,60)
                            }
                            if(lsin(this.spin.under.under.top[g]+this.anim.direction)*6-lsin(this.spin.under.under.top[g]+this.anim.direction-27)*9>0){
                                this.sprites.temp.arc(lsin(this.spin.under.under.top[g]+this.anim.direction)*18,70,lsin(this.spin.under.under.top[g]+this.anim.direction)*24-lsin(this.spin.under.under.top[g]+this.anim.direction-27)*36,60,-180,-90)
                                this.sprites.temp.ellipse(lsin(this.spin.under.under.top[g]+this.anim.direction)*18,70,4,60)
                            }
                        }
                    }
                    this.sprites.temp.rect(0,59,42,2)
                    this.sprites.temp.erase()
                    this.sprites.temp.rect(0,70,80,20)
                    this.layer.image(this.sprites.temp,-10*this.anim.under.top.x,this.parts.under.top-12*this.anim.under.top.y,20*this.anim.under.top.x,20*this.anim.under.top.y)
                    this.layer.noStroke()
                    this.layer.fill(...this.color.under.outside,this.fade*this.fades.under.top)
                    if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[0]+this.anim.direction)>-0.4){
                        this.layer.ellipse(lsin(this.spin.under.under.button[0]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[0]+this.anim.direction)*0.25+1,1.5)
                    }
                    if(this.trigger.display.under.under.button&&lcos(this.spin.under.under.button[1]+this.anim.direction)>-0.4){
                        this.layer.ellipse(lsin(this.spin.under.under.button[1]+this.anim.direction)*5.5,-49.5,lcos(this.spin.under.under.button[1]+this.anim.direction)*0.25+1,1.5)
                    }
                    for(let g=0;g<2;g++){
                        for(let h=0,lh=this.color.under.fringe.length;h<lh;h++){
                            this.layer.fill(this.color.under.fringe[h][0],this.color.under.fringe[h][1],this.color.under.fringe[h][2],this.fade)
                            this.layer.noStroke()
                            for(let i=0,li=this.spin.under.top[h][g].length;i<li;i++){
                                if(lcos(this.spin.under.top[h][g][i]+this.anim.direction)>0){
                                    this.layer.ellipse((5.6-h*0.2)*lsin(this.spin.under.top[h][g][i]+this.anim.direction)*this.anim.under.top.x,this.parts.under.top+(1-h*0.6)*this.anim.under.top.y,lcos(this.spin.under.top[h][g][i]+this.anim.direction)*1.5*this.anim.under.top.x,1.2*this.anim.under.top.y)
                                }
                            }
                        }
                    }
                }
                if(this.trigger.display.under.under.bottom&&lcos(this.spin.under.under.bottom[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.bottom[0],lcos(this.spin.under.under.bottom[0]+this.anim.direction))),this.fade*this.fades.under.under.bottom)
                    this.layer.beginShape()
                    this.layer.vertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[1]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*1.5,-31)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[2]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.endShape()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.bottom[1],lcos(this.spin.under.under.bottom[0]+this.anim.direction))),this.fade*this.fades.under.under.bottom)
                    this.layer.beginShape()
                    this.layer.vertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[3]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*1.5,-31)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.25,-32.5,lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.25,-32,lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.5,-33)
                    this.layer.bezierVertex(lsin(this.spin.under.under.bottom[4]*this.anim.under.under.bottom+this.anim.direction)*2.75,-34,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*2.75,-33.5,lsin(this.spin.under.under.bottom[0]+this.anim.direction)*3.5,-35)
                    this.layer.endShape()
                }
                if(this.trigger.display.under.tanga){
                    this.sprites.temp=createGraphics(40,40)
                    setupLayer(this.sprites.temp)
                    this.sprites.temp.noStroke()
                    this.sprites.temp.fill(...this.color.under.tanga,this.fade*this.fades.under.tanga)
                    if(abs(this.anim.direction)<this.spin.under.tanga){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+this.spin.under.tanga),42,0,90)
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-this.spin.under.tanga),42,90,180)
                    }else if(this.anim.direction>=this.spin.under.tanga&&this.anim.direction<(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+this.spin.under.tanga),42,0,90)
                    }else if(this.anim.direction<=-this.spin.under.tanga&&this.anim.direction>-(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-this.spin.under.tanga),42,90,180)
                    }
                    if(abs(this.anim.direction)>=(180-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-(180-this.spin.under.tanga)),42,0,90)
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+(180-this.spin.under.tanga)),42,90,180)
                    }else if(this.anim.direction>=-(180-this.spin.under.tanga)&&this.anim.direction<-(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-(180-this.spin.under.tanga)),42,0,90)
                    }else if(this.anim.direction<=(180-this.spin.under.tanga)&&this.anim.direction>(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+(180-this.spin.under.tanga)),42,90,180)
                    }
                    this.sprites.temp.erase()
                    this.sprites.temp.rect(20,6,40,11)
                    if(this.anim.direction>=this.spin.under.tanga&&this.anim.direction<(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-this.spin.under.tanga),42,0,90)
                    }else if(this.anim.direction<=-this.spin.under.tanga&&this.anim.direction>-(this.spin.under.tanga+90)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+this.spin.under.tanga),42,90,180)
                    }
                    if(this.anim.direction>=-(180-this.spin.under.tanga)&&this.anim.direction<-(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction+(180-this.spin.under.tanga)),42,0,90)
                    }else if(this.anim.direction<=(180-this.spin.under.tanga)&&this.anim.direction>(90-this.spin.under.tanga)){
                        this.sprites.temp.arc(20,2,20*lsin(this.anim.direction-(180-this.spin.under.tanga)),42,90,180)
                    }
                    this.sprites.temp.noErase()
                    this.sprites.temp.rect(20,11,18,1/this.anim.under.bottom.y)
                    if(this.anim.under.bottom.y<=0){
                        this.layer.push()
                        this.layer.translate(0,this.parts.under.bottom-6*this.anim.under.bottom.y)
                        this.layer.scale(1,-1)
                        this.layer.image(this.sprites.temp,-10*this.anim.under.bottom.x,-5,20*this.anim.under.bottom.x,20*abs(this.anim.under.bottom.y))
                        this.layer.pop()
                    }else{
                        this.layer.image(this.sprites.temp,-10*this.anim.under.bottom.x,this.parts.under.bottom-6*this.anim.under.bottom.y-5,20*this.anim.under.bottom.x,20*abs(this.anim.under.bottom.y))
                    }
                }
                if(this.trigger.display.under.bottom){
                    this.sprites.temp=createGraphics(80,90)
                    setupLayer(this.sprites.temp)
                    this.sprites.temp.scale(2)
                    this.sprites.temp.fill(...this.color.under.outside,this.fade*this.fades.under.bottom)
                    this.sprites.temp.noStroke()
                    if(abs(this.anim.direction)<this.spin.under.piece){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction+this.spin.under.piece),44,0,90)
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction-this.spin.under.piece),44,90,180)
                    }else if(this.anim.direction<180-this.spin.under.piece&&this.anim.direction>0){
                        this.sprites.temp.arc(20,2,18,44,0,90)
                    }else if(this.anim.direction>-180+this.spin.under.piece&&this.anim.direction<0){
                        this.sprites.temp.arc(20,2,18,44,90,180)
                    }
                    if(abs(this.anim.direction)>=(180-this.spin.under.piece)){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction-(180-this.spin.under.piece)),44,0,90)
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction+(180-this.spin.under.piece)),44,90,180)
                    }else if(this.anim.direction<=-this.spin.under.piece&&this.anim.direction>=-180){
                        this.sprites.temp.arc(20,2,18,44,0,90)
                    }else if(this.anim.direction>=this.spin.under.piece&&this.anim.direction<=180){
                        this.sprites.temp.arc(20,2,18,44,90,190)
                    }
                    this.sprites.temp.erase()
                    this.sprites.temp.rect(20,6,40,15)
                    if(this.anim.direction<180-this.spin.under.piece&&this.anim.direction>this.spin.under.piece){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction-this.spin.under.piece),44,0,90)
                    }else if(this.anim.direction>-180+this.spin.under.piece&&this.anim.direction<-this.spin.under.piece){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction+this.spin.under.piece),44,90,180)
                    }
                    if(this.anim.direction>-180+this.spin.under.piece&&this.anim.direction<=-this.spin.under.piece){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction-this.spin.under.piece),44,0,90)
                    }else if(this.anim.direction<180-this.spin.under.piece&&this.anim.direction>=this.spin.under.piece){
                        this.sprites.temp.arc(20,2,18*lsin(this.anim.direction+this.spin.under.piece),44,90,180)
                    }
                    this.sprites.temp.noErase()
                    if(this.anim.under.bottom.y<=0){
                        this.layer.push()
                        this.layer.translate(0,this.parts.under.bottom-7*this.anim.under.bottom.y)
                        this.layer.scale(1,-1)
                        this.layer.image(this.sprites.temp,-10*this.anim.under.bottom.x,-5,20*this.anim.under.bottom.x,22.5*abs(this.anim.under.bottom.y))
                        this.layer.pop()
                    }else{
                        this.layer.image(this.sprites.temp,-10*this.anim.under.bottom.x,this.parts.under.bottom-7*this.anim.under.bottom.y-5,20*this.anim.under.bottom.x,22.5*abs(this.anim.under.bottom.y))
                    }
                    for(let h=0,lh=this.color.under.fringe.length;h<lh;h++){
                        this.layer.fill(this.color.under.fringe[h][0],this.color.under.fringe[h][1],this.color.under.fringe[h][2],this.fade)
                        this.layer.noStroke()
                        for(let g=0,lg=this.spin.under.bottom[h].length;g<lg;g++){
                            if(lcos(this.spin.under.bottom[h][g]+this.anim.direction)>0){
                                if(h==lh-1){
                                    this.layer.arc((3.6+h*0.1)*lsin(this.spin.under.bottom[h][g]+this.anim.direction)*this.anim.under.bottom.x,this.parts.under.bottom-(3.6+h*0.4)*this.anim.under.bottom.y,lcos(this.spin.under.bottom[h][g]+this.anim.direction)*2*this.anim.under.bottom.x,1.6*this.anim.under.bottom.y,0,180)
                                }else{
                                    this.layer.ellipse((3.6+h*0.1)*lsin(this.spin.under.bottom[h][g]+this.anim.direction)*this.anim.under.bottom.x,this.parts.under.bottom-(3.6+h*0.4)*this.anim.under.bottom.y,lcos(this.spin.under.bottom[h][g]+this.anim.direction)*2*this.anim.under.bottom.x,1.6*this.anim.under.bottom.y)
                                }
                            }
                        }
                    }
                    this.layer.fill(...this.color.under.outside,this.fade*this.fades.under.bottom)
                    this.layer.noStroke()
                    this.layer.rect(0,this.parts.under.bottom-5.5,8.5,0.5/this.anim.under.bottom.y)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.under.bow.top[g]){
                        this.layer.fill(this.color.under.bow.extra[0],this.color.under.bow.extra[1],this.color.under.bow.extra[2],this.fade*this.fades.under.bow.top[g])
                        this.layer.stroke(this.color.under.bow.extra[0],this.color.under.bow.extra[1],this.color.under.bow.extra[2],this.fade*this.fades.under.bow.top[g])
                        this.layer.strokeWeight(0.3)
                        this.layer.strokeJoin(ROUND)
                        if(lcos(this.spin.underBow.top[g].center/2+this.spin.underBow.top[g].loop[0]/2+this.anim.direction)>0){
                            this.layer.triangle(
                                lsin(this.spin.underBow.top[g].center+this.anim.direction)*5*this.anim.under.bow.top[g].position.x,this.parts.under.top+this.parts.under.bow.top[g]*this.anim.under.bow.top[g].position.y,
                                lsin(this.spin.underBow.top[g].loop[0]+this.anim.direction)*5*this.anim.under.bow.top[g].position.x,this.parts.under.top+(this.parts.under.bow.top[g]-0.3)*this.anim.under.bow.top[g].position.y,
                                lsin(this.spin.underBow.top[g].loop[0]+this.anim.direction)*5*this.anim.under.bow.top[g].position.x,this.parts.under.top+(this.parts.under.bow.top[g]+0.3)*this.anim.under.bow.top[g].position.y
                            )
                        }
                        if(lcos(this.spin.underBow.top[g].center/2+this.spin.underBow.top[g].loop[1]/2+this.anim.direction)>0){
                            this.layer.triangle(
                                lsin(this.spin.underBow.top[g].center+this.anim.direction)*5*this.anim.under.bow.top[g].position.x,this.parts.under.top+this.parts.under.bow.top[g]*this.anim.under.bow.top[g].position.y,
                                lsin(this.spin.underBow.top[g].loop[1]+this.anim.direction)*5*this.anim.under.bow.top[g].position.x,this.parts.under.top+(this.parts.under.bow.top[g]-0.3)*this.anim.under.bow.top[g].position.y,
                                lsin(this.spin.underBow.top[g].loop[1]+this.anim.direction)*5*this.anim.under.bow.top[g].position.x,this.parts.under.top+(this.parts.under.bow.top[g]+0.3)*this.anim.under.bow.top[g].position.y
                            )
                        }
                        this.layer.noFill()
                        if(lcos(this.spin.underBow.top[g].center/2+this.spin.underBow.top[g].end[0]/2+this.anim.direction)>0){
                            this.layer.line(lsin(this.spin.underBow.top[g].center+this.anim.direction)*5*this.anim.under.bow.top[g].position.x,this.parts.under.top+this.parts.under.bow.top[g]*this.anim.under.bow.top[g].position.y,lsin(this.spin.underBow.top[g].end[0]*this.anim.under.bow.top[g].size.x/this.anim.under.bow.top[g].position.x+this.anim.direction)*(5*this.anim.under.bow.top[g].position.x+0.25*this.anim.under.bow.top[g].size.x),this.parts.under.top+this.parts.under.bow.top[g]*this.anim.under.bow.top[g].position.y+0.9*this.anim.under.bow.top[g].size.y)
                        }
                        if(lcos(this.spin.underBow.top[g].center/2+this.spin.underBow.top[g].end[1]/2+this.anim.direction)>0){
                            this.layer.line(lsin(this.spin.underBow.top[g].center+this.anim.direction)*5*this.anim.under.bow.top[g].position.x,this.parts.under.top+this.parts.under.bow.top[g]*this.anim.under.bow.top[g].position.y,lsin(this.spin.underBow.top[g].end[1]*this.anim.under.bow.top[g].size.x/this.anim.under.bow.top[g].position.x+this.anim.direction)*(5*this.anim.under.bow.top[g].position.x+0.25*this.anim.under.bow.top[g].size.x),this.parts.under.top+this.parts.under.bow.top[g]*this.anim.under.bow.top[g].position.y+0.9*this.anim.under.bow.top[g].size.y)
                        }
                        this.layer.strokeJoin(MITER)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.under.bow.bottom[g]){
                        this.layer.fill(this.color.under.bow.main[0],this.color.under.bow.main[1],this.color.under.bow.main[2],this.fade*this.fades.under.bow.bottom[g])
                        this.layer.stroke(this.color.under.bow.main[0],this.color.under.bow.main[1],this.color.under.bow.main[2],this.fade*this.fades.under.bow.bottom[g])
                        this.layer.strokeWeight(0.3)
                        if(lcos(this.spin.underBow.bottom[g].loop[0]+this.anim.direction)>0&&lcos(this.spin.underBow.bottom[g].center+this.anim.direction)>0){
                            this.layer.quad(
                                lsin(this.spin.underBow.bottom[g].center+this.anim.direction)*4.5*this.anim.under.bow.bottom[g].position.x,this.parts.under.bottom+this.parts.under.bow.bottom[g]*this.anim.under.bow.bottom[g].position.y,
                                lsin(this.spin.underBow.bottom[g].loop[0]/2+this.spin.underBow.bottom[g].center/2+this.anim.direction)*4.5*this.anim.under.bow.bottom[g].position.x,this.parts.under.bottom+(this.parts.under.bow.bottom[g]-0.7)*this.anim.under.bow.bottom[g].position.y,
                                lsin(this.spin.underBow.bottom[g].loop[0]+this.anim.direction)*4.5*this.anim.under.bow.bottom[g].position.x,this.parts.under.bottom+(this.parts.under.bow.bottom[g]-0.8)*this.anim.under.bow.bottom[g].position.y,
                                lsin(this.spin.underBow.bottom[g].loop[0]/2+this.spin.underBow.bottom[g].center/2+this.anim.direction)*4.5*this.anim.under.bow.bottom[g].position.x,this.parts.under.bottom+(this.parts.under.bow.bottom[g]-0.1)*this.anim.under.bow.bottom[g].position.y
                            )
                        }
                        if(lcos(this.spin.underBow.bottom[g].loop[1]+this.anim.direction)>0&&lcos(this.spin.underBow.bottom[g].center+this.anim.direction)>0){
                            this.layer.quad(
                                lsin(this.spin.underBow.bottom[g].center+this.anim.direction)*4.5*this.anim.under.bow.bottom[g].position.x,this.parts.under.bottom+this.parts.under.bow.bottom[g]*this.anim.under.bow.bottom[g].position.y,
                                lsin(this.spin.underBow.bottom[g].loop[1]/2+this.spin.underBow.bottom[g].center/2+this.anim.direction)*4.5*this.anim.under.bow.bottom[g].position.x,this.parts.under.bottom+(this.parts.under.bow.bottom[g]-0.7)*this.anim.under.bow.bottom[g].position.y,
                                lsin(this.spin.underBow.bottom[g].loop[1]+this.anim.direction)*4.5*this.anim.under.bow.bottom[g].position.x,this.parts.under.bottom+(this.parts.under.bow.bottom[g]-0.8)*this.anim.under.bow.bottom[g].position.y,
                                lsin(this.spin.underBow.bottom[g].loop[1]/2+this.spin.underBow.bottom[g].center/2+this.anim.direction)*4.5*this.anim.under.bow.bottom[g].position.x,this.parts.under.bottom+(this.parts.under.bow.bottom[g]-0.1)*this.anim.under.bow.bottom[g].position.y
                            )
                        }
                    }
                }
                if(this.trigger.display.under.bow.extra){
                    this.layer.fill(this.color.under.bow.main[0],this.color.under.bow.main[1],this.color.under.bow.main[2],this.fade*this.fades.under.bow.extra)
                    this.layer.stroke(this.color.under.bow.main[0],this.color.under.bow.main[1],this.color.under.bow.main[2],this.fade*this.fades.under.bow.extra)
                    this.layer.strokeWeight(0.3)
                    if(lcos(this.spin.underBow.extra.loop[0]+this.anim.direction)>0&&lcos(this.spin.underBow.extra.center+this.anim.direction)>0){
                        this.layer.quad(
                            lsin(this.spin.underBow.extra.center+this.anim.direction)*4.5*this.anim.under.bow.extra.position.x,this.parts.under.top+this.parts.under.bow.extra*this.anim.under.bow.extra.position.y,
                            lsin(this.spin.underBow.extra.loop[0]/2+this.spin.underBow.extra.center/2+this.anim.direction)*4.5*this.anim.under.bow.extra.position.x,this.parts.under.top+(this.parts.under.bow.extra-0.7)*this.anim.under.bow.extra.position.y,
                            lsin(this.spin.underBow.extra.loop[0]+this.anim.direction)*4.5*this.anim.under.bow.extra.position.x,this.parts.under.top+(this.parts.under.bow.extra-0.8)*this.anim.under.bow.extra.position.y,
                            lsin(this.spin.underBow.extra.loop[0]/2+this.spin.underBow.extra.center/2+this.anim.direction)*4.5*this.anim.under.bow.extra.position.x,this.parts.under.top+(this.parts.under.bow.extra-0.1)*this.anim.under.bow.extra.position.y
                        )
                    }
                    if(lcos(this.spin.underBow.extra.loop[1]+this.anim.direction)>0&&lcos(this.spin.underBow.extra.center+this.anim.direction)>0){
                        this.layer.quad(
                            lsin(this.spin.underBow.extra.center+this.anim.direction)*4.5*this.anim.under.bow.extra.position.x,this.parts.under.top+this.parts.under.bow.extra*this.anim.under.bow.extra.position.y,
                            lsin(this.spin.underBow.extra.loop[1]/2+this.spin.underBow.extra.center/2+this.anim.direction)*4.5*this.anim.under.bow.extra.position.x,this.parts.under.top+(this.parts.under.bow.extra-0.7)*this.anim.under.bow.extra.position.y,
                            lsin(this.spin.underBow.extra.loop[1]+this.anim.direction)*4.5*this.anim.under.bow.extra.position.x,this.parts.under.top+(this.parts.under.bow.extra-0.8)*this.anim.under.bow.extra.position.y,
                            lsin(this.spin.underBow.extra.loop[1]/2+this.spin.underBow.extra.center/2+this.anim.direction)*4.5*this.anim.under.bow.extra.position.x,this.parts.under.top+(this.parts.under.bow.extra-0.1)*this.anim.under.bow.extra.position.y
                        )
                    }
                }
                if(this.trigger.display.kimono.main.front){
                    if(this.trigger.display.extra.damage){
                        this.layer.image(graphics.combatant[20].sprites.kimono.mainDamage.front[this.sprites.spinDetail],-20*this.fade*this.fades.kimono.main.front.x,this.parts.kimono.main-15*this.fades.kimono.main.front.y,40*this.fade*this.fades.kimono.main.front.x,66*this.fade*this.fades.kimono.main.front.y)
                    }else{
                        this.layer.image(graphics.combatant[20].sprites.kimono.main.front[this.sprites.spinDetail],-20*this.fade*this.fades.kimono.main.front.x,this.parts.kimono.main-15*this.fades.kimono.main.front.y,40*this.fade*this.fades.kimono.main.front.x,66*this.fade*this.fades.kimono.main.front.y)
                    }
                }
                if(this.trigger.display.wrap.round){
                    this.layer.strokeJoin(ROUND)
                    this.layer.strokeWeight(0.4)
                    this.layer.fill(this.color.wrap.in[0],this.color.wrap.in[1],this.color.wrap.in[2],this.fade*this.fades.wrap.round)
                    this.layer.stroke(this.color.wrap.out[0],this.color.wrap.out[1],this.color.wrap.out[2],this.fade*this.fades.wrap.round)
                    this.layer.quad(-6.6*this.fades.kimono.main.front.x,this.parts.kimono.main+13*this.fades.kimono.main.front.y,6.6*this.fades.kimono.main.front.x,this.parts.kimono.main+13*this.fades.kimono.main.front.y,7.1*this.fades.kimono.main.front.x,this.parts.kimono.main+16*this.fades.kimono.main.front.y,-7.1*this.fades.kimono.main.front.x,this.parts.kimono.main+16*this.fades.kimono.main.front.y)
                    this.layer.quad(-7.1*this.fades.kimono.main.front.x,this.parts.kimono.main+16*this.fades.kimono.main.front.y,7.1*this.fades.kimono.main.front.x,this.parts.kimono.main+16*this.fades.kimono.main.front.y,7.6*this.fades.kimono.main.front.x,this.parts.kimono.main+19*this.fades.kimono.main.front.y,-7.6*this.fades.kimono.main.front.x,this.parts.kimono.main+19*this.fades.kimono.main.front.y)
                    this.layer.fill(this.color.wrap.decoration[0],this.color.wrap.decoration[1],this.color.wrap.decoration[2],this.fade*this.fades.wrap.round)
                    this.layer.noStroke()
                    for(let g=0,lg=14;g<lg;g++){
                        if(lcos(360*g/lg+this.anim.direction)>0){
                            this.layer.push()
                            this.layer.translate(lsin(360*g/lg+this.anim.direction)*7.2*this.fades.kimono.main.front.x,this.parts.kimono.main+(17.75-3.5*(g%2))*this.fades.kimono.main.front.y)
                            this.layer.rotate(-8*lsin(360*g/lg+this.anim.direction))
                            this.layer.scale(lcos(360*g/lg+this.anim.direction),(g%2)*2-1)
                            for(let h=0;h<5;h++){
                                this.layer.rotate(30)
                                this.layer.ellipse(-0.7+h/30,0,1-h/30,0.4-h/60)
                                this.layer.rotate(-60)
                                this.layer.ellipse(0.7-h/30,0,1-h/30,0.4-h/60)
                                this.layer.rotate(30)
                                this.layer.translate(0,0.8)
                            }
                            this.layer.pop()
                        }
                    }
                    this.layer.strokeWeight(0.6)
                    this.layer.stroke(this.color.wrap.center[0],this.color.wrap.center[1],this.color.wrap.center[2],this.fade*this.fades.wrap.round)
                    this.layer.line(7.1*this.fades.kimono.main.front.x,this.parts.kimono.main+16*this.fades.kimono.main.front.y,-7.1*this.fades.kimono.main.front.x,this.parts.kimono.main+16*this.fades.kimono.main.front.y)
                    this.layer.strokeJoin(MITER)
                }
                if(this.trigger.display.wrap.bow){
                    this.layer.strokeJoin(ROUND)
                    this.layer.strokeWeight(0.3)
                    this.layer.fill(this.color.wrap.bow.in[0],this.color.wrap.bow.in[1],this.color.wrap.bow.in[2],this.fade*this.fades.wrap.bow)
                    this.layer.stroke(this.color.wrap.bow.out[0],this.color.wrap.bow.out[1],this.color.wrap.bow.out[2],this.fade*this.fades.wrap.bow)
                    this.layer.quad(-6.5*this.fades.kimono.main.front.x,this.parts.kimono.main+11.5*this.fades.kimono.main.front.y,6.5*this.fades.kimono.main.front.x,this.parts.kimono.main+11.5*this.fades.kimono.main.front.y,6.8*this.fades.kimono.main.front.x,this.parts.kimono.main+13*this.fades.kimono.main.front.y,-6.8*this.fades.kimono.main.front.x,this.parts.kimono.main+13*this.fades.kimono.main.front.y)
                }
                if(this.trigger.display.wrap.bow&&lcos(this.spin.wrap.bow+this.anim.direction)>0){
                    this.layer.strokeJoin(ROUND)
                    this.layer.strokeWeight(0.4)
                    this.layer.fill(this.color.wrap.bow.in[0],this.color.wrap.bow.in[1],this.color.wrap.bow.in[2],this.fade*this.fades.wrap.bow)
                    this.layer.stroke(this.color.wrap.bow.out[0],this.color.wrap.bow.out[1],this.color.wrap.bow.out[2],this.fade*this.fades.wrap.bow)
                    this.calc.int=[this.parts.kimono.main+(this.parts.wrap.bow-this.parts.kimono.main)*this.fades.kimono.main.front.y]
                    if(this.trigger.display.extra.damage){
                        this.layer.quad(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.9*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*2.25,this.calc.int[0]+1.25,lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*2.25,this.calc.int[0]-1.25)
                        this.layer.quad(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.9*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*2.25,this.calc.int[0]+1.25,lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*2.25,this.calc.int[0]-1.25)
                    }else{
                        this.layer.triangle(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.9*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0]+2,lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0]-2)
                        this.layer.triangle(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.9*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0]+2,lsin(this.spin.wrap.bow+this.anim.direction)*6.1*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*3.6,this.calc.int[0]-2)
                    }
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*2.4,this.calc.int[0]+0.5)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*2.4,this.calc.int[0]+0.5)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.4*this.fades.kimono.main.front.x-lcos(this.spin.wrap.bow+this.anim.direction)*2.4,this.calc.int[0]-0.5)
                    this.layer.line(lsin(this.spin.wrap.bow+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.calc.int[0],lsin(this.spin.wrap.bow+this.anim.direction)*6.4*this.fades.kimono.main.front.x+lcos(this.spin.wrap.bow+this.anim.direction)*2.4,this.calc.int[0]-0.5)
                    this.layer.strokeJoin(MITER)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)>0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6&&g==0){
                        this.minorDisplay(-1,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.kimono.bow&&lcos(this.anim.direction+this.spin.bow.center)>0){
                    this.layer.noFill()
                    this.layer.stroke(this.color.kimono.bow[0],this.color.kimono.bow[1],this.color.kimono.bow[2],this.fade*this.fades.kimono.bow)
                    this.layer.push()
                    this.layer.translate(lsin(this.anim.direction+this.spin.bow.center)*7,this.parts.kimono.bow)
                    this.layer.scale(lcos(this.anim.direction+this.spin.bow.center),1)
                    this.layer.strokeWeight(0.45)
                    this.layer.arc(0,2.5,1.6,5,-180,0)
                    this.layer.strokeWeight(0.3)
                    if(this.trigger.display.extra.damage){
                        this.layer.arc(-0.8,4.5,1,4,-120,-60)
                        this.layer.arc(0.8,4.5,1,4,-120,-60)
                        this.layer.line(-0.8,2.5,-0.8,4)
                        this.layer.line(0.8,2.5,0.8,4)
                    }else{
                        this.layer.arc(-0.8,4.5,1,4,-180,0)
                        this.layer.arc(0.8,4.5,1,4,-180,0)
                        this.layer.line(-0.8,2.5,-0.8,5)
                        this.layer.line(0.8,2.5,0.8,5)
                    }
                    this.layer.rotate(12)
                    if(!this.trigger.display.extra.damage){
                        this.layer.ellipse(-1.2,-1.2,2.4,2.4)
                        this.layer.ellipse(-1.2,1.2,2.4,2.4)
                        this.layer.ellipse(1.2,-1.2,2.4,2.4)
                        this.layer.ellipse(1.2,1.2,2.4,2.4)
                    }
                    this.layer.rotate(30)
                    this.layer.ellipse(-0.8,-0.8,1.6,1.6)
                    this.layer.ellipse(-0.8,0.8,1.6,1.6)
                    this.layer.ellipse(0.8,-0.8,1.6,1.6)
                    this.layer.ellipse(0.8,0.8,1.6,1.6)
                    this.layer.pop()
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-75,30,30)
                }
                if(this.trigger.display.skin.blush){
                    this.layer.fill(...this.flashColor(this.color.skin.blush),this.fade*this.fades.skin.blush*0.2)
                    for(let g=0;g<2;g++){
                        if(lcos(this.spin.blush[g]+this.anim.direction)>0){
                            this.layer.push()
                            this.layer.translate(13.5*lsin(this.spin.blush[g]+this.anim.direction),this.parts.blush)
                            this.layer.rotate(30*lsin(this.spin.blush[g]+this.anim.direction))
                            this.layer.ellipse(0,0,5*lcos(this.spin.blush[g]+this.anim.direction),4)
                            this.layer.ellipse(0,0,3.75*lcos(this.spin.blush[g]+this.anim.direction),3)
                            this.layer.ellipse(0,0,2.5*lcos(this.spin.blush[g]+this.anim.direction),2)
                            this.layer.ellipse(0,0,1.25*lcos(this.spin.blush[g]+this.anim.direction),1)
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3)&&g==0){
                        this.minorDisplay(-1,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.sleeve&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.noStroke()
                        for(let h=0,lh=10;h<lh;h++){
                            this.layer.fill(mergeColor(this.color.sleeve.back,this.color.sleeve.front,h/lh),this.fade*this.fades.sleeve)
                            this.layer.quad(
                                this.graphics.arms[g].top.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.3*constrain(lcos(this.spin.arms[g].top+this.anim.direction),0.2,0.5)*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*3/8,
                                this.graphics.arms[g].top.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.3*constrain(lcos(this.spin.arms[g].top+this.anim.direction),0.2,0.5)*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*3/8,
                                this.graphics.arms[g].top.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.15*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*3/8,
                                this.graphics.arms[g].top.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.15*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*3/8,
                                this.graphics.arms[g].middle.x-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                this.graphics.arms[g].middle.y+(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                this.graphics.arms[g].middle.x+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                this.graphics.arms[g].middle.y-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))
                            )
                            this.layer.push()
                            this.layer.translate(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                            this.layer.rotate(atan2(this.graphics.arms[g].middle.x-this.graphics.arms[g].top.x,this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y))
                            let i=0.36*(1-h/lh)*(g*2-1)*sqrt((this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)**2+(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)**2)
                            this.layer.arc(0,0,i,i,-180,0)
                            this.layer.pop()
                            if(this.trigger.display.extra.damage){
                                this.layer.beginShape()
                                this.layer.vertex(this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)))
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.34375,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.34375)
                                this.layer.vertex(this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.5,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.5)
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.34375,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.34375)
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.5,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.1125*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.5)
                                this.layer.vertex(this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.34375,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.225*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.34375)
                                this.layer.endShape()
                            }else{
                                this.layer.quad(
                                    this.graphics.arms[g].middle.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].middle.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.18*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction)),
                                    this.graphics.arms[g].bottom.x-(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/8,
                                    this.graphics.arms[g].bottom.y+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/8,
                                    this.graphics.arms[g].bottom.x+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)/8,
                                    this.graphics.arms[g].bottom.y-(this.graphics.arms[g].middle.x-this.graphics.arms[g].bottom.x)*0.24*(1-h/lh)*(g*2-1)*sign(lcos(this.anim.direction))+(this.graphics.arms[g].middle.y-this.graphics.arms[g].bottom.y)/8
                                )
                            }
                        }
                    }
                    if(this.trigger.display.wrap.sleeve){
                        this.layer.strokeJoin(ROUND)
                        this.layer.strokeWeight(0.4)
                        this.layer.fill(this.color.wrap.sleeveIn[0],this.color.wrap.sleeveIn[1],this.color.wrap.sleeveIn[2],this.fade*this.fades.wrap.sleeve)
                        this.layer.stroke(this.color.wrap.sleeveOut[0],this.color.wrap.sleeveOut[1],this.color.wrap.sleeveOut[2],this.fade*this.fades.wrap.sleeve)
                        this.calc.int=[
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.135-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*3/8,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.135-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*3/8,
                            this.graphics.arms[g].top.x-constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)*0.15-(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)/2,
                            this.graphics.arms[g].top.y+constrain(lsin(this.spin.arms[g].top+this.anim.direction)*1.2,-1,1)*(this.graphics.arms[g].top.x-this.graphics.arms[g].middle.x)*0.15-(this.graphics.arms[g].top.y-this.graphics.arms[g].middle.y)/2
                        ]
                        if(this.anim.direction*(g*2-1)+this.spin.arms[g].lock>-150&&this.anim.direction*(g*2-1)+this.spin.arms[g].lock<150&&(lcos(this.spin.wrap.center+this.anim.direction)>=0||lcos(90*(g*2-1)+this.anim.direction)>=0)){
                            if(this.anim.direction*(g*2-1)+this.spin.arms[g].lock<-70){
                                this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],-6.6*this.fades.kimono.main.front.x*(g*2-1),this.parts.kimono.main+10*this.fades.kimono.main.front.y)
                            }else if(this.anim.direction*(g*2-1)+this.spin.arms[g].lock>30){
                                this.layer.triangle(5.7*this.fades.kimono.main.front.x*(g*2-1),-50,6.2*this.fades.kimono.main.front.x*(g*2-1),-48,lsin(this.spin.wrap.center+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.parts.kimono.main+10*this.fades.kimono.main.front.y)
                            }else{
                                this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*6.6*this.fades.kimono.main.front.x,this.parts.kimono.main+10*this.fades.kimono.main.front.y)
                            }
                        }
                        if((this.anim.direction*(g*2-1)+this.spin.arms[g].lock<-50||this.anim.direction*(g*2-1)+this.spin.arms[g].lock>50)&&(lcos(this.spin.wrap.center+this.anim.direction)<0||lcos(90*(g*2-1)+this.anim.direction)>=0)){
                            if(this.anim.direction*(g*2-1)+this.spin.arms[g].lock>-110&&this.anim.direction*(g*2-1)<0){
                                this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],6.6*this.fades.kimono.main.front.x*(g*2-1),this.parts.kimono.main+10*this.fades.kimono.main.front.y)
                            }else if(this.anim.direction*(g*2-1)+this.spin.arms[g].lock<150&&this.anim.direction*(g*2-1)>90){
                                this.layer.triangle(-5.7*this.fades.kimono.main.front.x*(g*2-1),-50,-6.2*this.fades.kimono.main.front.x*(g*2-1),-48,lsin(this.spin.wrap.center+this.anim.direction)*-6.6*this.fades.kimono.main.front.x,this.parts.kimono.main+10*this.fades.kimono.main.front.y)
                            }else{
                                this.layer.triangle(this.calc.int[0],this.calc.int[1],this.calc.int[2],this.calc.int[3],lsin(this.spin.wrap.center+this.anim.direction)*-6.6*this.fades.kimono.main.front.x,this.parts.kimono.main+10*this.fades.kimono.main.front.y)
                            }
                        }
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.sleeveDecoration){
                    this.layer.noStroke()
                    for(let g=0,lg=this.spin.sleeve.decoration.length;g<lg;g++){
                        if(lcos(this.spin.sleeve.decoration[g].spin+this.anim.direction)>=0.2&&lcos(this.spin.arms[this.spin.sleeve.decoration[g].part].top+this.anim.direction)>-0.3&&!(this.trigger.display.extra.damage&&this.spin.sleeve.decoration[g].length>1.5)){
                            h=this.spin.sleeve.decoration[g].part
                            this.layer.push()
                            if(this.spin.sleeve.decoration[g].length>1){
                                this.layer.translate(
                                    lerp(
                                        this.graphics.arms[h].middle.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.graphics.arms[h].bottom.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.24*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)/8,
                                        this.spin.sleeve.decoration[g].length-1
                                    )
                                    ,lerp(
                                        this.graphics.arms[h].middle.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.graphics.arms[h].bottom.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.24*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)/8,
                                        this.spin.sleeve.decoration[g].length-1
                                    ))
                                this.layer.rotate(-atan2(
                                    ((this.graphics.arms[h].middle.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))-
                                    (this.graphics.arms[h].bottom.x-(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)*0.24*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)/8)),
                                    ((this.graphics.arms[h].middle.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))-
                                    (this.graphics.arms[h].bottom.y+(this.graphics.arms[h].middle.x-this.graphics.arms[h].bottom.x)*0.24*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)+(this.graphics.arms[h].middle.y-this.graphics.arms[h].bottom.y)/8))
                                ))
                            }else{
                                this.layer.translate(
                                    lerp(
                                        this.graphics.arms[h].top.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*lerp(0.3*constrain(lcos(this.spin.arms[h].top+this.anim.direction),0.2,0.5),0.15,this.spin.sleeve.decoration[g].length)*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*3/8,
                                        this.graphics.arms[h].middle.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.spin.sleeve.decoration[g].length
                                    )
                                    ,lerp(
                                        this.graphics.arms[h].top.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*lerp(0.3*constrain(lcos(this.spin.arms[h].top+this.anim.direction),0.2,0.5),0.15,this.spin.sleeve.decoration[g].length)*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*3/8,
                                        this.graphics.arms[h].middle.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction),
                                        this.spin.sleeve.decoration[g].length
                                    ))
                                this.layer.rotate(-atan2(
                                    ((this.graphics.arms[h].top.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*lerp(0.3*constrain(lcos(this.spin.arms[h].top+this.anim.direction),0.2,0.5),0.15,this.spin.sleeve.decoration[g].length)*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*3/8)-
                                    (this.graphics.arms[h].middle.x-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction))),
                                    ((this.graphics.arms[h].top.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*lerp(0.3*constrain(lcos(this.spin.arms[h].top+this.anim.direction),0.2,0.5),0.15,this.spin.sleeve.decoration[g].length)*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)-(this.graphics.arms[h].top.y-this.graphics.arms[h].middle.y)*3/8)-
                                    (this.graphics.arms[h].middle.y+(this.graphics.arms[h].top.x-this.graphics.arms[h].middle.x)*0.18*lsin(this.spin.sleeve.decoration[g].spin+this.anim.direction)))
                                ))
                            }
                            this.layer.scale(lcos(this.spin.sleeve.decoration[g].spin+this.anim.direction)*1.25-0.25,1)
                            this.layer.rotate(this.spin.sleeve.decoration[g].rotate)
                            this.minorDisplay(this.spin.sleeve.decoration[g].type,0,this.layer)
                            this.layer.pop()
                        }
                    }
                }
                if(this.trigger.display.hair.front){
                    this.layer.image(graphics.combatant[20].sprites.hair.front[this.sprites.spinDetailHead],-20*this.fade,-75-20*this.fade,40*this.fade,60*this.fade)
                }
                if(this.trigger.display.hair.glow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.hair.glow[0],this.color.hair.glow[1],this.color.hair.glow[2],this.fade/4)
                    for(let g=0;g<6;g++){
                        this.layer.strokeWeight((3-g/2)*this.fade)
                        this.layer.arc(0,-75,28+g,28+g,-72+g*6,-12-g*6)
                    }
                }
                if(this.trigger.display.hair.pin){
                    this.layer.noStroke()
                    for(let g=0;g<2;g++){
                        if(lcos(this.anim.direction+this.spin.hair.pin[g])>0){
                            this.layer.push()
                            this.layer.translate(lsin(this.anim.direction+this.spin.hair.pin[g])*14,-83.75)
                            this.layer.rotate(lsin(this.anim.direction+this.spin.hair.pin[g])*-30)
                            this.layer.scale(lcos(this.anim.direction+this.spin.hair.pin[g])*0.95+0.05,1)
                            this.layer.fill(this.color.hair.pin[0][0],this.color.hair.pin[0][1],this.color.hair.pin[0][2],this.fade*this.fades.hair.pin)
                            this.layer.ellipse(0,0,4,3)
                            this.layer.ellipse(-1,-2.5,1,4)
                            this.layer.ellipse(1,-2.5,1,4)
                            this.layer.fill(this.color.hair.pin[1][0],this.color.hair.pin[1][1],this.color.hair.pin[1][2],this.fade*this.fades.hair.pin)
                            this.layer.ellipse(-1,-2.5,0.4,2.4)
                            this.layer.ellipse(1,-2.5,0.4,2.4)
                            this.layer.stroke(this.color.hair.pin[2][0],this.color.hair.pin[2][1],this.color.hair.pin[2][2],this.fade*this.fades.hair.pin)
                            this.layer.noFill()
                            this.layer.strokeWeight(0.4)
                            this.layer.point(-0.45,-0.4)
                            this.layer.point(0.45,-0.4)
                            this.layer.strokeWeight(0.2)
                            if(this.trigger.display.extra.damage){
                                this.layer.arc(0,1,1.6,1,-150,-30)
                            }else{
                                this.layer.arc(0,0,1.6,1,30,150)
                            }
                            this.layer.line(-1.1,-0.25,-1.5,-0.35)
                            this.layer.line(-1.1,0.25,-1.5,0.35)
                            this.layer.line(1.1,-0.25,1.5,-0.35)
                            this.layer.line(1.1,0.25,1.5,0.35)
                            this.layer.pop()
                        }
                    }
                }
            break
            case 'Drunk Boss': case 'Enforcer': case 'Bomber Boy': case 'Chief Engineering Officer': case 'Gangmaster':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-52.5,20,48)
                    if(this.name=='Chief Engineering Officer'){
                        this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                        this.layer.arc(0,-52,20,49,-180,0)
                    }
                }
                if(this.name=='Drunk Boss'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.rect(0,-48,21,3)
                }
                if(this.name=='Drunk Boss'&&this.trigger.display.bottle){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.bottle)[0],this.flashColor(this.color.bottle)[1],this.flashColor(this.color.bottle)[2],this.fade*this.fades.bottle)
                    for(let g=0;g<3;g++){
                        if(lcos(this.anim.direction+15+g*30)>0){
                            this.layer.rect(lsin(this.anim.direction+15+g*30)*10.5,-48,3*lcos(this.anim.direction+15+g*30),6)
                            this.layer.rect(lsin(this.anim.direction+15+g*30)*10.5,-52,2*lcos(this.anim.direction+15+g*30),2)
                        }
                    }
                }
                if(this.name=='Enforcer'&&this.trigger.display.button){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.button),this.fade*this.fades.button)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-24+a*48)>0){
                            this.layer.ellipse(lsin(this.anim.direction-24+a*48)*8,-60,4*lcos(this.anim.direction-24+a*48),4)
                            this.layer.ellipse(lsin(this.anim.direction-24+a*48)*10,-51,4*lcos(this.anim.direction-24+a*48),4)
                            this.layer.ellipse(lsin(this.anim.direction-24+a*48)*8,-42,4*lcos(this.anim.direction-24+a*48),4)
                        }
                    }
                }
                if(this.name=='Bomber Boy'&&this.trigger.display.logo&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.logo),this.fade*this.fades.logo)
                    this.layer.quad(lsin(this.anim.direction)*10-lcos(this.anim.direction)*4,-51,lsin(this.anim.direction)*10,-59,lsin(this.anim.direction)*10+lcos(this.anim.direction)*4,-51,lsin(this.anim.direction)*10,-43)
                }
                if(this.name=='Chief Engineering Officer'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.rect(0,-50,21,3)
                    for(let a=0,la=15;a<la;a++){
                        if(lcos(a*24+this.anim.direction)>0){
                            this.layer.rect(lsin(a*24+this.anim.direction)*10,-50,lcos(a*24+this.anim.direction)*2,6)
                        }
                    }
                }
                if(this.name=='Gangmaster'&&this.trigger.display.pocket&&lcos(this.anim.direction+45)>0){
                    this.layer.fill(this.flashColor(this.color.pocket)[0],this.flashColor(this.color.pocket)[1],this.flashColor(this.color.pocket)[2],this.fade*this.fades.pocket)
                    this.layer.noStroke()
                    this.layer.arc(lsin(this.anim.direction+45)*9,-58,6*lcos(this.anim.direction+45),6,-180,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                if((this.name=='Chief Engineering Officer'||this.name=='Gangmaster')&&this.trigger.display.tie&&lcos(this.anim.direction)>0.1){
                    this.layer.fill(this.flashColor(this.color.tie[0])[0],this.flashColor(this.color.tie[0])[1],this.flashColor(this.color.tie[0])[2],this.fade*this.fades.tie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*3.5-lcos(this.anim.direction)*3.5,-76,lsin(this.anim.direction)*3.5+lcos(this.anim.direction)*3.5,-76,lsin(this.anim.direction)*10.5,-56)
                    this.layer.fill(this.flashColor(this.color.tie[1])[0],this.flashColor(this.color.tie[1])[1],this.flashColor(this.color.tie[1])[2],this.fade*this.fades.tie)
                    this.layer.quad(lsin(this.anim.direction)*7-lcos(this.anim.direction)*1.75,-66,lsin(this.anim.direction)*3.5,-76,lsin(this.anim.direction)*7+lcos(this.anim.direction)*1.75,-66,lsin(this.anim.direction)*10.5,-55)
                }
                if(this.name=='Chief Engineering Officer'&&this.trigger.display.coat){
                    this.layer.fill(...this.flashColor(this.color.coat),this.fade*this.fades.coat)
                    this.layer.noStroke()
                    if(lcos(this.anim.direction)<0.5){
                        this.layer.ellipse(0,-52.5,28,50)
                    }else{
                        this.layer.arc(-3+lsin(this.anim.direction)*7,-52.5,28+min(0,lsin(this.anim.direction)*32),48+min(10,lsin(this.anim.direction)*8),90,270)
                        this.layer.arc(3+lsin(this.anim.direction)*7,-52.5,28+min(0,-lsin(this.anim.direction)*32),48+min(10,-lsin(this.anim.direction)*8),-90,90)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-90,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                if(this.name=='Gangmaster'&&this.trigger.display.beard&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.beard)[0],this.flashColor(this.color.beard)[1],this.flashColor(this.color.beard)[2],this.fade*this.fades.beard)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*11-lcos(this.anim.direction)*6,-80,lsin(this.anim.direction)*11+lcos(this.anim.direction)*6,-80,lsin(this.anim.direction)*10,-64)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.name=='Enforcer'&&this.trigger.display.glasses&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.color.glasses[1][0],this.color.glasses[1][1],this.color.glasses[1][2],this.fade*this.fades.glasses/5)
                    this.layer.stroke(this.color.glasses[0][0],this.color.glasses[0][1],this.color.glasses[0][2],this.fade*this.fades.glasses)
                    this.layer.strokeWeight(1)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*-5,-86,6*lcos(this.anim.direction),3)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*5,-86,6*lcos(this.anim.direction),3)
                    this.layer.line(lsin(this.anim.direction)*15+lcos(this.anim.direction)*2,-86,lsin(this.anim.direction)*15-lcos(this.anim.direction)*2,-86)
                }
                if(this.name=='Bomber Boy'&this.trigger.display.helmet){
                    this.layer.fill(this.color.helmet[0],this.color.helmet[1],this.color.helmet[2],this.fade*this.fades.helmet)
                    this.layer.noStroke()
                    this.layer.arc(0,-90,35,35,-180,0)
                }
                if(this.name=='Bomber Boy'&this.trigger.display.emblem&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.color.emblem[0],this.color.emblem[1],this.color.emblem[2],this.fade*this.fades.emblem)
                    this.layer.noStroke()
                    this.layer.ellipse(lsin(this.anim.direction)*17,-96,6*lcos(this.anim.direction),6)
                }
                if(this.name=='Chief Engineering Officer'&&this.trigger.display.hat){
                    this.layer.fill(...this.flashColor(this.color.hat),this.fade*this.fades.hat)
                    this.layer.noStroke()
                    this.layer.arc(0,-90,32,32,-180,0)
                    this.layer.rect(lsin(this.anim.direction)*16,-92,20+abs(lcos(this.anim.direction))*8,4)
                    this.layer.stroke(this.flashColor(this.color.hat)[0]-50,this.flashColor(this.color.hat)[1]-50,this.flashColor(this.color.hat)[2]-50,this.fade*this.fades.hat)
                    this.layer.strokeWeight(1)
                    this.layer.noFill()
                    for(let a=0,la=8;a<la;a++){
                        if(lcos(this.anim.direction+a*45)>0){
                            if(lsin(this.anim.direction+a*45)>0){
                                this.layer.arc(0,-90.5,32*lsin(this.anim.direction+a*45),31,-90,0)
                            }else if(lsin(this.anim.direction+a*45)<0){
                                this.layer.arc(0,-90.5,-32*lsin(this.anim.direction+a*45),31,-180,-90)
                            }
                        }
                    }
                }
            break
            case 'Pointy': case 'Little Guy': case 'Rich Kid':
                for(let g=0;g<2;g++){
                    if((this.name=='Pointy')&&this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.name=='Rich Kid'&&this.trigger.display.chocolate&&g==1){
                            this.minorDisplay(1,g)
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-45,13,33)
                    if(this.name=='Pointy'||this.name=='Little Guy'||this.name=='Rich Kid'){
                        this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                        this.layer.arc(0,-42,14,40,-180,0)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.name=='Rich Kid'&&this.trigger.display.chocolate&&g==1){
                            this.minorDisplay(1,g)
                        }
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                if(this.name=='Rich Kid'&&this.trigger.display.tie&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.tie[0])[0],this.flashColor(this.color.tie[0])[1],this.flashColor(this.color.tie[0])[2],this.fade*this.fades.tie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*3-lcos(this.anim.direction)*3,-60,lsin(this.anim.direction)*3+lcos(this.anim.direction)*3,-60,lsin(this.anim.direction)*9,-48)
                    this.layer.fill(this.flashColor(this.color.tie[1])[0],this.flashColor(this.color.tie[1])[1],this.flashColor(this.color.tie[1])[2],this.fade*this.fades.tie)
                    this.layer.quad(lsin(this.anim.direction)*6-lcos(this.anim.direction)*1.5,-54,lsin(this.anim.direction)*3,-60,lsin(this.anim.direction)*6+lcos(this.anim.direction)*1.5,-54,lsin(this.anim.direction)*9,-48)
                }
                for(let g=0;g<2;g++){
                    if((this.name=='Pointy')&&this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6)){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.name=='Rich Kid'&&this.trigger.display.chocolate&&g==1){
                            this.minorDisplay(1,g)
                        }
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-72,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if((this.name=='Pointy')&&this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.6)){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.name=='Rich Kid'&&this.trigger.display.chocolate&&g==1){
                            this.minorDisplay(1,g)
                        }
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.name=='Rich Kid'&&this.trigger.display.chocolate&&g==1){
                            this.minorDisplay(1,g)
                        }
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Monkey': case 'Monkey Gangster': case 'AllyMonkey':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-28,18,27)
                }
                if(this.name=='Monkey Gangster'&&this.trigger.display.tie&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.tie[0])[0],this.flashColor(this.color.tie[0])[1],this.flashColor(this.color.tie[0])[2],this.fade*this.fades.tie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*3-lcos(this.anim.direction)*3,-36,lsin(this.anim.direction)*3+lcos(this.anim.direction)*3,-36,lsin(this.anim.direction)*9,-24)
                    this.layer.fill(this.flashColor(this.color.tie[1])[0],this.flashColor(this.color.tie[1])[1],this.flashColor(this.color.tie[1])[2],this.fade*this.fades.tie)
                    this.layer.quad(lsin(this.anim.direction)*6-lcos(this.anim.direction)*1.5,-30,lsin(this.anim.direction)*3,-36,lsin(this.anim.direction)*6+lcos(this.anim.direction)*1.5,-30,lsin(this.anim.direction)*9,-24)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-54,40,40)
                }
                if(this.name=='AllyMonkey'&&this.trigger.display.sprig){
                    this.layer.stroke(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.strokeWeight(2)
                    this.layer.noFill()
                    this.layer.arc(6,-74,12,3,-180,0)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.name=='Monkey Gangster'&&this.trigger.display.hat){
                    this.layer.fill(...this.flashColor(this.color.hat),this.fade*this.fades.hat)
                    this.layer.stroke(...this.flashColor(this.color.hat),this.fade*this.fades.hat)
                    this.layer.strokeWeight(4)
                    this.layer.line(-16,-69,16,-69)
                    this.layer.quad(-12,-69,12,-69,8,-75,-8,-75)
                }
            break
            case 'Duck': case 'Fungal Duck': case 'Duckforce': case 'Blue Duck': case 'Fat Duck': case 'Void Duck':  case 'Golden Duck': case 'Bowler Duck': case 'Ducky Donka': case 'Ducky McDuff':
                if(this.name=='Void Duck'&&this.trigger.display.outline){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.outline)[0],this.flashColor(this.color.outline)[1],this.flashColor(this.color.outline)[2],this.fade*this.fades.outline)
                    for(let g=0;g<2;g++){
                        if(this.trigger.display.skin.arms){
                            this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,14)
                        }
                    }
                    for(let g=0;g<2;g++){
                        if(this.trigger.display.skin.legs){
                            this.layer.ellipse(this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,14)
                        }
                    }
                    this.layer.ellipse(0,-19,16,26)
                    this.layer.ellipse(0,-38,29)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,12)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.legs&&lcos(this.anim.direction+this.spin.legs[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.legs,lcos(this.spin.legs[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.legs)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,12)
                    }
                }
                if(this.trigger.display.skin.body){
                    if(this.name=='Fat Duck'){
                        this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                        this.layer.noStroke()
                        this.layer.ellipse(0,-19,35,24)
                    }else{
                        this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                        this.layer.noStroke()
                        this.layer.ellipse(0,-19,14,24)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.legs&&lcos(this.anim.direction+this.spin.legs[g].top)>0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.legs,lcos(this.spin.legs[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.legs)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,12)
                    }
                }
                if(this.trigger.display.beak.main){
                    this.layer.fill(...this.flashColor(this.color.beak.main),this.fade*this.fades.beak.main)
                    this.layer.noStroke()
                    this.layer.ellipse(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction),8)
                }
                if(this.trigger.display.beak.mouth){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.mouth),this.fade*this.fades.beak.mouth)
                    this.layer.strokeWeight(0.5)
                    this.layer.arc(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction),1,0,180)
                }
                if(this.trigger.display.beak.nostril){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.nostril),this.fade*this.fades.beak.nostril)
                    this.layer.strokeWeight(0.5)
                    for(let g=0;g<2;g++){
                        this.layer.line(lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1.5,lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1)
                    }
                }
                if(this.name=='Fungal Duck'&&this.trigger.display.fungus){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.fungus[0])[0],this.flashColor(this.color.fungus[0])[1],this.flashColor(this.color.fungus[0])[2],this.fade*this.fades.fungus)
                    this.layer.arc(0,-55,20,20,-180,0)
                    this.layer.fill(this.flashColor(this.color.fungus[1])[0],this.flashColor(this.color.fungus[1])[1],this.flashColor(this.color.fungus[1])[2],this.fade*this.fades.fungus)
                    this.layer.rect(0,-51,6,8)
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-38,27)
                }
                if(this.name=='Golden Duck'&&this.trigger.display.shine){
                    this.layer.noFill()
                    this.layer.stroke(this.flashColor(this.color.shine)[0],this.flashColor(this.color.shine)[1],this.flashColor(this.color.shine)[2],this.fade*this.fades.shine)
                    this.layer.strokeWeight(3)
                    this.layer.arc(0,-38,21,21,-165,-105)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,12,12)
                    }
                    if(this.trigger.display.eye[g]){this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((2.5-this.anim.eye[g]*1.5)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*13+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*13+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
                if(this.trigger.display.beak.main&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.flashColor(this.color.beak.main),this.fade*this.fades.beak.main)
                    this.layer.noStroke()
                    this.layer.arc(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction)-max(0,lsin(this.anim.direction)-0.5)*24,8,-270,-90)
                    this.layer.arc(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction)+min(0,lsin(this.anim.direction)+0.5)*24,8,-90,90)
                }
                if(this.trigger.display.beak.mouth&&lcos(this.anim.direction)>0){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.mouth),this.fade*this.fades.beak.mouth)
                    this.layer.strokeWeight(0.5)
                    this.layer.arc(lsin(this.anim.direction)*13+max(0,lsin(this.anim.direction)-0.5)*6+min(0,lsin(this.anim.direction)+0.5)*6,this.parts.beakLevel,12+2*lcos(this.anim.direction)-max(0,lsin(this.anim.direction)-0.5)*12+min(0,lsin(this.anim.direction)+0.5)*12,1,0,180)
                }
                if(this.trigger.display.beak.nostril&&lcos(this.anim.direction)>0){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.nostril),this.fade*this.fades.beak.nostril)
                    this.layer.strokeWeight(0.5)
                    for(let g=0;g<2;g++){
                        this.layer.line(lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1.5,lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1)
                    }
                }
                if(this.name=='Duckforce'&this.trigger.display.helmet){
                    this.layer.fill(this.color.helmet[0],this.color.helmet[1],this.color.helmet[2],this.fade*this.fades.helmet)
                    this.layer.noStroke()
                    this.layer.arc(0,-39,30,30,-180-lsin(this.anim.direction)*30,-lsin(this.anim.direction)*30)
                }
                if(this.name=='Bowler Duck'&&this.trigger.display.hat){
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.stroke(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.strokeWeight(2)
                    this.layer.line(-15,-45,15,-45)
                    this.layer.quad(-11,-45,11,-45,8,-51,-8,-51)
                }
                if(this.name=='Ducky Donka'&&this.trigger.display.hat){
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.stroke(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.strokeWeight(3)
                    this.layer.line(-13,-50,13,-50)
                    this.layer.quad(-7,-50,7,-50,7,-60,-7,-60)
                }
                if(this.name=='Ducky McDuff'&&this.trigger.display.hat){
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.stroke(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.strokeWeight(3)
                    this.layer.line(-14,-48,14,-48)
                    this.layer.quad(-10,-48,10,-48,8.5,-57,-8.5,-57)
                }
                if(this.name=='Ducky Donka'&&this.trigger.display.bowtie&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.flashColor(this.color.bowtie),this.fade*this.fades.bowtie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*6,-24,lsin(this.anim.direction)*6-lcos(this.anim.direction)*5,-26,lsin(this.anim.direction)*6-lcos(this.anim.direction)*5,-22)
                    this.layer.triangle(lsin(this.anim.direction)*6,-24,lsin(this.anim.direction)*6+lcos(this.anim.direction)*5,-26,lsin(this.anim.direction)*6+lcos(this.anim.direction)*5,-22)
                }
                if(this.name=='Ducky McDuff'&&this.trigger.display.bowtie&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.flashColor(this.color.bowtie),this.fade*this.fades.bowtie)
                    this.layer.noStroke()
                    this.layer.push()
                    this.layer.translate(lsin(this.anim.direction)*6,-24)
                    this.layer.rotate(5)
                    this.layer.scale(lcos(this.anim.direction),1)
                    this.layer.triangle(0,0,-5,-2,-5,2)
                    this.layer.triangle(0,0,5,-2,5,2)
                    this.layer.pop()
                }
            break
            case 'Big Duck': case 'Agent Duck': case 'General Duckion':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,16)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.legs&&lcos(this.anim.direction+this.spin.legs[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.legs,lcos(this.spin.legs[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.legs)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,16,16)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-28,21,33)
                }
                if(this.name=='General Duckion'&&this.trigger.display.badge&&lcos(this.anim.direction+24)>0){
                    this.layer.fill(this.flashColor(this.color.badge[0])[0],this.flashColor(this.color.badge[0])[1],this.flashColor(this.color.badge[0])[2],this.fade*this.fades.badge)
                    this.layer.noStroke()
                    this.layer.push()
                    this.layer.translate(lsin(this.anim.direction+24)*8,-35)
                    this.layer.scale(lcos(this.anim.direction+24),1)
                    this.layer.ellipse(0,0,8,8)
                    this.layer.fill(this.flashColor(this.color.badge[1])[0],this.flashColor(this.color.badge[1])[1],this.flashColor(this.color.badge[1])[2],this.fade*this.fades.badge)
                    this.layer.quad(-5,0,0,1.5,5,0,0,-1.5)
                    this.layer.quad(-1.5,0,0,5,1.5,0,0,-5)
                    this.layer.pop()
                }
                if(this.name=='Agent Duck'&&this.trigger.display.tie&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.tie[0])[0],this.flashColor(this.color.tie[0])[1],this.flashColor(this.color.tie[0])[2],this.fade*this.fades.tie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*3-lcos(this.anim.direction)*3,-44,lsin(this.anim.direction)*3+lcos(this.anim.direction)*3,-44,lsin(this.anim.direction)*9,-32)
                    this.layer.fill(this.flashColor(this.color.tie[1])[0],this.flashColor(this.color.tie[1])[1],this.flashColor(this.color.tie[1])[2],this.fade*this.fades.tie)
                    this.layer.quad(lsin(this.anim.direction)*6-lcos(this.anim.direction)*1.5,-38,lsin(this.anim.direction)*3,-44,lsin(this.anim.direction)*6+lcos(this.anim.direction)*1.5,-38,lsin(this.anim.direction)*9,-32)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.legs&&lcos(this.anim.direction+this.spin.legs[g].top)>0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.legs,lcos(this.spin.legs[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.legs)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,16,16)
                    }
                }
                if(this.trigger.display.beak.main){
                    this.layer.fill(...this.flashColor(this.color.beak.main),this.fade*this.fades.beak.main)
                    this.layer.noStroke()
                    this.layer.ellipse(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction),8)
                }
                if(this.trigger.display.beak.mouth){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.mouth),this.fade*this.fades.beak.mouth)
                    this.layer.strokeWeight(0.5)
                    this.layer.arc(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction),1,0,180)
                }
                if(this.trigger.display.beak.nostril){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.nostril),this.fade*this.fades.beak.nostril)
                    this.layer.strokeWeight(0.5)
                    for(let g=0;g<2;g++){
                        this.layer.line(lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1.5,lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-54,27,27)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,16)
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((2.5-this.anim.eye[g]*1.5)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*13+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*13+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
                if(this.trigger.display.beak.main&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.flashColor(this.color.beak.main),this.fade*this.fades.beak.main)
                    this.layer.noStroke()
                    this.layer.arc(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction)-max(0,lsin(this.anim.direction)-0.5)*24,8,-270,-90)
                    this.layer.arc(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction)+min(0,lsin(this.anim.direction)+0.5)*24,8,-90,90)
                }
                if(this.trigger.display.beak.mouth&&lcos(this.anim.direction)>0){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.mouth),this.fade*this.fades.beak.mouth)
                    this.layer.strokeWeight(0.5)
                    this.layer.arc(lsin(this.anim.direction)*13+max(0,lsin(this.anim.direction)-0.5)*6+min(0,lsin(this.anim.direction)+0.5)*6,this.parts.beakLevel,12+2*lcos(this.anim.direction)-max(0,lsin(this.anim.direction)-0.5)*12+min(0,lsin(this.anim.direction)+0.5)*12,1,0,180)
                }
                if(this.trigger.display.beak.nostril&&lcos(this.anim.direction)>0){
                    this.layer.noFill()
                    this.layer.stroke(...this.flashColor(this.color.beak.nostril),this.fade*this.fades.beak.nostril)
                    this.layer.strokeWeight(0.5)
                    for(let g=0;g<2;g++){
                        this.layer.line(lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1.5,lsin(this.anim.direction-6+g*12)*16,this.parts.beakLevel-1)
                    }
                }
                if(this.name=='Agent Duck'&&this.trigger.display.sunglasses&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.color.sunglasses,this.fade*this.fades.sunglasses)
                    this.layer.noStroke()
                    this.layer.ellipse(lsin(this.anim.direction)*13+lcos(this.anim.direction)*-4,-56,6*lcos(this.anim.direction),4)
                    this.layer.ellipse(lsin(this.anim.direction)*13+lcos(this.anim.direction)*4,-56,6*lcos(this.anim.direction),4)
                    this.layer.rect(lsin(this.anim.direction)*13,-56,12*lcos(this.anim.direction),1)
                }
                if(this.name=='Agent Duck'&&this.trigger.display.hat){
                    this.layer.stroke(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade)
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade)
                    this.layer.strokeWeight(4)
                    this.layer.line(-10,-66,10,-66)
                    this.layer.quad(-6,-66,6,-66,4,-70,-4,-70)
                }
                if(this.name=='Agent Duck'){
                    this.layer.noFill()
                    this.layer.stroke(240,240,40,this.fade)
                    this.layer.strokeWeight(3)
                    this.layer.strokeCap(SQUARE)
                    this.layer.arc(0.5,-86.5,15,15,-135,45)
                    this.layer.arc(-0.5,-85.5,15,15,45,225)
                    this.layer.strokeCap(ROUND)
                    this.layer.noStroke()
                    this.layer.fill(255,this.fade)
                    this.layer.textSize(12)
                    this.layer.text(this.combo,0,-85.5)
                }
                if(this.name=='General Duckion'&this.trigger.display.helmet){
                    this.layer.fill(this.color.helmet[0],this.color.helmet[1],this.color.helmet[2],this.fade*this.fades.helmet)
                    this.layer.noStroke()
                    this.layer.arc(0,-55,30,30,-180-lsin(this.anim.direction)*30,-lsin(this.anim.direction)*30)
                }
            break
            case 'Management Autoduck':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                        this.layer.rect(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,10,10)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.legs&&lcos(this.anim.direction+this.spin.legs[g].top)<=0){
                        this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                        this.layer.rect(this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,10,10)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.arms)
                    this.layer.strokeWeight(4)
                    this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                    this.layer.rect(0,-19,12,22)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.legs&&lcos(this.anim.direction+this.spin.legs[g].top)>0){
                        this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                        this.layer.rect(this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,10,10)
                    }
                }
                if(this.trigger.display.beak.main){
                    this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.arms)
                    this.layer.strokeWeight(4)
                    this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                    this.layer.rect(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction),8)
                }
                if(this.trigger.display.skin.head){
                    this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.arms)
                    this.layer.strokeWeight(4)
                    this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                    this.layer.rect(0,-38,27,27)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                        this.layer.rect(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,10,10)
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((2.5-this.anim.eye[g]*1.5)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*13+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*13-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*13+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
                if(this.trigger.display.beak.main&&lcos(this.anim.direction)>0){
                    this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.arms)
                    this.layer.strokeWeight(4)
                    this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                    this.layer.rect(lsin(this.anim.direction)*13,this.parts.beakLevel,12+2*lcos(this.anim.direction)-max(0,lsin(this.anim.direction)-0.5)*24,8)
                }
            break
            case 'Orb Walker':
                if(this.trigger.display.cover){
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(-90+a*180+this.anim.direction)<=0){
                            this.layer.fill(this.flashColor(this.color.cover)[0],this.flashColor(this.color.cover)[1],this.flashColor(this.color.cover)[2],this.fade*this.fades.cover)
                            this.layer.quad(lsin(-90+a*180+this.anim.direction)*18,-6,-24*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30,lsin(-90+a*180+this.anim.direction)*18,-54,24*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30)
                            this.layer.fill(this.flashColor(this.color.outer)[0],this.flashColor(this.color.outer)[1],this.flashColor(this.color.outer)[2],this.fade*this.fades.cover)
                            this.layer.quad(lsin(-90+a*180+this.anim.direction)*18,-6,-3*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30,lsin(-90+a*180+this.anim.direction)*18,-54,3*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30)
                            this.layer.quad(lsin(-90+a*180+this.anim.direction)*18,-27,-24*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30,lsin(-90+a*180+this.anim.direction)*18,-33,24*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30)
                        }
                    }
                }
                if(this.trigger.display.legs){
                    this.layer.noStroke()
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+this.spin.legs[a].top)<=0){
                            this.layer.fill(this.flashColor(upColor(this.color.cover,40*lcos(this.anim.direction+this.spin.legs[a].top),[1,1,1]))[0],this.flashColor(upColor(this.color.cover,40*lcos(this.anim.direction+this.spin.legs[a].top),[1,1,1]))[1],this.flashColor(upColor(this.color.cover,40*lcos(this.anim.direction+this.spin.legs[a].top),[1,1,1]))[2],this.fade*this.fades.cover)
                            regTriangle(this.layer,this.graphics.legs[a].middle.x,this.graphics.legs[a].middle.y,8,8,atan2(this.graphics.legs[a].middle.x,30+this.graphics.legs[a].middle.y))
                        }
                    }
                }
                if(this.trigger.display.body){
                    this.layer.noStroke()
                    for(let a=0,la=10;a<la;a++){
                        this.layer.fill(this.flashColor(mergeColor(this.color.body[0],this.color.body[1],a/la))[0],this.flashColor(mergeColor(this.color.body[0],this.color.body[1],a/la))[1],this.flashColor(mergeColor(this.color.body[0],this.color.body[1],a/la))[2],this.fade*this.fades.body)
                        this.layer.ellipse(0,-30,40*(1-a/la),40*(1-a/la))
                    }
                }
                if(this.trigger.display.legs){
                    this.layer.noStroke()
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+this.spin.legs[a].top)>0){
                            this.layer.fill(this.flashColor(upColor(this.color.cover,40*lcos(this.anim.direction+this.spin.legs[a].top),[1,1,1]))[0],this.flashColor(upColor(this.color.cover,40*lcos(this.anim.direction+this.spin.legs[a].top),[1,1,1]))[1],this.flashColor(upColor(this.color.cover,40*lcos(this.anim.direction+this.spin.legs[a].top),[1,1,1]))[2],this.fade*this.fades.cover)
                            regTriangle(this.layer,this.graphics.legs[a].middle.x,this.graphics.legs[a].middle.y,8,8,atan2(this.graphics.legs[a].middle.x,30+this.graphics.legs[a].middle.y))
                        }
                    }
                }
                if(this.trigger.display.cover){
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(-90+a*180+this.anim.direction)>0){
                            this.layer.fill(this.flashColor(this.color.cover)[0],this.flashColor(this.color.cover)[1],this.flashColor(this.color.cover)[2],this.fade*this.fades.cover)
                            this.layer.quad(lsin(-90+a*180+this.anim.direction)*18,-6,-24*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30,lsin(-90+a*180+this.anim.direction)*18,-54,24*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30)
                            this.layer.fill(this.flashColor(this.color.outer)[0],this.flashColor(this.color.outer)[1],this.flashColor(this.color.outer)[2],this.fade*this.fades.cover)
                            this.layer.quad(lsin(-90+a*180+this.anim.direction)*18,-6,-3*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30,lsin(-90+a*180+this.anim.direction)*18,-54,3*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30)
                            this.layer.quad(lsin(-90+a*180+this.anim.direction)*18,-27,-24*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30,lsin(-90+a*180+this.anim.direction)*18,-33,24*lcos(-90+a*180+this.anim.direction)+lsin(-90+a*180+this.anim.direction)*18,-30)
                        }
                    }
                }
            break
            case 'Modicum':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.rect(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,11.2,11.2)
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,12.8,12.8)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.noStroke()
                    this.layer.rect(0,-14,22.4,22.4)
                    this.layer.ellipse(0,-14,25.6,25.6)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.rect(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,11.2,11.2)
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,12.8,12.8)
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((4-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*4,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*11-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*11-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*11-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*11+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*11-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*11+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
            break
            case 'Slime': case 'Spike Slime': case 'Slimoid':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        if(this.name=='Spike Slime'){
                            this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        }else{
                            this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        }
                        this.layer.noStroke()
                        if(this.name=='Slimoid'){
                            this.layer.rect(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,14,14)
                        }
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,16)
                        if(this.name=='Spike Slime'){
                            for(let a=0,la=9;a<la;a++){
                                this.layer.triangle(this.graphics.arms[g].middle.x+lsin(a*40-16)*12,this.graphics.arms[g].middle.y+lcos(a*40-16)*12,this.graphics.arms[g].middle.x+lsin(a*40-16)*7+lcos(a*40-16)*2,this.graphics.arms[g].middle.y+lcos(a*40-16)*7-lsin(a*40-16)*2,this.graphics.arms[g].middle.x+lsin(a*40-16)*7-lcos(a*40-16)*2,this.graphics.arms[g].middle.y+lcos(a*40-16)*7+lsin(a*40-16)*2)
                            }
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-20,60,45)
                    switch(this.name){
                        case 'Spike Slime':
                            for(let a=0,la=18;a<la;a++){
                                this.layer.triangle(lsin(a*20-8)*28,lcos(a*20-8)*21-20,lsin(a*20+8)*28,lcos(a*20+8)*21-20,lsin(a*20)*36,lcos(a*20)*27-20)
                            }
                        break
                        case 'Slimoid':
                            this.layer.rect(0,-20,12,46)
                            this.layer.rect(-12,-20,12,42)
                            this.layer.rect(-24,-20,12,20)
                            this.layer.rect(12,-20,12,42)
                            this.layer.rect(24,-20,12,20)
                        break
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        if(this.name=='Spike Slime'){
                            this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        }else{
                            this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        }
                        this.layer.noStroke()
                        if(this.name=='Slimoid'){
                            this.layer.rect(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,14,14)
                        }
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,16)
                        if(this.name=='Spike Slime'){
                            for(let a=0,la=9;a<la;a++){
                                this.layer.triangle(this.graphics.arms[g].middle.x+lsin(a*40-16)*12,this.graphics.arms[g].middle.y+lcos(a*40-16)*12,this.graphics.arms[g].middle.x+lsin(a*40-16)*7+lcos(a*40-16)*2,this.graphics.arms[g].middle.y+lcos(a*40-16)*7-lsin(a*40-16)*2,this.graphics.arms[g].middle.x+lsin(a*40-16)*7-lcos(a*40-16)*2,this.graphics.arms[g].middle.y+lcos(a*40-16)*7+lsin(a*40-16)*2)
                            }
                        }
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((5-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*24-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*24-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*24-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*24+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*24-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*24+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
            break
            case 'Big Slime': case 'Big Spike Slime': case 'Big Slimoid':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        if(this.name=='Big Spike Slime'){
                            this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        }else{
                            this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        }
                        this.layer.noStroke()
                        if(this.name=='Big Slimoid'){
                            this.layer.rect(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,21,21)
                        }
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,24,24)
                        if(this.name=='Big Spike Slime'){
                            for(let a=0,la=9;a<la;a++){
                                this.layer.triangle(this.graphics.arms[g].middle.x+lsin(a*40-16)*18,this.graphics.arms[g].middle.y+lcos(a*40-16)*18,this.graphics.arms[g].middle.x+lsin(a*40-16)*10.5+lcos(a*40-16)*3,this.graphics.arms[g].middle.y+lcos(a*40-16)*10.5-lsin(a*40-16)*3,this.graphics.arms[g].middle.x+lsin(a*40-16)*10.5-lcos(a*40-16)*3,this.graphics.arms[g].middle.y+lcos(a*40-16)*10.5+lsin(a*40-16)*3)
                            }
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-30,90,67.5)
                    switch(this.name){
                        case 'Big Spike Slime':
                            for(let a=0,la=18;a<la;a++){
                                this.layer.triangle(lsin(a*20-8)*42,lcos(a*20-8)*31.5-30,lsin(a*20+8)*42,lcos(a*20+8)*31.5-30,lsin(a*20)*54,lcos(a*20)*40.5-30)
                            }
                        break
                        case 'Big Slimoid':
                            this.layer.rect(0,-30,18,69)
                            this.layer.rect(-18,-30,18,63)
                            this.layer.rect(-36,-30,18,30)
                            this.layer.rect(18,-30,18,63)
                            this.layer.rect(36,-30,18,30)
                        break
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        if(this.name=='Big Spike Slime'){
                            this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        }else{
                            this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        }
                        this.layer.noStroke()
                        if(this.name=='Big Slimoid'){
                            this.layer.rect(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,21,21)
                        }
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,24,24)
                        if(this.name=='Big Spike Slime'){
                            for(let a=0,la=9;a<la;a++){
                                this.layer.triangle(this.graphics.arms[g].middle.x+lsin(a*40-16)*18,this.graphics.arms[g].middle.y+lcos(a*40-16)*18,this.graphics.arms[g].middle.x+lsin(a*40-16)*10.5+lcos(a*40-16)*3,this.graphics.arms[g].middle.y+lcos(a*40-16)*10.5-lsin(a*40-16)*3,this.graphics.arms[g].middle.x+lsin(a*40-16)*10.5-lcos(a*40-16)*3,this.graphics.arms[g].middle.y+lcos(a*40-16)*10.5+lsin(a*40-16)*3)
                            }
                        }
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((5-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*36-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*36-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*36-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*36+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*36-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*36+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
            break
            case 'Slime Boss':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,36,36)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-45,135,101.25)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,36,36)
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((5-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*54-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*54-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*54-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*54+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*54-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*54+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
            break
            case 'Spheron':
                if(this.trigger.display.balls){
                    this.layer.noStroke()
                    for(let a=0,la=3;a<la;a++){
                        if(lcos(this.time*4+360*a/la)<=0){
                            this.layer.fill(this.flashColor(upColor(this.color.balls,lcos(this.time*4+360*a/la)*40,[1,1,1]))[0],this.flashColor(upColor(this.color.balls,lcos(this.time*4+360*a/la)*20,[1,1,1]))[1],this.flashColor(upColor(this.color.balls,lcos(this.time*4+360*a/la)*20,[1,1,1]))[2],this.fade*this.fades.balls)
                            this.layer.ellipse(lsin(this.time*4+360*a/la)*24,lcos(this.time*4+360*a/la)*4-30,10,10)
                            this.layer.fill(this.flashColor(upColor(this.color.highlight,lcos(this.time*4+360*a/la)*40,[1,1,1]))[0],this.flashColor(upColor(this.color.highlight,lcos(this.time*4+360*a/la)*20,[1,1,1]))[1],this.flashColor(upColor(this.color.highlight,lcos(this.time*4+360*a/la)*20,[1,1,1]))[2],this.fade*this.fades.balls)
                            this.layer.ellipse(lsin(this.time*4+360*a/la)*24,lcos(this.time*4+360*a/la)*4-30,4,4)
                        }
                    }
                }
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.body)[0],this.flashColor(this.color.body)[1],this.flashColor(this.color.body)[2],this.fade*this.fades.body)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-30,30,30)
                    this.layer.translate(0,-30)
                    this.layer.rotate(this.time)
                    this.layer.stroke(this.flashColor(this.color.highlight)[0],this.flashColor(this.color.highlight)[1],this.flashColor(this.color.highlight)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(3)
                    for(let a=0,la=3;a<3;a++){
                        this.layer.arc(8,0,16,12,-180,-30)
                        this.layer.rotate(360/la)
                    }
                    this.layer.rotate(-this.time)
                    this.layer.translate(0,30)
                }
                if(this.trigger.display.balls){
                    this.layer.noStroke()
                    for(let a=0,la=3;a<la;a++){
                        if(lcos(this.time*4+360*a/la)>0){
                            this.layer.fill(this.flashColor(upColor(this.color.balls,lcos(this.time*4+360*a/la)*40,[1,1,1]))[0],this.flashColor(upColor(this.color.balls,lcos(this.time*4+360*a/la)*20,[1,1,1]))[1],this.flashColor(upColor(this.color.balls,lcos(this.time*4+360*a/la)*20,[1,1,1]))[2],this.fade*this.fades.balls)
                            this.layer.ellipse(lsin(this.time*4+360*a/la)*24,lcos(this.time*4+360*a/la)*4-30,10,10)
                            this.layer.fill(this.flashColor(upColor(this.color.highlight,lcos(this.time*4+360*a/la)*40,[1,1,1]))[0],this.flashColor(upColor(this.color.highlight,lcos(this.time*4+360*a/la)*20,[1,1,1]))[1],this.flashColor(upColor(this.color.highlight,lcos(this.time*4+360*a/la)*20,[1,1,1]))[2],this.fade*this.fades.balls)
                            this.layer.ellipse(lsin(this.time*4+360*a/la)*24,lcos(this.time*4+360*a/la)*4-30,4,4)
                        }
                    }
                }
            break
            case 'Rock Golem':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,8,10,10,0)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.noStroke()
                    regPoly(this.layer,0,-48,8,16,16,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        regPoly(this.layer,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,8,10,10,0)
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((5-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*15-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*15-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*15-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*15+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*15-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*15+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
            break
            case 'Shield Particle':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,18)
                        this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body*0.2)
                        for(let a=0,la=3;a<la;a++){
                            this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,22+a*4)
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-48,36)
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body*0.2)
                    for(let a=0,la=3;a<la;a++){
                        this.layer.ellipse(0,-48,40+a*4)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,18)
                        this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body*0.2)
                        for(let a=0,la=3;a<la;a++){
                            this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,22+a*4)
                        }
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((5-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*18-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*18+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                        this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*18-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*18+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                    }
                }
            break
            case 'Goblin': case 'Sneaky Gremlin': case 'Fat Gremlin': case 'Angry Gremlin': case 'Gremlin': case 'Elf Archer':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(this.anim.thick)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    switch(this.name){
                        case 'Goblin':
                            this.layer.ellipse(0,-24,12,24)
                        break
                        case 'Sneaky Gremlin':
                            this.layer.ellipse(0,-30,8,30)
                        break
                        case 'Fat Gremlin':
                            this.layer.ellipse(0,-27,21,27)
                        break
                        case 'Angry Gremlin':
                            this.layer.ellipse(0,-42,12,33)
                        break
                        case 'Gremlin':
                            this.layer.ellipse(0,-33,9,36)
                        break
                        case 'Elf Archer':
                            this.layer.ellipse(0,-39,14,28)
                            this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                            this.layer.arc(0,-39,14,29,-180,0)
                        break
                    }
                }
                if(this.name=='Elf Archer'&&this.trigger.display.waistband){
                    this.layer.fill(this.flashColor(this.color.waistband)[0],this.flashColor(this.color.waistband)[1],this.flashColor(this.color.waistband)[2],this.fade*this.fades.waistband)
                    this.layer.noStroke()
                    for(let a=0,la=18;a<la;a++){
                        this.layer.ellipse(lsin(this.anim.direction+a*20)*7,-39,lcos(this.anim.direction+a*20)*2,5)
                    }
                }
                if(this.name=='Elf Archer'&&this.trigger.display.belt){
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.noStroke()
                    this.layer.rect(0,-39,14,1)
                }
                if(this.name=='Elf Archer'&&this.trigger.display.bows){
                    this.layer.fill(this.flashColor(this.color.bows)[0],this.flashColor(this.color.bows)[1],this.flashColor(this.color.bows)[2],this.fade*this.fades.bows)
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)>0){
                            this.layer.triangle(lsin(this.anim.direction-90+a*180)*7,-39,lsin(this.anim.direction-90+a*180)*7-lcos(this.anim.direction-90+a*180)*8,-42,lsin(this.anim.direction-90+a*180)*7-lcos(this.anim.direction-90+a*180)*8,-36)
                            this.layer.triangle(lsin(this.anim.direction-90+a*180)*7,-39,lsin(this.anim.direction-90+a*180)*7+lcos(this.anim.direction-90+a*180)*8,-42,lsin(this.anim.direction-90+a*180)*7+lcos(this.anim.direction-90+a*180)*8,-36)
                        }
                    }
                }
                if(this.name=='Elf Archer'&&this.trigger.display.scarf){
                    this.layer.fill(this.flashColor(this.color.scarf)[0],this.flashColor(this.color.scarf)[1],this.flashColor(this.color.scarf)[2],this.fade*this.fades.scarf)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-51,12,6)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(this.anim.thick)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(this.anim.thick)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(this.anim.thick,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    switch(this.name){
                        case 'Goblin':
                            this.layer.ellipse(0,-45,24,24)
                        break
                        case 'Sneaky Gremlin':
                            this.layer.ellipse(0,-54,24,27)
                        break
                        case 'Fat Gremlin':
                            this.layer.ellipse(0,-48,30,27)
                        break
                        case 'Angry Gremlin':
                            this.layer.ellipse(0,-66,24,24)
                        break
                        case 'Gremlin':
                            this.layer.ellipse(0,-60,27,27)
                        break
                        case 'Elf Archer':
                            this.layer.ellipse(0,-64.5,27,27)
                        break
                    }
                    if(this.trigger.display.ear&&abs(lcos(this.anim.direction)>0.1)){
                        switch(this.name){
                            case 'Goblin':
                                this.layer.triangle(-9*lcos(this.anim.direction),-48,-3*lcos(this.anim.direction),-54,-12*lcos(this.anim.direction),-57)
                                this.layer.triangle(9*lcos(this.anim.direction),-48,3*lcos(this.anim.direction),-54,12*lcos(this.anim.direction),-57)
                            break
                            case 'Sneaky Gremlin':
                                this.layer.triangle(-9*lcos(this.anim.direction),-57,-3*lcos(this.anim.direction),-63,-18*lcos(this.anim.direction),-61)
                                this.layer.triangle(9*lcos(this.anim.direction),-57,3*lcos(this.anim.direction),-63,18*lcos(this.anim.direction),-61)
                            break
                            case 'Fat Gremlin':
                                this.layer.triangle(-9*lcos(this.anim.direction),-51,-3*lcos(this.anim.direction),-57,-18*lcos(this.anim.direction),-55)
                                this.layer.triangle(9*lcos(this.anim.direction),-51,3*lcos(this.anim.direction),-57,18*lcos(this.anim.direction),-55)
                            break
                            case 'Angry Gremlin':
                                this.layer.triangle(-8*lcos(this.anim.direction),-69,-2*lcos(this.anim.direction),-75,-16*lcos(this.anim.direction),-73)
                                this.layer.triangle(8*lcos(this.anim.direction),-69,2*lcos(this.anim.direction),-75,16*lcos(this.anim.direction),-73)
                            break
                            case 'Gremlin':
                                this.layer.triangle(-9*lcos(this.anim.direction),-63,-3*lcos(this.anim.direction),-69,-18*lcos(this.anim.direction),-67)
                                this.layer.triangle(9*lcos(this.anim.direction),-63,3*lcos(this.anim.direction),-69,18*lcos(this.anim.direction),-67)
                            break
                            case 'Elf Archer':
                                this.layer.triangle(-12*lcos(this.anim.direction),-67,-8*lcos(this.anim.direction),-73,-21*lcos(this.anim.direction),-74)
                                this.layer.triangle(12*lcos(this.anim.direction),-67,8*lcos(this.anim.direction),-73,21*lcos(this.anim.direction),-74)
                            break
                        }
                    }
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(this.anim.thick,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(this.anim.thick)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Fat Scrapper': case 'Lalex':
                if(this.name=='Fat Scrapper'&&this.trigger.display.goggles&&lcos(this.anim.direction)<=0){
                    this.layer.fill(this.flashColor(this.color.goggles)[0],this.flashColor(this.color.goggles)[1],this.flashColor(this.color.goggles)[2],this.fade*this.fades.goggles)
                    this.layer.stroke(120,120,120,this.fade)
                    this.layer.strokeWeight(2)
                    this.layer.rect(lsin(this.anim.direction)*15.5,this.parts.eyeLevel,lcos(this.anim.direction)*20,7,2)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-39,36,30)
                    if(this.name=='Lalex'){
                        this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                        this.layer.arc(0,-39,36,30,-180,0)
                    }
                }
                if(this.name=='Fat Scrapper'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.belt[0])[0],this.flashColor(this.color.belt[0])[1],this.flashColor(this.color.belt[0])[2],this.fade*this.fades.belt)
                    this.layer.rect(0,-39,38,3)
                    if(lcos(this.anim.direction)>0){
                        this.layer.fill(this.flashColor(this.color.belt[1])[0],this.flashColor(this.color.belt[1])[1],this.flashColor(this.color.belt[1])[2],this.fade*this.fades.belt)
                        this.layer.rect(lsin(this.anim.direction)*19,-39,8*lcos(this.anim.direction),8)
                        this.layer.fill(this.flashColor(this.color.belt[2])[0],this.flashColor(this.color.belt[2])[1],this.flashColor(this.color.belt[2])[2],this.fade*this.fades.belt)
                        this.layer.rect(lsin(this.anim.direction)*19,-39,4*lcos(this.anim.direction),4)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                if(this.name=='Lalex'&&this.trigger.display.logo&&lcos(this.anim.direction)>0){
                    this.layer.stroke(...this.flashColor(this.color.logo),this.fade*this.fades.logo)
                    this.layer.strokeWeight(2)
                    this.layer.noFill()
                    this.layer.push()
                    this.layer.translate(lsin(this.anim.direction)*18,-45)
                    this.layer.scale(lcos(this.anim.direction))
                    this.layer.line(-1,-4,-1,4)
                    this.layer.arc(-1,0,6,8,-90,90)
                    this.layer.pop()
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-66,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.name=='Fat Scrapper'&&this.trigger.display.goggles&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.goggles)[0],this.flashColor(this.color.goggles)[1],this.flashColor(this.color.goggles)[2],this.fade*this.fades.goggles)
                    this.layer.stroke(120,120,120,this.fade)
                    this.layer.strokeWeight(2)
                    this.layer.rect(lsin(this.anim.direction)*15.5,this.parts.eyeLevel,lcos(this.anim.direction)*20,7,2)
                }
            break
            case 'Donu': case 'Deca':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    switch(this.name){
                        case 'Donu':
                            this.layer.noFill()
                            for(let a=0,la=2;a<la;a++){
                                this.layer.stroke(
                                    this.flashColor(mergeColor(this.color.skin.body[0],this.color.skin.body[1],0.5+0.25*lcos(this.anim.direction+(lsin(this.anim.direction)<0?-1:1)*(-90+a*180))))[0],
                                    this.flashColor(mergeColor(this.color.skin.body[0],this.color.skin.body[1],0.5+0.25*lcos(this.anim.direction+(lsin(this.anim.direction)<0?-1:1)*(-90+a*180))))[1],
                                    this.flashColor(mergeColor(this.color.skin.body[0],this.color.skin.body[1],0.5+0.25*lcos(this.anim.direction+(lsin(this.anim.direction)<0?-1:1)*(-90+a*180))))[2],this.fade*this.fades.skin.body)
                                this.layer.strokeWeight(30)
                                this.layer.arc(0,-55,60*(abs(lsin(this.anim.direction+(lsin(this.anim.direction)<0?-1:1)*(-90+a*180)))*0.95+0.05),60,-90+a*180+(lsin(this.anim.direction)<0?180:0),90+a*180+(lsin(this.anim.direction)<0?180:0))
                            }
                        break
                        case 'Deca':
                            this.layer.noStroke()
                            for(let a=0,la=4;a<la;a++){
                                if(lcos(-45+a*90+this.anim.direction)>0){
                                    this.layer.fill(this.flashColor(this.color.skin.body[a])[0],this.flashColor(this.color.skin.body[a])[1],this.flashColor(this.color.skin.body[a])[2],this.fade*this.fades.skin.body)
                                    this.layer.triangle(0,-100,lsin(-45+a*90+this.anim.direction)*32-lcos(-45+a*90+this.anim.direction)*32,-55,lsin(-45+a*90+this.anim.direction)*32+lcos(-45+a*90+this.anim.direction)*32,-55)
                                    this.layer.fill(this.flashColor(this.color.skin.body[(a+2)%4])[0],this.flashColor(this.color.skin.body[(a+2)%4])[1],this.flashColor(this.color.skin.body[(a+2)%4])[2],this.fade*this.fades.skin.body)
                                    this.layer.triangle(0,-10,lsin(-45+a*90+this.anim.direction)*32-lcos(-45+a*90+this.anim.direction)*32,-55,lsin(-45+a*90+this.anim.direction)*32+lcos(-45+a*90+this.anim.direction)*32,-55)
                                }
                            }
                        break
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
            break
            case 'Flame':
                this.layer.fill(this.flashColor(this.color)[0],this.flashColor(this.color)[1],this.flashColor(this.color)[2],this.fade)
                this.layer.quad(0,-30-6*this.anim.glow,-6*this.anim.glow,-30,0,-30+6*this.anim.glow,6*this.anim.glow,-30)
                regTriangle(this.layer,lsin(this.anim.direction)*18*this.anim.glow,-30+lcos(this.anim.direction)*18*this.anim.glow,3,3,this.anim.direction)
                this.layer.fill(this.flashColor(this.color)[0],this.flashColor(this.color)[1],this.flashColor(this.color)[2],this.fade/6)
                for(let a=0,la=5;a<la;a++){
                    this.layer.quad(0,-30+(-7.5-a*1.5)*this.anim.glow,(-7.5-a*1.5)*this.anim.glow,-30,0,-30+(7.5+a*1.5)*this.anim.glow,(7.5+a*1.5)*this.anim.glow,-30)
                    regTriangle(this.layer,lsin(this.anim.direction)*18*this.anim.glow,-30+lcos(this.anim.direction)*18*this.anim.glow,4.5+a*1.5,4.5+a*1.5,this.anim.direction)
                }
            break
            case 'Hexaghost Orb':
                this.layer.fill(this.flashColor(this.color)[0],this.flashColor(this.color)[1],this.flashColor(this.color)[2],this.fade)
                this.layer.ellipse(0,-30,12*this.anim.glow,12*this.anim.glow)
                this.layer.fill(this.flashColor(this.color)[0],this.flashColor(this.color)[1],this.flashColor(this.color)[2],this.fade/6)
                for(let a=0,la=5;a<la;a++){
                    this.layer.ellipse(0,-30,(15+a*3)*this.anim.glow,(15+a*3)*this.anim.glow)
                }
            break
            case 'Hexaghost Core':
                if(this.trigger.display.glow){
                    for(let a=0,la=6;a<la;a++){
                        this.layer.fill(this.flashColor(this.color.glow[a])[0],this.flashColor(this.color.glow[a])[1],this.flashColor(this.color.glow[a])[2],this.fade/6)
                        this.layer.ellipse(0,-30,(90-a*10)*this.anim.glow,(90-a*10)*this.anim.glow)
                    }
                }
                if(this.trigger.display.base){
                    this.layer.fill(this.flashColor(this.color.base[0])[0],this.flashColor(this.color.base[0])[1],this.flashColor(this.color.base[0])[2],this.fade)
                    regPoly(this.layer,-2,-30,6,18,18,0)
                    this.layer.fill(this.flashColor(this.color.base[1])[0],this.flashColor(this.color.base[1])[1],this.flashColor(this.color.base[1])[2],this.fade)
                    regPoly(this.layer,2,-30,6,18,18,0)
                }
            break
            case 'Bronze Automaton':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(8)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(8)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(8)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                if(this.trigger.display.gear){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.gear)[0],this.flashColor(this.color.gear)[1],this.flashColor(this.color.gear)[2],this.fade*this.fades.gear)
                    this.layer.translate(-21,-60)
                    this.layer.rotate(game.timer*3)
                    this.layer.ellipse(0,0,16,16)
                    for(let g=0;g<4;g++){
                        this.layer.rect(lsin(g*90)*10,lcos(g*90)*10,6,6)
                    }
                    this.layer.rotate(game.timer*-3)
                    this.layer.translate(42,0)
                    this.layer.rotate(game.timer*3)
                    this.layer.ellipse(0,0,16,16)
                    for(let g=0;g<4;g++){
                        this.layer.rect(lsin(g*90)*10,lcos(g*90)*10,6,6)
                    }
                    this.layer.rotate(game.timer*-3)
                    this.layer.translate(-21,60)
                }
                if(this.trigger.display.main){
                    this.layer.noStroke()
                    for(let a=0,la=9;a<la;a++){
                        this.layer.fill(this.flashColor(mergeColor(this.color.main[0],this.color.main[1],a/la))[0],this.flashColor(mergeColor(this.color.main[0],this.color.main[1],a/la))[1],this.flashColor(mergeColor(this.color.main[0],this.color.main[1],a/la))[2],this.fade*this.fades.main)
                        this.layer.rect(0,-60,48-a*4,60-a*5,3)
                    }
                }
                if(this.trigger.display.diamond){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.diamond[0])[0],this.flashColor(this.color.diamond[0])[1],this.flashColor(this.color.diamond[0])[2],this.fade*this.fades.diamond)
                    this.layer.quad(3,-69,12,-78,21,-69,12,-60)
                    this.layer.fill(this.flashColor(this.color.diamond[1])[0],this.flashColor(this.color.diamond[1])[1],this.flashColor(this.color.diamond[1])[2],this.fade*this.fades.diamond)
                    this.layer.quad(6,-69,12,-75,18,-69,12,-63)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(8,lcos(this.spin.arms[g].top+this.anim.direction)*10+4))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
            break
            case 'Bronze Orb C': case 'Bronze Orb A':
                if(this.trigger.display.gear){
                    this.layer.translate(0,-30)
                    this.layer.rotate(game.timer*3)
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.gear)[0],this.flashColor(this.color.gear)[1],this.flashColor(this.color.gear)[2],this.fade*this.fades.gear)
                    for(let g=0;g<4;g++){
                        this.layer.rect(lsin(g*90)*10,lcos(g*90)*10,6,6)
                    }
                    this.layer.rotate(game.timer*-3)
                    this.layer.translate(0,30)
                }
                if(this.trigger.display.main){
                    this.layer.noStroke()
                    for(let a=0,la=9;a<la;a++){
                        this.layer.fill(this.flashColor(mergeColor(this.color.main[0],this.color.main[1],a/la))[0],this.flashColor(mergeColor(this.color.main[0],this.color.main[1],a/la))[1],this.flashColor(mergeColor(this.color.main[0],this.color.main[1],a/la))[2],this.fade*this.fades.main)
                        this.layer.ellipse(0,-30,18-a*2)
                        switch(this.name){
                            case 'Bronze Orb C':
                                this.layer.triangle(-3,-42,3,-42,0,-56+a*2)
                                this.layer.triangle(-3,-18,3,-18,0,-4-a*2)
                            break
                            case 'Bronze Orb A':
                                this.layer.triangle(-12,-33,-12,-27,-26+a*2,-30)
                                this.layer.triangle(12,-33,12,-27,26-a*2,-30)
                            break
                        }
                    }
                }
                if(this.trigger.display.diamond){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.diamond[0])[0],this.flashColor(this.color.diamond[0])[1],this.flashColor(this.color.diamond[0])[2],this.fade*this.fades.diamond)
                    this.layer.quad(-6,-30,0,-36,6,-30,0,-24)
                    this.layer.fill(this.flashColor(this.color.diamond[1])[0],this.flashColor(this.color.diamond[1])[1],this.flashColor(this.color.diamond[1])[2],this.fade*this.fades.diamond)
                    this.layer.quad(-3,-30,0,-33,3,-30,0,-27)
                }
            break
            case 'Management Robot': case 'Management Prototype': case 'Destructor Bot': case 'Purge X02': case 'Carbonado Robot':
                for(let g=0;g<2;g++){
                    if(this.name=='Purge X02'&&this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.body)
                    this.layer.strokeWeight(4)
                    this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                    if(this.name=='Management Prototype'){
                        for(let a=0,la=6;a<la;a++){
                            if(lcos(this.anim.direction+a*60)>0){
                                this.layer.rect(7.5*lsin(this.anim.direction+a*60),-42,8.5*lcos(this.anim.direction+a*60),24)
                            }
                        }
                        for(let a=0,la=4;a<la;a++){
                            if(lcos(this.anim.direction+a*90)>0){
                                this.layer.rect(5*lsin(this.anim.direction+a*90),-57,10*lcos(this.anim.direction+a*90),6)
                            }
                        }
                    }else{
                        for(let a=0,la=4;a<la;a++){
                            if(lcos(this.anim.direction+a*90)>0){
                                this.layer.rect(7.5*lsin(this.anim.direction+a*90),-45,15*lcos(this.anim.direction+a*90),30)
                            }
                        }
                    }
                }
                if(this.name=='Destructor Bot'&&this.trigger.display.bomb){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.bomb)[0],this.flashColor(this.color.bomb)[1],this.flashColor(this.color.bomb)[2],this.fade*this.fades.bomb)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>0){
                            this.layer.ellipse(7.5*lsin(this.anim.direction+a*90),-45,6*lcos(this.anim.direction+a*90),6)
                        }
                    }
                    this.layer.arc(0,-90,6,6,-180,0)
                }
                for(let g=0;g<2;g++){
                    if(this.name=='Purge X02'&&this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6)&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.name=='Carbonado Robot'&&this.trigger.display.light){
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        this.layer.fill(this.flashColor(this.color.light)[0],this.flashColor(this.color.light)[1],this.flashColor(this.color.light)[2],this.fade*this.fades.light)
                        if(lcos(this.anim.direction-90+a*180)>0){
                            this.layer.ellipse(13.5*lsin(this.anim.direction-90+a*180),-75,12,12)
                        }
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.arms)
                    this.layer.strokeWeight(4)
                    this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                    if(this.name=='Management Prototype'){
                        for(let a=0,la=6;a<la;a++){
                            if(lcos(this.anim.direction+a*60)>0){
                                this.layer.rect(13.5*lsin(this.anim.direction+a*60),-75,15.5*lcos(this.anim.direction+a*60),27)
                            }
                        }
                    }else{
                        for(let a=0,la=4;a<la;a++){
                            if(lcos(this.anim.direction+a*90)>0){
                                this.layer.rect(13.5*lsin(this.anim.direction+a*90),-75,27*lcos(this.anim.direction+a*90),27)
                            }
                        }
                    }
                }
                if(this.name=='Carbonado Robot'&&this.trigger.display.light){
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        this.layer.fill(this.flashColor(this.color.light)[0],this.flashColor(this.color.light)[1],this.flashColor(this.color.light)[2],this.fade*this.fades.light)
                        if(lcos(this.anim.direction-90+a*180)>=0){
                            this.layer.arc(13.5*lsin(this.anim.direction-90+a*180),-75,12*min(lsin(this.anim.direction-90+a*180)+1,1),12,-90,90)
                            this.layer.arc(13.5*lsin(this.anim.direction-90+a*180),-75,-12*max(lsin(this.anim.direction-90+a*180)-1,-1),12,90,270)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.name=='Purge X02'&&this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.6)&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.name=='Purge X02'&&this.trigger.display.hat){
                    this.layer.stroke(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade)
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade)
                    this.layer.strokeWeight(4)
                    this.layer.line(-20,-90,20,-90)
                    this.layer.quad(-15,-90,15,-90,10,-98,-10,-98)
                }
            break
            case 'Sentry':
                if(this.trigger.display.turret&&lcos(this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.turret)[0],this.flashColor(this.color.turret)[1],this.flashColor(this.color.turret)[2],this.fade)
                    this.layer.rect(14*lsin(this.anim.direction),-20,12+4*lcos(this.anim.direction),8)
                }
                if(this.trigger.display.leg){
                    this.layer.stroke(this.flashColor(this.color.leg)[0],this.flashColor(this.color.leg)[1],this.flashColor(this.color.leg)[2],this.fade*this.fades.leg)
                    this.layer.strokeWeight(3)
                    this.layer.line(0,-20,10,0)
                    this.layer.line(0,-20,-10,0)
                }
                if(this.trigger.display.body){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.body)[0],this.flashColor(this.color.body)[1],this.flashColor(this.color.body)[2],this.fade*this.fades.body)
                    this.layer.ellipse(0,-20,20,20)
                }
                if(this.trigger.display.turret&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.turret)[0],this.flashColor(this.color.turret)[1],this.flashColor(this.color.turret)[2],this.fade)
                    this.layer.rect(14*lsin(this.anim.direction),-20,12-4*lcos(this.anim.direction),8)
                }
            break
            case 'Flying Rock':
                if(this.trigger.display.body){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.body)[0],this.flashColor(this.color.body)[1],this.flashColor(this.color.body)[2],this.fade*this.fades.body)
                    regPoly(this.layer,0,-48,8,12,12,0)
                }
                if(this.trigger.display.eye[0]){
                    this.minorDisplayGeneral(0,0)
                }
            break
            case 'Repulsor':
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.skin.body[6])[0],this.flashColor(this.color.skin.body[6])[1],this.flashColor(this.color.skin.body[6])[2],this.fade*this.fades.skin.body)
                    this.layer.triangle(0,-42,0,-30,-lsin(this.anim.direction)*48,-40.5)
                    for(let a=0,la=6;a<la;a++){
                        if(lcos(-30+a*60+this.anim.body)>0){
                            this.layer.fill(this.flashColor(this.color.skin.body[a])[0],this.flashColor(this.color.skin.body[a])[1],this.flashColor(this.color.skin.body[a])[2],this.fade*this.fades.skin.body)
                            this.layer.triangle(0,-48,lsin(-30+a*60+this.anim.body)*15-lcos(-30+a*60+this.anim.body)*10,-36,lsin(-30+a*60+this.anim.body)*15+lcos(-30+a*60+this.anim.body)*10,-36)
                            this.layer.fill(this.flashColor(this.color.skin.body[(a+3)%6])[0],this.flashColor(this.color.skin.body[(a+3)%6])[1],this.flashColor(this.color.skin.body[(a+3)%6])[2],this.fade*this.fades.skin.body)
                            this.layer.triangle(0,-24,lsin(-30+a*60+this.anim.body)*15-lcos(-30+a*60+this.anim.body)*10,-36,lsin(-30+a*60+this.anim.body)*15+lcos(-30+a*60+this.anim.body)*10,-36)
                        }
                    }
                }
            break
            case 'Bush Thing':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,16)
                        for(let a=0,la=9;a<la;a++){
                            this.layer.ellipse(lsin(360*a/la)*6+this.graphics.arms[g].middle.x,lcos(360*a/la)*6+this.graphics.arms[g].middle.y,7)
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-21,48,48)
                    for(let a=0,la=15;a<la;a++){
                        this.layer.ellipse(lsin(360*a/la)*18,lcos(360*a/la)*18-21,14)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,16,16)
                        for(let a=0,la=9;a<la;a++){
                            this.layer.ellipse(lsin(360*a/la)*6+this.graphics.arms[g].middle.x,lcos(360*a/la)*6+this.graphics.arms[g].middle.y,7)
                        }
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((5-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*22-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*22-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*22-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*22+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*22-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*22+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
            break
            case 'Fireball':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,12,12)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.arc(0,-24,30,30,-15,195)
                    this.layer.quad(0,-23,lcos(15)*15,-24-lsin(15)*15,0,-72,-lcos(15)*15,-24-lsin(15)*15)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,12,12)
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((5-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*15-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*15-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*15-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*15+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*15-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*15+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
            break
            case 'Dead Shell':
                for(let g=0;g<4;g++){
                    this.layer.stroke(this.flashColor(upColor(this.color.skin.legs,lcos(this.spin.legs[g]+this.anim.direction)*20,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.legs,lcos(this.spin.legs[g]+this.anim.direction)*20,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.legs,lcos(this.spin.legs[g]+this.anim.direction)*20,[1,1,1]))[2],this.fade*this.fades.skin.legs)
                    this.layer.strokeWeight(6)
                    this.layer.noFill()
                    if(lsin(this.anim.direction+this.spin.legs[g])>0){
                        this.layer.arc(12*lsin(this.anim.direction+this.spin.legs[g]),0,36*lsin(this.anim.direction+this.spin.legs[g]),48,-90,0)
                    }else{
                        this.layer.arc(12*lsin(this.anim.direction+this.spin.legs[g]),0,-36*lsin(this.anim.direction+this.spin.legs[g]),48,-180,-90)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-36,60,60)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
            break
            case 'Management Drone':
                if(this.trigger.display.skin.body){
                    this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.body)
                    this.layer.strokeWeight(4)
                    this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>=0){
                            this.layer.rect(20*lsin(this.anim.direction+a*90),-60,40*lcos(this.anim.direction+a*90),12)
                            this.layer.rect(15*lsin(this.anim.direction+a*90),-51,30*lcos(this.anim.direction+a*90),6)
                            for(let b=0,lb=4;b<lb;b++){
                                this.layer.rect(3*lsin(this.anim.direction+a*90)+20*lsin(this.anim.direction+b*90-45),-72,6*lcos(this.anim.direction+a*90),12)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Personnel Carrier':
                if(this.trigger.display.wheel){
                    this.layer.stroke(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.wheel)
                    this.layer.strokeWeight(4)
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.wheel)
                    for(let a=0,la=4;a<la;a++){
                        this.layer.ellipse(-20*lsin(this.anim.direction-30+a*60+floor(a/2)*60),-10,20*lsin(this.anim.direction),20)
                    }
                }
                if(this.trigger.display.body){
                    this.layer.stroke(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(4)
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>=0){
                            this.layer.rect((40-a%2*20)*lsin(this.anim.direction+a*90),-30,(40+a%2*40)*lcos(this.anim.direction+a*90),40)
                            this.layer.rect(15*lsin(this.anim.direction+a*90),-53,30*lcos(this.anim.direction+a*90),6)
                        }
                    }
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)>=0){
                            this.layer.ellipse(20*lsin(this.anim.direction-90+a*180),-30,20*lcos(this.anim.direction-90+a*180),20)
                        }
                    }
                    this.layer.line(lsin(this.anim.direction-15)*30,-56,lsin(this.anim.direction-15)*30,-64)
                }
                if(this.trigger.display.window&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.window)[0],this.flashColor(this.color.window)[1],this.flashColor(this.color.window)[2],this.fade*this.fades.window)
                    this.layer.noStroke()
                    this.layer.rect(40*lsin(this.anim.direction),-35,25*lcos(this.anim.direction),10)
                }
            break
            case 'Executive':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-48,13,39)
                    this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                    this.layer.arc(0,-48,14,40,-180,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.tie&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.tie[0])[0],this.flashColor(this.color.tie[0])[1],this.flashColor(this.color.tie[0])[2],this.fade*this.fades.tie)
                    this.layer.quad(lsin(this.anim.direction)*6-lcos(this.anim.direction)*2.5,-54,lsin(this.anim.direction)*3,-70,lsin(this.anim.direction)*6+lcos(this.anim.direction)*2.5,-54,lsin(this.anim.direction)*9,-50)
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-87,42,42)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Mechanized':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(6)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(6)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(6)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-87,30,30)
                }
                if(this.trigger.display.skin.body){
                    this.layer.stroke(this.flashColor(this.color.skin.out)[0],this.flashColor(this.color.skin.out)[1],this.flashColor(this.color.skin.out)[2],this.fade*this.fades.skin.body)
                    this.layer.strokeWeight(4)
                    this.layer.fill(this.flashColor(this.color.skin.in)[0],this.flashColor(this.color.skin.in)[1],this.flashColor(this.color.skin.in)[2],this.fade*this.fades.skin.body)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>=0){
                            this.layer.rect((7.5+a%2*7.5)*lsin(this.anim.direction+a*90),-51,(30-a%2*15)*lcos(this.anim.direction+a*90),42)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(6)
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(this.flashColor(this.color.skin.limb)[0],this.flashColor(this.color.skin.limb)[1],this.flashColor(this.color.skin.limb)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(6)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Louse':
                if(this.trigger.display.antenna&&lcos(this.anim.direction)<=0){
                    this.layer.fill(this.flashColor(this.color.antenna)[0],this.flashColor(this.color.antenna)[1],this.flashColor(this.color.antenna)[2],this.fade*this.fades.antenna)
                    this.layer.triangle(20*abs(lsin(this.anim.direction))-2,-3,20*abs(lsin(this.anim.direction))+2,-3,20*abs(lsin(this.anim.direction)),-15)
                }
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.body[0])[0],this.flashColor(this.color.body[0])[1],this.flashColor(this.color.body[0])[2],this.fade*this.fades.body)
                    this.layer.arc(0,0,24+abs(lsin(this.anim.direction))*24,24,-180,-156)
                    this.layer.arc(0,0,24+abs(lsin(this.anim.direction))*24,24,-120,-60)
                    this.layer.arc(0,0,24+abs(lsin(this.anim.direction))*24,24,-24,0)
                    this.layer.fill(this.flashColor(this.color.body[1])[0],this.flashColor(this.color.body[1])[1],this.flashColor(this.color.body[1])[2],this.fade*this.fades.body)
                    this.layer.arc(0,0,24+abs(lsin(this.anim.direction))*24,24,-156,-120)
                    this.layer.arc(0,0,24+abs(lsin(this.anim.direction))*24,24,-60,-24)
                }
                if(this.trigger.display.antenna&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.antenna)[0],this.flashColor(this.color.antenna)[1],this.flashColor(this.color.antenna)[2],this.fade*this.fades.antenna)
                    this.layer.triangle(20*lsin(this.anim.direction)-2,-3,20*lsin(this.anim.direction)+2,-3,20*lsin(this.anim.direction),-15)
                }
            break
            case 'Fungling':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,14,14)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-24,36,36)
                }
                if(this.trigger.display.skin.tumor){
                    this.layer.fill(this.flashColor(this.color.skin.tumor)[0],this.flashColor(this.color.skin.tumor)[1],this.flashColor(this.color.skin.tumor)[2],this.fade*this.fades.skin.tumor)
                    this.layer.noStroke()
                    this.layer.ellipse(10,-39,11,11)
                    this.layer.ellipse(4,-40,8,8)
                    this.layer.ellipse(13,-35,7,7)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,14,14)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Hwurmp': case 'Antihwurmp':
                if(this.trigger.display.mouth&&lcos(this.anim.direction)<=0){
                    this.layer.stroke(this.flashColor(this.color.mouth)[0],this.flashColor(this.color.mouth)[1],this.flashColor(this.color.mouth)[2],this.fade*this.fades.mouth)
                    this.layer.strokeWeight(3)
                    this.layer.ellipse(lsin(this.anim.direction)*18*this.anim.body,-18,12*lcos(this.anim.direction),6)
                }
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.body)[0],this.flashColor(this.color.body)[1],this.flashColor(this.color.body)[2],this.fade*this.fades.body)
                    this.layer.noStroke()
                    this.layer.translate(0,-30)
                    this.layer.ellipse(0,0,40*this.anim.body,40*this.anim.body)
                    for(var a=0,la=12;a<la;a++){
                        this.layer.rotate(30)
                        this.layer.triangle(-5,-20*this.anim.body+4,5,-20*this.anim.body+4,0,-20*this.anim.body-4)
                    }
                    this.layer.translate(0,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0){
                    this.layer.stroke(this.flashColor(this.color.mouth)[0],this.flashColor(this.color.mouth)[1],this.flashColor(this.color.mouth)[2],this.fade*this.fades.mouth)
                    this.layer.strokeWeight(3)
                    this.layer.ellipse(lsin(this.anim.direction)*18*this.anim.body,-18,12*lcos(this.anim.direction),6)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((5-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*20*this.anim.body-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*20*this.anim.body-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*20*this.anim.body-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*20*this.anim.body+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*20*this.anim.body-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*20*this.anim.body+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
            break
            case 'Bee':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,6,6)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-18,9,9)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,6,6)
                    }
                }
            break
            case 'Pixie':
                if(this.trigger.display.glow){
                    this.layer.fill(this.color.glow[0],this.color.glow[1],this.color.glow[2],this.fade*this.fades.glow/12)
                    this.layer.noStroke()
                    for(let a=0,la=8;a<la;a++){
                        this.layer.ellipse(0,-18,15+a*3,15+a*3)
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms*0.6)
                        this.layer.noStroke()
                        this.layer.push()
                        this.layer.translate(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y+lsin(this.time*10)*-2)
                        this.layer.rotate(this.graphics.arms[g].middle.x*-(4+lsin(this.time*10)*2))
                        this.layer.ellipse(0,0,9,6)
                        this.layer.pop()
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body*0.8)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-18,12,12)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms*0.6)
                        this.layer.noStroke()
                        this.layer.push()
                        this.layer.translate(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y+lsin(this.time*10)*-2)
                        this.layer.rotate(this.graphics.arms[g].middle.x*-(4+lsin(this.time*10)*2))
                        this.layer.ellipse(0,0,9,6)
                        this.layer.pop()
                    }
                }
            break
            case 'Glimerrer':
                if(this.trigger.display.crystal){
                    for(let a=0,la=3;a<la;a++){
                        this.layer.fill(this.flashColor(this.color.crystal[a])[0],this.flashColor(this.color.crystal[a])[1],this.flashColor(this.color.crystal[a])[2],this.fade*this.fades.crystal)
                        for(let b=0,lb=5;b<lb;b++){
                            this.layer.quad(0,0,
                                (lsin(-72+b*36)*30-lcos(-72+b*36)*5*(1-a/la))*(0.8+abs(lsin(this.anim.direction))),lcos(-72+b*36)*-36-lsin(-72+b*36)*6*(1-a/la),
                                lsin(-72+b*36)*(40-a/la*10)*(1+abs(lsin(this.anim.direction))),lcos(-72+b*36)*-(48-a/la*12),
                                (lsin(-72+b*36)*30+lcos(-72+b*36)*5*(1-a/la))*(0.8+abs(lsin(this.anim.direction))),lcos(-72+b*36)*-36+lsin(-72+b*36)*6*(1-a/la))
                        }
                    }
                }
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.body[0])[0],this.flashColor(this.color.body[0])[1],this.flashColor(this.color.body[0])[2],this.fade*this.fades.body)
                    this.layer.arc(0,0,48+abs(lsin(this.anim.direction))*48,60,-180,-150)
                    this.layer.arc(0,0,48+abs(lsin(this.anim.direction))*48,60,-114,-66)
                    this.layer.arc(0,0,48+abs(lsin(this.anim.direction))*48,60,-30,0)
                    this.layer.fill(this.flashColor(this.color.body[1])[0],this.flashColor(this.color.body[1])[1],this.flashColor(this.color.body[1])[2],this.fade*this.fades.body)
                    this.layer.arc(0,0,48+abs(lsin(this.anim.direction))*48,60,-150,-114)
                    this.layer.arc(0,0,48+abs(lsin(this.anim.direction))*48,60,-66,-30)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((5-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*40-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*40-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*40-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*40+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*40-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*40+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
            break
            case 'Host':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[0],this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[1],this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[2],this.fade*this.fades.body)
                    this.layer.noStroke()
                    this.layer.arc(0,-30,36,36,-this.anim.direction,-this.anim.direction+180)
                    regPoly(this.layer,0,-30,4,14,14,this.anim.direction)
                    this.layer.noFill()
                    this.layer.stroke(this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[0],this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[1],this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(3)
                    this.layer.strokeCap(SQUARE)
                    this.layer.arc(0,-30,45,45,-this.anim.direction,-this.anim.direction+180)
                    this.layer.strokeCap(ROUND)
                }
            break
            case 'Host Drone':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[0],this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[1],this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[2],this.fade*this.fades.body)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-30,12,12)
                    this.layer.noFill()
                    this.layer.stroke(this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[0],this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[1],this.flashColor(mergeColor(this.color.body,[255,255,255],this.anim.body))[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(3)
                    this.layer.strokeCap(SQUARE)
                    this.layer.arc(0,-30,21,21,-this.anim.direction-210,-this.anim.direction+30)
                    this.layer.line(9*lcos(-this.anim.direction-210),-30+9*lsin(-this.anim.direction-210),15*lcos(-this.anim.direction-210),-30+15*lsin(-this.anim.direction-210))
                    this.layer.line(9*lcos(-this.anim.direction+30),-30+9*lsin(-this.anim.direction+30),15*lcos(-this.anim.direction+30),-30+15*lsin(-this.anim.direction+30))
                    this.layer.strokeCap(ROUND)
                }
            break
            case 'Darkblot':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*20,[1,1,1])),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,14,14)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.arc(0,3,48,48,-180,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[0],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[1],this.flashColor(upColor(this.color.skin.arms,lcos(this.spin.arms[g].top+this.anim.direction)*50,[1,1,1]))[2],this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,14,14)
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((5-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        if(this.anim.eye[g]==0){
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*21-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                            this.layer.point(lsin(this.spin.eye[g]+this.anim.direction)*21-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel)
                        }else{
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*21-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*21+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                            this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*21-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*21+(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                        }
                    }
                }
            break
            case 'Glitch': case 'Glitched Giant':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(this.flashColor(this.color.skin.arms[g])[0],this.flashColor(this.color.skin.arms[g])[1],this.flashColor(this.color.skin.arms[g])[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.name=='Glitched Giant'&&this.trigger.display.armor){
                            this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                            this.layer.strokeWeight(5)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.6+this.graphics.arms[g].middle.x*0.4,this.graphics.arms[g].top.y*0.6+this.graphics.arms[g].middle.y*0.4,
                                this.graphics.arms[g].top.x*0.4+this.graphics.arms[g].middle.x*0.6,this.graphics.arms[g].top.y*0.4+this.graphics.arms[g].middle.y*0.6)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.6+this.graphics.arms[g].bottom.x*0.4,this.graphics.arms[g].middle.y*0.6+this.graphics.arms[g].bottom.y*0.4,
                                this.graphics.arms[g].middle.x*0.4+this.graphics.arms[g].bottom.x*0.6,this.graphics.arms[g].middle.y*0.4+this.graphics.arms[g].bottom.y*0.6)
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-48,13,39)
                }
                if(this.name=='Glitched Giant'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.rect(0,-45,14,3)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(this.flashColor(this.color.skin.arms[g])[0],this.flashColor(this.color.skin.arms[g])[1],this.flashColor(this.color.skin.arms[g])[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.name=='Glitched Giant'&&this.trigger.display.armor){
                            this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                            this.layer.strokeWeight(5)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.6+this.graphics.arms[g].middle.x*0.4,this.graphics.arms[g].top.y*0.6+this.graphics.arms[g].middle.y*0.4,
                                this.graphics.arms[g].top.x*0.4+this.graphics.arms[g].middle.x*0.6,this.graphics.arms[g].top.y*0.4+this.graphics.arms[g].middle.y*0.6)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.6+this.graphics.arms[g].bottom.x*0.4,this.graphics.arms[g].middle.y*0.6+this.graphics.arms[g].bottom.y*0.4,
                                this.graphics.arms[g].middle.x*0.4+this.graphics.arms[g].bottom.x*0.6,this.graphics.arms[g].middle.y*0.4+this.graphics.arms[g].bottom.y*0.6)
                        }
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(this.flashColor(this.color.skin.legs[h])[0],this.flashColor(this.color.skin.legs[h])[1],this.flashColor(this.color.skin.legs[h])[2],this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                                if(this.name=='Glitched Giant'&&this.trigger.display.armor){
                                    this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                                    this.layer.strokeWeight(5)
                                    this.layer.line(
                                        this.graphics.legs[h].top.x*0.6+this.graphics.legs[h].middle.x*0.4,this.graphics.legs[h].top.y*0.6+this.graphics.legs[h].middle.y*0.4,
                                        this.graphics.legs[h].top.x*0.4+this.graphics.legs[h].middle.x*0.6,this.graphics.legs[h].top.y*0.4+this.graphics.legs[h].middle.y*0.6)
                                    this.layer.line(
                                        this.graphics.legs[h].middle.x*0.6+this.graphics.legs[h].bottom.x*0.4,this.graphics.legs[h].middle.y*0.6+this.graphics.legs[h].bottom.y*0.4,
                                        this.graphics.legs[h].middle.x*0.4+this.graphics.legs[h].bottom.x*0.6,this.graphics.legs[h].middle.y*0.4+this.graphics.legs[h].bottom.y*0.6)
                                }
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(this.flashColor(this.color.skin.arms[g])[0],this.flashColor(this.color.skin.arms[g])[1],this.flashColor(this.color.skin.arms[g])[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.name=='Glitched Giant'&&this.trigger.display.armor){
                            this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                            this.layer.strokeWeight(5)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.6+this.graphics.arms[g].middle.x*0.4,this.graphics.arms[g].top.y*0.6+this.graphics.arms[g].middle.y*0.4,
                                this.graphics.arms[g].top.x*0.4+this.graphics.arms[g].middle.x*0.6,this.graphics.arms[g].top.y*0.4+this.graphics.arms[g].middle.y*0.6)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.6+this.graphics.arms[g].bottom.x*0.4,this.graphics.arms[g].middle.y*0.6+this.graphics.arms[g].bottom.y*0.4,
                                this.graphics.arms[g].middle.x*0.4+this.graphics.arms[g].bottom.x*0.6,this.graphics.arms[g].middle.y*0.4+this.graphics.arms[g].bottom.y*0.6)
                        }
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-81,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(this.flashColor(this.color.skin.arms[g])[0],this.flashColor(this.color.skin.arms[g])[1],this.flashColor(this.color.skin.arms[g])[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if(this.name=='Glitched Giant'&&this.trigger.display.armor){
                            this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                            this.layer.strokeWeight(5)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.6+this.graphics.arms[g].middle.x*0.4,this.graphics.arms[g].top.y*0.6+this.graphics.arms[g].middle.y*0.4,
                                this.graphics.arms[g].top.x*0.4+this.graphics.arms[g].middle.x*0.6,this.graphics.arms[g].top.y*0.4+this.graphics.arms[g].middle.y*0.6)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.6+this.graphics.arms[g].bottom.x*0.4,this.graphics.arms[g].middle.y*0.6+this.graphics.arms[g].bottom.y*0.4,
                                this.graphics.arms[g].middle.x*0.4+this.graphics.arms[g].bottom.x*0.6,this.graphics.arms[g].middle.y*0.4+this.graphics.arms[g].bottom.y*0.6)
                        }
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(this.flashColor(this.color.skin.arms[g])[0],this.flashColor(this.color.skin.arms[g])[1],this.flashColor(this.color.skin.arms[g])[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if(this.name=='Glitched Giant'&&this.trigger.display.armor){
                            this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                            this.layer.strokeWeight(5)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.6+this.graphics.arms[g].bottom.x*0.4,this.graphics.arms[g].middle.y*0.6+this.graphics.arms[g].bottom.y*0.4,
                                this.graphics.arms[g].middle.x*0.4+this.graphics.arms[g].bottom.x*0.6,this.graphics.arms[g].middle.y*0.4+this.graphics.arms[g].bottom.y*0.6)
                        }
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Managerial':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-50,16,42)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-84,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Thornvine':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color[1])[0],this.flashColor(this.color[1])[1],this.flashColor(this.color[1])[2],this.fade*this.fades.body)
                    this.layer.triangle(0,-3,0,-12,-7.5-this.anim.glow*10,-7.5)
                    this.layer.triangle(0,-12,0,-21,7.5+this.anim.glow*10,-16.5)
                    this.layer.triangle(0,-21,0,-30,-7.5-this.anim.glow*10,-25.5)
                    this.layer.triangle(0,-30,0,-39,7.5+this.anim.glow*10,-34.5)
                    this.layer.stroke(this.flashColor(this.color[0])[0],this.flashColor(this.color[0])[1],this.flashColor(this.color[0])[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(6)
                    this.layer.line(0,0,0,-48)
                }
            break
            case 'Wall':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(4)
                    this.layer.quad(-20,0,20,0,16,-40,-16,-40)
                    this.layer.line(-20,0,16,-40)
                    this.layer.line(20,0,-16,-40)
                }
            break
            case 'Spike Pillar':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    for(let a=0,la=15;a<la;a++){
                        if(lcos(a*96+this.anim.direction+this.time)<=0){
                            this.layer.ellipse(lsin(a*96+this.anim.direction+this.time)*4,-45+a*3,lcos(a*96+this.anim.direction+this.time)*4,4)
                            this.layer.triangle(lsin(a*96+this.anim.direction+this.time)*4,-47+a*3,lsin(a*96+this.anim.direction+this.time)*4,-43+a*3,lsin(a*96+this.anim.direction+this.time)*16,-45+a*3)
                        }
                    }
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.rect(0,-24,8,48,2)
                    this.layer.fill(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    for(let a=0,la=15;a<la;a++){
                        if(lcos(a*96+this.anim.direction+this.time)>0){
                            this.layer.ellipse(lsin(a*96+this.anim.direction+this.time)*4,-45+a*3,lcos(a*96+this.anim.direction+this.time)*4,4)
                            this.layer.triangle(lsin(a*96+this.anim.direction+this.time)*4,-47+a*3,lsin(a*96+this.anim.direction+this.time)*4,-43+a*3,lsin(a*96+this.anim.direction+this.time)*16,-45+a*3)
                        }
                    }
                }
            break
            case 'Projector':
                if(this.trigger.display.light){
                    this.layer.fill(this.flashColor(this.color.light)[0],this.flashColor(this.color.light)[1],this.flashColor(this.color.light)[2],this.fade*this.fades.light*0.1*this.anim.light)
                    for(let a=0,la=10;a<la;a++){
                        this.layer.quad(-16,-16,16,-16,18+a,-28-a*2,-18-a,-28-a*2)
                    }
                }
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(4)
                    this.layer.quad(-20,0,20,0,16,-16,-16,-16)
                }
            break
            case 'Turret': case 'Explosive Turret': case 'Multiturret': case 'Repulse Turret': case 'Machine Gun': case 'Armored Turret': case 'Shotgun':
                if(this.trigger.display.base){
                    this.layer.fill(this.flashColor(this.color.base.in)[0],this.flashColor(this.color.base.in)[1],this.flashColor(this.color.base.in)[2],this.fade*this.fades.base)
                    this.layer.stroke(this.flashColor(this.color.base.out)[0],this.flashColor(this.color.base.out)[1],this.flashColor(this.color.base.out)[2],this.fade*this.fades.base)
                    this.layer.strokeWeight(5)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>0){
                            this.layer.rect(15*lsin(this.anim.direction+a*90),-5,30*lcos(this.anim.direction+a*90),10)
                        }
                    }
                    if(lcos(this.anim.direction)<=0.05){
                        if(this.name=='Shotgun'){
                            this.layer.rect(35*lsin(this.anim.direction),-25,30-15*lcos(this.anim.direction),15)
                            this.layer.rect(30*lsin(this.anim.direction),-25,20-5*lcos(this.anim.direction),25)
                        }else if(this.name=='Machine Gun'){
                            this.layer.strokeWeight(1.5)
                            this.layer.rect(35*lsin(this.anim.direction),-35,30-10*lcos(this.anim.direction),3)
                            this.layer.rect(35*lsin(this.anim.direction)+2.5-2.5*lcos(this.anim.direction),-30,35-15*lcos(this.anim.direction),3)
                            this.layer.rect(35*lsin(this.anim.direction)+2.5-2.5*lcos(this.anim.direction),-25,35-15*lcos(this.anim.direction),3)
                            this.layer.rect(35*lsin(this.anim.direction)+2.5-2.5*lcos(this.anim.direction),-20,35-15*lcos(this.anim.direction),3)
                            this.layer.rect(35*lsin(this.anim.direction),-15,30-10*lcos(this.anim.direction),3)
                        }else if(this.name=='Repulse Turret'){
                            this.layer.ellipse(30*lsin(this.anim.direction),-25,30*lcos(this.anim.direction),30)
                            this.layer.strokeJoin(ROUND)
                            this.layer.quad(20*lsin(this.anim.direction),-35,20*lsin(this.anim.direction),-15,30*lsin(this.anim.direction),-10,30*lsin(this.anim.direction),-40)
                            this.layer.strokeJoin(MITER)
                        }else if(this.name=='Multiturret'){
                            this.layer.rect(30*lsin(this.anim.direction),-35,20-5*lcos(this.anim.direction),6)
                            this.layer.rect(30*lsin(this.anim.direction)+2.5-2.5*lcos(this.anim.direction),-25,25-10*lcos(this.anim.direction),6)
                            this.layer.rect(30*lsin(this.anim.direction),-15,20-5*lcos(this.anim.direction),6)
                        }else{
                            this.layer.rect(35*lsin(this.anim.direction),-25,30-15*lcos(this.anim.direction),15)
                        }
                    }
                }
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.body.in)[0],this.flashColor(this.color.body.in)[1],this.flashColor(this.color.body.in)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.body.out)[0],this.flashColor(this.color.body.out)[1],this.flashColor(this.color.body.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(5)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>0){
                            this.layer.rect(20*lsin(this.anim.direction+a*90),-25,40*lcos(this.anim.direction+a*90),40)
                        }
                    }
                }
                if(this.trigger.display.dot){
                    this.layer.fill(this.flashColor(this.color.dot.in)[0],this.flashColor(this.color.dot.in)[1],this.flashColor(this.color.dot.in)[2],this.fade*this.fades.dot)
                    this.layer.stroke(this.flashColor(this.color.dot.out)[0],this.flashColor(this.color.dot.out)[1],this.flashColor(this.color.dot.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(5)
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)>0){
                            if(this.name=='Explosive Turret'){
                                regStar(this.layer,20*lsin(this.anim.direction-90+a*180),-25,8,12*lcos(this.anim.direction-90+a*180),12,6*lcos(this.anim.direction-90+a*180),6,0)
                            }else if(this.name=='Armored Turret'){
                                this.layer.ellipse(20*lsin(this.anim.direction-90+a*180),-25,12*lcos(this.anim.direction-90+a*180),12)
                                this.layer.rect(20*lsin(this.anim.direction-90+a*180)-12*lcos(this.anim.direction-90+a*180),-25,6*lcos(this.anim.direction-90+a*180),30)
                                this.layer.rect(20*lsin(this.anim.direction-90+a*180)+12*lcos(this.anim.direction-90+a*180),-25,6*lcos(this.anim.direction-90+a*180),30)
                            }else{
                                this.layer.ellipse(20*lsin(this.anim.direction-90+a*180),-25,20*lcos(this.anim.direction-90+a*180),20)
                            }
                        }
                    }
                }
                if(this.trigger.display.base&&lcos(this.anim.direction)>0.05){
                    this.layer.fill(this.flashColor(this.color.base.in)[0],this.flashColor(this.color.base.in)[1],this.flashColor(this.color.base.in)[2],this.fade*this.fades.base)
                    this.layer.stroke(this.flashColor(this.color.base.out)[0],this.flashColor(this.color.base.out)[1],this.flashColor(this.color.base.out)[2],this.fade*this.fades.base)
                    this.layer.strokeWeight(5)
                    if(this.name=='Shotgun'){
                        this.layer.rect(35*lsin(this.anim.direction),-25,30-15*lcos(this.anim.direction),15)
                        this.layer.rect(30*lsin(this.anim.direction),-25,20-5*lcos(this.anim.direction),25)
                    }else if(this.name=='Machine Gun'){
                        this.layer.strokeWeight(1.5)
                        this.layer.rect(35*lsin(this.anim.direction),-35,30-10*lcos(this.anim.direction),3)
                        this.layer.rect(35*lsin(this.anim.direction)+2.5-2.5*lcos(this.anim.direction),-30,35-15*lcos(this.anim.direction),3)
                        this.layer.rect(35*lsin(this.anim.direction)+2.5-2.5*lcos(this.anim.direction),-25,35-15*lcos(this.anim.direction),3)
                        this.layer.rect(35*lsin(this.anim.direction)+2.5-2.5*lcos(this.anim.direction),-20,35-15*lcos(this.anim.direction),3)
                        this.layer.rect(35*lsin(this.anim.direction),-15,30-10*lcos(this.anim.direction),3)
                    }else if(this.name=='Repulse Turret'){
                        this.layer.strokeJoin(ROUND)
                        this.layer.quad(20*lsin(this.anim.direction),-35,20*lsin(this.anim.direction),-15,30*lsin(this.anim.direction),-10,30*lsin(this.anim.direction),-40)
                        this.layer.strokeJoin(MITER)
                        this.layer.ellipse(30*lsin(this.anim.direction),-25,30*lcos(this.anim.direction),30)
                    }else if(this.name=='Multiturret'){
                        this.layer.rect(30*lsin(this.anim.direction),-35,20-5*lcos(this.anim.direction),6)
                        this.layer.rect(30*lsin(this.anim.direction)+2.5-2.5*lcos(this.anim.direction),-25,25-10*lcos(this.anim.direction),6)
                        this.layer.rect(30*lsin(this.anim.direction),-15,20-5*lcos(this.anim.direction),6)
                    }else{
                        this.layer.rect(35*lsin(this.anim.direction),-25,30-15*lcos(this.anim.direction),15)
                    }
                }
            break
            case 'Miniturret':
                if(this.trigger.display.base){
                    this.layer.fill(this.flashColor(this.color.base.in)[0],this.flashColor(this.color.base.in)[1],this.flashColor(this.color.base.in)[2],this.fade*this.fades.base)
                    this.layer.stroke(this.flashColor(this.color.base.out)[0],this.flashColor(this.color.base.out)[1],this.flashColor(this.color.base.out)[2],this.fade*this.fades.base)
                    this.layer.strokeWeight(5)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>0){
                            this.layer.rect(10*lsin(this.anim.direction+a*90),-5,20*lcos(this.anim.direction+a*90),10)
                        }
                    }
                    if(lcos(this.anim.direction)<=0.05){
                        this.layer.rect(30*lsin(this.anim.direction),-15,30-15*lcos(this.anim.direction),10)
                    }
                }
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.body.in)[0],this.flashColor(this.color.body.in)[1],this.flashColor(this.color.body.in)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.body.out)[0],this.flashColor(this.color.body.out)[1],this.flashColor(this.color.body.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(5)
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90)>0){
                            this.layer.rect(15*lsin(this.anim.direction+a*90),-15,30*lcos(this.anim.direction+a*90),20)
                        }
                    }
                }
                if(this.trigger.display.dot){
                    this.layer.fill(this.flashColor(this.color.dot.in)[0],this.flashColor(this.color.dot.in)[1],this.flashColor(this.color.dot.in)[2],this.fade*this.fades.dot)
                    this.layer.stroke(this.flashColor(this.color.dot.out)[0],this.flashColor(this.color.dot.out)[1],this.flashColor(this.color.dot.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(5)
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)>0){
                            this.layer.ellipse(15*lsin(this.anim.direction-90+a*180),-15,12*lcos(this.anim.direction-90+a*180),12)
                        }
                    }
                }
                if(this.trigger.display.base&&lcos(this.anim.direction)>0.05){
                    this.layer.fill(this.flashColor(this.color.base.in)[0],this.flashColor(this.color.base.in)[1],this.flashColor(this.color.base.in)[2],this.fade*this.fades.base)
                    this.layer.stroke(this.flashColor(this.color.base.out)[0],this.flashColor(this.color.base.out)[1],this.flashColor(this.color.base.out)[2],this.fade*this.fades.base)
                    this.layer.strokeWeight(5)
                    this.layer.rect(30*lsin(this.anim.direction),-15,30-15*lcos(this.anim.direction),10)
                }
            break
            case 'Readout':
                if(this.trigger.display.light){
                    this.layer.fill(this.flashColor(this.color.light)[0],this.flashColor(this.color.light)[1],this.flashColor(this.color.light)[2],this.fade*this.fades.light*0.5*this.anim.light)
                    this.layer.rect(0,-35,40,70)
                }
                if(this.trigger.display.glow){
                    this.layer.fill(this.flashColor(this.color.glow)[0],this.flashColor(this.color.glow)[1],this.flashColor(this.color.glow)[2],this.fade*this.fades.glow*0.5*this.anim.glow)
                    this.layer.rect(0,-60,32,8)
                    this.layer.rect(0,-44,32,8)
                    this.layer.rect(0,-28,32,8)
                }
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(4)
                    this.layer.rect(0,-8,40,16)
                }
            break
            case 'Strengthener':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(4)
                    this.layer.rect(0,-32,48,64)
                }
                if(this.trigger.display.light){
                    let color=[this.color.light[0],this.color.light[1]+this.anim.light*100,this.color.light[2]]
                    this.layer.fill(this.flashColor(color)[0],this.flashColor(color)[1],this.flashColor(color)[2],this.fade*this.fades.light)
                    this.layer.noStroke()
                    this.layer.rect(-15,-32,5,48)
                    this.layer.rect(-5,-32,5,48)
                    this.layer.rect(5,-32,5,48)
                    this.layer.rect(15,-32,5,48)
                }
            break
            case 'Barbed Pillar':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    for(let a=0,la=15;a<la;a++){
                        if(lcos(a*96+this.anim.direction+this.time)<=0){
                            this.layer.ellipse(lsin(a*96+this.anim.direction+this.time)*4,-46+a*3,lcos(a*96+this.anim.direction+this.time)*2,2)
                            this.layer.ellipse(lsin(a*96+this.anim.direction+this.time)*4,-44+a*3,lcos(a*96+this.anim.direction+this.time)*2,2)
                            this.layer.triangle(lsin(a*96+this.anim.direction+this.time)*4,-47+a*3,lsin(a*96+this.anim.direction+this.time)*4,-45+a*3,lsin(a*96+this.anim.direction+this.time)*14,-46+a*3)
                            this.layer.triangle(lsin(a*96+this.anim.direction+this.time)*4,-45+a*3,lsin(a*96+this.anim.direction+this.time)*4,-43+a*3,lsin(a*96+this.anim.direction+this.time)*14,-44+a*3)
                        }
                    }
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.rect(0,-24,8,48,2)
                    this.layer.fill(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    for(let a=0,la=15;a<la;a++){
                        if(lcos(a*96+this.anim.direction+this.time)>0){
                            this.layer.ellipse(lsin(a*96+this.anim.direction+this.time)*4,-46+a*3,lcos(a*96+this.anim.direction+this.time)*2,2)
                            this.layer.ellipse(lsin(a*96+this.anim.direction+this.time)*4,-44+a*3,lcos(a*96+this.anim.direction+this.time)*2,2)
                            this.layer.triangle(lsin(a*96+this.anim.direction+this.time)*4,-47+a*3,lsin(a*96+this.anim.direction+this.time)*4,-45+a*3,lsin(a*96+this.anim.direction+this.time)*14,-46+a*3)
                            this.layer.triangle(lsin(a*96+this.anim.direction+this.time)*4,-45+a*3,lsin(a*96+this.anim.direction+this.time)*4,-43+a*3,lsin(a*96+this.anim.direction+this.time)*14,-44+a*3)
                        }
                    }
                }
            break
            case 'Gun Rack':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(4)
                    this.layer.rect(0,-24,40,48)
                }
                if(this.trigger.display.gun){
                    this.layer.fill(this.flashColor(this.color.gun)[0],this.flashColor(this.color.gun)[1],this.flashColor(this.color.gun)[2],this.fade*this.fades.gun*(2-this.anim.light))
                    this.layer.noStroke()
                    this.layer.rect(-10,-32.5,5,10)
                    this.layer.rect(2.5,-35,20,5)
                    this.layer.fill(this.flashColor(this.color.gun)[0],this.flashColor(this.color.gun)[1],this.flashColor(this.color.gun)[2],this.fade*this.fades.gun)
                    this.layer.rect(-10,-17.5,5,10)
                    this.layer.rect(2.5,-20,20,5)
                }
            break
            case 'Metal Box':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.metal)[0],this.flashColor(this.color.metal)[1],this.flashColor(this.color.metal)[2],this.fade*this.fades.metal*(2-this.anim.light))
                    this.layer.noStroke()
                    this.layer.ellipse(0,-25,24,24)
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(4)
                    this.layer.quad(-20,0,20,0,20,-25,-20,-25)
                    this.layer.line(-20,0,20,-25)
                    this.layer.line(20,0,-20,-25)
                }
            break
            case 'Upgrader': case 'Transformer': case 'Doubler': case 'Exhauster':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(4)
                    this.layer.rect(-25,-40,10,25)
                    this.layer.rect(0,-65,25,10)
                    this.layer.rect(0,-10,25,20)
                    this.layer.rect(0,-40,40,40)
                    this.layer.fill(this.flashColor(mergeColor(this.color.lightIn,[255,255,255],this.anim.light-1))[0],this.flashColor(mergeColor(this.color.lightIn,[255,255,255],this.anim.light-1))[1],this.flashColor(mergeColor(this.color.lightIn,[255,255,255],this.anim.light-1))[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(mergeColor(this.color.lightOut,[255,255,255],this.anim.light-1))[0],this.flashColor(mergeColor(this.color.lightOut,[255,255,255],this.anim.light-1))[1],this.flashColor(mergeColor(this.color.lightOut,[255,255,255],this.anim.light-1))[2],this.fade*this.fades.body)
                    this.layer.ellipse(0,-40,20,20)
                }
            break
            case 'Teleporter Start': case 'Teleporter End':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.light)[0],this.flashColor(this.color.light)[1],this.flashColor(this.color.light)[2],this.fade*this.fades.body*0.1)
                    for(let a=0,la=10;a<la;a++){
                        this.layer.quad(-20,-5,20,-5,25+a,-10-a,-25-a,-10-a)
                    }
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(4)
                    this.layer.quad(-15,0,15,0,25,-5,-25,-5)   
                }
            break
            case 'Antizone':
                if(this.trigger.display.body){
                    this.layer.noFill()
                    this.layer.stroke(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(2)
                    this.layer.ellipse(0,-25,40,40)
                    this.layer.line(-20,-25,20,-25)
                    this.layer.ellipse(0,-25,40,lsin(45)*40)
                    if(this.time%45==0){
                        this.layer.line(0,-45,0,-5)
                        this.layer.ellipse(0,-25,lsin(45)*40,40)
                    }else{
                        this.layer.arc(0,-25,lsin(90-this.time%90)*40,40,90,270)
                        this.layer.arc(0,-25,lsin(90-(this.time+45)%90)*40,40,90,270)
                        this.layer.arc(0,-25,lsin(this.time%90)*40,40,-90,90)
                        this.layer.arc(0,-25,lsin((this.time+45)%90)*40,40,-90,90)
                    }
                }
            break
            case 'Mirror Shield':
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.in)[0],this.flashColor(this.color.in)[1],this.flashColor(this.color.in)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.out)[0],this.flashColor(this.color.out)[1],this.flashColor(this.color.out)[2],this.fade*this.fades.body)
                    this.layer.strokeWeight(4)
                    this.layer.quad(-10,0,10,0,8,-40,-8,-40)
                    this.layer.line(-10,0,8,-40)
                    this.layer.line(10,0,-8,-40)
                    this.layer.fill(this.flashColor(this.color.shieldIn)[0],this.flashColor(this.color.shieldIn)[1],this.flashColor(this.color.shieldIn)[2],this.fade*this.fades.body)
                    this.layer.stroke(this.flashColor(this.color.shieldOut)[0],this.flashColor(this.color.shieldOut)[1],this.flashColor(this.color.shieldOut)[2],this.fade*this.fades.body)
                    this.layer.ellipse(0,-48,40,40)
                    this.layer.line(-10*sqrt(2),-48-10*sqrt(2),10*sqrt(2),-48+10*sqrt(2))
                    this.layer.line(-10*sqrt(2),-48+10*sqrt(2),10*sqrt(2),-48-10*sqrt(2))
                }
            break
            case '':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(3)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-48,8,39)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(3)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(3)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(3,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-81,28,28)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(3,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(3)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            case 'Inconsistent':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        let randomColor=floor(random(160,200))
                        this.layer.stroke(this.flashColor([randomColor,randomColor,randomColor])[0],this.flashColor([randomColor,randomColor,randomColor])[1],this.flashColor([randomColor,randomColor,randomColor])[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x+random(-2,2),this.graphics.arms[g].top.y+random(-2,2),this.graphics.arms[g].middle.x+random(-2,2),this.graphics.arms[g].middle.y+random(-2,2))
                        this.layer.line(this.graphics.arms[g].middle.x+random(-2,2),this.graphics.arms[g].middle.y+random(-2,2),this.graphics.arms[g].bottom.x+random(-2,2),this.graphics.arms[g].bottom.y+random(-2,2))
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    let randomColor=floor(random(160,200))
                    this.layer.fill(this.flashColor([randomColor,randomColor,randomColor])[0],this.flashColor([randomColor,randomColor,randomColor])[1],this.flashColor([randomColor,randomColor,randomColor])[2],this.fade*this.fades.skin.arms)
                    this.layer.ellipse(random(-3,3),-48+random(-3,3),13+random(-3,3),39+random(-3,3))
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        let randomColor=floor(random(160,200))
                        this.layer.stroke(this.flashColor([randomColor,randomColor,randomColor])[0],this.flashColor([randomColor,randomColor,randomColor])[1],this.flashColor([randomColor,randomColor,randomColor])[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x+random(-2,2),this.graphics.arms[g].top.y+random(-2,2),this.graphics.arms[g].middle.x+random(-2,2),this.graphics.arms[g].middle.y+random(-2,2))
                        this.layer.line(this.graphics.arms[g].middle.x+random(-2,2),this.graphics.arms[g].middle.y+random(-2,2),this.graphics.arms[g].bottom.x+random(-2,2),this.graphics.arms[g].bottom.y+random(-2,2))
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                let randomColor=floor(random(160,200))
                                this.layer.stroke(this.flashColor([randomColor,randomColor,randomColor])[0],this.flashColor([randomColor,randomColor,randomColor])[1],this.flashColor([randomColor,randomColor,randomColor])[2],this.fade*this.fades.skin.arms)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x+random(-2,2),this.graphics.legs[h].top.y+random(-2,2),this.graphics.legs[h].middle.x+random(-2,2),this.graphics.legs[h].middle.y+random(-2,2))
                                this.layer.line(this.graphics.legs[h].middle.x+random(-2,2),this.graphics.legs[h].middle.y+random(-2,2),this.graphics.legs[h].bottom.x+random(-2,2),this.graphics.legs[h].bottom.y+random(-2,2))
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        let randomColor=floor(random(160,200))
                        this.layer.stroke(this.flashColor([randomColor,randomColor,randomColor])[0],this.flashColor([randomColor,randomColor,randomColor])[1],this.flashColor([randomColor,randomColor,randomColor])[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x+random(-2,2),this.graphics.arms[g].topStack.y+random(-2,2),this.graphics.arms[g].middleStack.x+random(-2,2),this.graphics.arms[g].middleStack.y+random(-2,2))
                        this.layer.line(this.graphics.arms[g].middleStack.x+random(-2,2),this.graphics.arms[g].middleStack.y+random(-2,2),this.graphics.arms[g].bottomStack.x+random(-2,2),this.graphics.arms[g].bottomStack.y+random(-2,2))
                    }
                }
                if(this.trigger.display.skin.head){
                    let randomColor=floor(random(160,200))
                    this.layer.fill(this.flashColor([randomColor,randomColor,randomColor])[0],this.flashColor([randomColor,randomColor,randomColor])[1],this.flashColor([randomColor,randomColor,randomColor])[2],this.fade*this.fades.skin.arms)
                    this.layer.noStroke()
                    this.layer.ellipse(random(-3,3),-81+random(-3,3),30+random(-3,3),30+random(-3,3))
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.layer.push()
                    this.layer.translate(random(-2,2),random(-2,2))
                    this.minorDisplayGeneral(1,0)
                    this.layer.pop()
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        let randomColor=floor(random(160,200))
                        this.layer.stroke(this.flashColor([randomColor,randomColor,randomColor])[0],this.flashColor([randomColor,randomColor,randomColor])[1],this.flashColor([randomColor,randomColor,randomColor])[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x+random(-2,2),this.graphics.arms[g].topStack.y+random(-2,2),this.graphics.arms[g].middleStack.x+random(-2,2),this.graphics.arms[g].middleStack.y+random(-2,2))
                        this.layer.line(this.graphics.arms[g].middleStack.x+random(-2,2),this.graphics.arms[g].middleStack.y+random(-2,2),this.graphics.arms[g].bottomStack.x+random(-2,2),this.graphics.arms[g].bottomStack.y+random(-2,2))
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.push()
                        this.layer.translate(random(-2,2),random(-2,2))
                        this.minorDisplayGeneral(0,g)
                        this.layer.pop()
                    }
                }
            break
            case 'Latency':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        let randomColor=floor(random(160,200))
                        this.layer.stroke(this.flashColor([randomColor,randomColor,randomColor])[0],0,0,this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x+random(-1,1),this.graphics.arms[g].top.y+random(-1,1),this.graphics.arms[g].middle.x+random(-1,1),this.graphics.arms[g].middle.y+random(-1,1))
                        this.layer.line(this.graphics.arms[g].middle.x+random(-1,1),this.graphics.arms[g].middle.y+random(-1,1),this.graphics.arms[g].bottom.x+random(-1,1),this.graphics.arms[g].bottom.y+random(-1,1))
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    let randomColor=floor(random(160,200))
                    this.layer.fill(this.flashColor([randomColor,randomColor,randomColor])[0],0,0,this.fade*this.fades.skin.arms)
                    this.layer.ellipse(random(-1,1),-43.5+random(-1,1),11+random(-1,1),29+random(-1,1))
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        let randomColor=floor(random(160,200))
                        this.layer.stroke(this.flashColor([randomColor,randomColor,randomColor])[0],0,0,this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x+random(-1,1),this.graphics.arms[g].top.y+random(-1,1),this.graphics.arms[g].middle.x+random(-1,1),this.graphics.arms[g].middle.y+random(-1,1))
                        this.layer.line(this.graphics.arms[g].middle.x+random(-1,1),this.graphics.arms[g].middle.y+random(-1,1),this.graphics.arms[g].bottom.x+random(-1,1),this.graphics.arms[g].bottom.y+random(-1,1))
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                let randomColor=floor(random(160,200))
                                this.layer.stroke(this.flashColor([randomColor,randomColor,randomColor])[0],0,0,this.fade*this.fades.skin.arms)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x+random(-1,1),this.graphics.legs[h].top.y+random(-1,1),this.graphics.legs[h].middle.x+random(-1,1),this.graphics.legs[h].middle.y+random(-1,1))
                                this.layer.line(this.graphics.legs[h].middle.x+random(-1,1),this.graphics.legs[h].middle.y+random(-1,1),this.graphics.legs[h].bottom.x+random(-1,1),this.graphics.legs[h].bottom.y+random(-1,1))
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        let randomColor=floor(random(160,200))
                        this.layer.stroke(this.flashColor([randomColor,randomColor,randomColor])[0],0,0,this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x+random(-1,1),this.graphics.arms[g].topStack.y+random(-1,1),this.graphics.arms[g].middleStack.x+random(-1,1),this.graphics.arms[g].middleStack.y+random(-1,1))
                        this.layer.line(this.graphics.arms[g].middleStack.x+random(-1,1),this.graphics.arms[g].middleStack.y+random(-1,1),this.graphics.arms[g].bottomStack.x+random(-1,1),this.graphics.arms[g].bottomStack.y+random(-1,1))
                    }
                }
                if(this.trigger.display.skin.head){
                    let randomColor=floor(random(160,200))
                    this.layer.fill(this.flashColor([randomColor,randomColor,randomColor])[0],0,0,this.fade*this.fades.skin.arms)
                    this.layer.noStroke()
                    this.layer.ellipse(random(-1,1),-72+random(-1,1),30+random(-1,1),30+random(-1,1))
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.layer.push()
                    this.layer.translate(random(-1,1),random(-1,1))
                    this.minorDisplayGeneral(1,0)
                    this.layer.pop()
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        let randomColor=floor(random(160,200))
                        this.layer.stroke(this.flashColor([randomColor,randomColor,randomColor])[0],0,0,this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x+random(-1,1),this.graphics.arms[g].topStack.y+random(-1,1),this.graphics.arms[g].middleStack.x+random(-1,1),this.graphics.arms[g].middleStack.y+random(-1,1))
                        this.layer.line(this.graphics.arms[g].middleStack.x+random(-1,1),this.graphics.arms[g].middleStack.y+random(-1,1),this.graphics.arms[g].bottomStack.x+random(-1,1),this.graphics.arms[g].bottomStack.y+random(-1,1))
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.push()
                        this.layer.translate(random(-1,1),random(-1,1))
                        this.minorDisplayGeneral(0,g)
                        this.layer.pop()
                    }
                }
            break
            case 'Lead Brick':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)<=0){
                        this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,15)
                        this.layer.stroke(this.flashColor(this.color.skin.mortar)[0],this.flashColor(this.color.skin.mortar)[1],this.flashColor(this.color.skin.mortar)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(1.2)
                        this.layer.line(this.graphics.arms[g].middle.x-6,this.graphics.arms[g].middle.y-3,this.graphics.arms[g].middle.x+6,this.graphics.arms[g].middle.y-3)
                        this.layer.line(this.graphics.arms[g].middle.x-6,this.graphics.arms[g].middle.y+3,this.graphics.arms[g].middle.x+6,this.graphics.arms[g].middle.y+3)
                        this.layer.line(this.graphics.arms[g].middle.x-4.5,this.graphics.arms[g].middle.y-3,this.graphics.arms[g].middle.x-4.5,this.graphics.arms[g].middle.y+3)
                        this.layer.line(this.graphics.arms[g].middle.x+4.5,this.graphics.arms[g].middle.y-3,this.graphics.arms[g].middle.x+4.5,this.graphics.arms[g].middle.y+3)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y-3,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y-6.5)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y+3,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y+6.5)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-48,30)
                    this.layer.stroke(this.flashColor(this.color.skin.mortar)[0],this.flashColor(this.color.skin.mortar)[1],this.flashColor(this.color.skin.mortar)[2],this.fade*this.fades.skin.body)
                    this.layer.strokeWeight(1.5)
                    this.layer.line(-13,-52,13,-52)
                    this.layer.line(-13,-44,13,-44)
                    this.layer.line(-7,-60,7,-60)
                    this.layer.line(-7,-36,7,-36)
                    this.layer.line(0,-62,0,-60)
                    this.layer.line(0,-34,0,-36)
                    this.layer.line(0,-52,0,-44)
                    this.layer.line(-6,-52,-6,-60)
                    this.layer.line(-6,-44,-6,-36)
                    this.layer.line(6,-52,6,-60)
                    this.layer.line(6,-44,6,-36)
                    this.layer.line(-12,-52,-12,-44)
                    this.layer.line(12,-52,12,-44)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.anim.direction+this.spin.arms[g].top)>0){
                        this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.arms)
                        this.layer.noStroke()
                        this.layer.ellipse(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,15)
                        this.layer.stroke(this.flashColor(this.color.skin.mortar)[0],this.flashColor(this.color.skin.mortar)[1],this.flashColor(this.color.skin.mortar)[2],this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(1.2)
                        this.layer.line(this.graphics.arms[g].middle.x-6,this.graphics.arms[g].middle.y-3,this.graphics.arms[g].middle.x+6,this.graphics.arms[g].middle.y-3)
                        this.layer.line(this.graphics.arms[g].middle.x-6,this.graphics.arms[g].middle.y+3,this.graphics.arms[g].middle.x+6,this.graphics.arms[g].middle.y+3)
                        this.layer.line(this.graphics.arms[g].middle.x-4.5,this.graphics.arms[g].middle.y-3,this.graphics.arms[g].middle.x-4.5,this.graphics.arms[g].middle.y+3)
                        this.layer.line(this.graphics.arms[g].middle.x+4.5,this.graphics.arms[g].middle.y-3,this.graphics.arms[g].middle.x+4.5,this.graphics.arms[g].middle.y+3)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y-3,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y-6.5)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y+3,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y+6.5)
                    }
                    if(this.trigger.display.eye[g]){
                        this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[g])
                        this.layer.strokeWeight((5-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.direction)*5,0,1))
                        this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*14-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*14-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2)
                        this.layer.line(lsin(this.spin.eye[g]+this.anim.direction)*14-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel,lsin(this.spin.eye[g]+this.anim.direction)*14-(g*2-1)*lcos(this.spin.eye[g]+this.anim.direction)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2)
                    }
                }
            break
            case 'Embodimental Destabilization':
                this.layer.translate(0,-20)
                this.anim.direction+=this.time*2-floor(this.time*2/45)*90
                for(let a=0,la=4;a<la;a++){
                    this.layer.push()
                    this.layer.translate((30+(a+floor(this.time*2/45))%2*20)*lsin((this.time*4)%90+a*90+90),(15+(a+floor(this.time*2/45))%2*10)*lcos((this.time*4)%90+a*90+90))
                    this.anim.direction+=90
                    this.anim.head=this.anim.direction
                    this.calculateParts()
                    for(let g=0;g<2;g++){
                        if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                            let base=this.flashColor(upColor(this.color.skin.arms,25*lcos((this.time*4)%90+a*90+90),[1,1,1]))
                            this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                            this.layer.strokeWeight(4)
                            this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                            this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        }
                    }
                    if(this.trigger.display.skin.body){
                        let base=this.flashColor(upColor(this.color.skin.body,25*lcos((this.time*4)%90+a*90+90),[1,1,1]))
                        this.layer.noStroke()
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.body)
                        this.layer.ellipse(0,-48,13,39)
                    }
                    for(let g=0;g<2;g++){
                        if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                            let base=this.flashColor(upColor(this.color.skin.arms,25*lcos((this.time*4)%90+a*90+90),[1,1,1]))
                            this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                            this.layer.strokeWeight(4)
                            this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                            this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        }
                        for(let h=0;h<2;h++){
                            if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                                if(this.trigger.display.skin.legs){
                                    let base=this.flashColor(upColor(this.color.skin.legs,25*lcos((this.time*4)%90+a*90+90),[1,1,1]))
                                    this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.legs)
                                    this.layer.strokeWeight(4)
                                    this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                    this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                                }
                            }
                        }
                    }
                    for(let g=0;g<2;g++){
                        if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                            let base=this.flashColor(upColor(this.color.skin.body,25*lcos((this.time*4)%90+a*90+90),[1,1,1]))
                            this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                            this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                            this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                            this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        }
                    }
                    if(this.trigger.display.skin.head){
                        let base=this.flashColor(upColor(this.color.skin.head,25*lcos((this.time*4)%90+a*90+90),[1,1,1]))
                        this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.skin.head)
                        this.layer.noStroke()
                        this.layer.ellipse(0,-81,30,30)
                    }
                    if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                        this.minorDisplayGeneral(1,0)
                    }
                    for(let g=0;g<2;g++){
                        if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                            let base=this.flashColor(upColor(this.color.skin.arms,25*lcos((this.time*4)%90+a*90+90),[1,1,1]))
                            this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                            this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                            this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                            this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        }
                        if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                            let base=this.flashColor(upColor(this.color.skin.body,25*lcos((this.time*4)%90+a*90+90),[1,1,1]))
                            this.layer.stroke(base[0],base[1],base[2],this.fade*this.fades.skin.arms)
                            this.layer.strokeWeight(4)
                            this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        }
                        if(this.trigger.display.eye[g]){
                            this.minorDisplayGeneral(0,g)
                        }
                    }
                    this.layer.pop()
                }
                this.anim.direction-=this.time*2-floor(this.time*2/45)*90+360
                this.anim.head=this.anim.direction
            break
            case 'Eternal Judge':
                this.layer.noStroke()
                for(let a=0,la=this.sins.length;a<la;a++){
                    let marker=[0,4,8,2,6,9,1,5,10,10,3,7][a]/11
                    let spin=this.time*(1+marker)*(a%2*2-1)+360*marker
                    if(lcos(spin)<=0){
                        this.layer.fill(100-50*this.sins[a]%2,0,50*floor(this.sins[a]/2),this.infoAnim.sins[a])
                        this.layer.ellipse(lsin(spin)*45,-45+lcos(this.time*2+360*marker)*10+lcos(-this.time+360*marker)*30+a*4-20,12)
                        this.layer.fill(100-50*this.sins[a]%2,0,50*floor(this.sins[a]/2),this.infoAnim.sins[a]*0.2)
                        regStar(this.layer,lsin(spin)*45,-45+lcos(this.time*2+360*marker)*10+lcos(-this.time+360*marker)*30+a*4-20,6,6,6,12,12,this.time)
                        regStar(this.layer,lsin(spin)*45,-45+lcos(this.time*2+360*marker)*10+lcos(-this.time+360*marker)*30+a*4-20,6,12,12,6,6,this.time)
                    }
                }
                if(this.trigger.display.icosahedron){
                    this.layer.fill(this.flashColor(this.color.icosahedron[0])[0],this.flashColor(this.color.icosahedron[0])[1],this.flashColor(this.color.icosahedron[0])[2],this.fade*this.fades.icosahedron*0.2)
                    this.layer.stroke(this.flashColor(this.color.icosahedron[1])[0],this.flashColor(this.color.icosahedron[1])[1],this.flashColor(this.color.icosahedron[1])[2],this.fade*this.fades.icosahedron)
                    this.layer.strokeWeight(2)
                    this.layer.strokeJoin(ROUND)
                    this.layer.push()
                    this.layer.translate(0,-48)
                    for(let a=0,la=3;a<la;a++){
                        this.layer.rotate(this.time*[1,-2,2][a])
                        let size=[36,24,16][a]
                        for(let b=0,lb=5;b<lb;b++){
                            this.layer.triangle(0,0,-size*lsin(36),size*lcos(36),size*lsin(36),size*lcos(36))
                            this.layer.triangle(0,size,-size*lsin(36),size*lcos(36),size*lsin(36),size*lcos(36))
                            this.layer.rotate(72)
                        }
                    }
                    this.layer.pop()
                    this.layer.strokeJoin(MITER)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-48,13,39)
                    this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                    this.layer.arc(0,-48,16,40,-180,0)
                }
                if(this.trigger.display.logo&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.logo),this.fade*this.fades.logo)
                    regStar(this.layer,lsin(this.anim.direction)*6.5,-54,4,5*lcos(this.anim.direction),5,2*lcos(this.anim.direction),2,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-81,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                this.layer.noStroke()
                for(let a=0,la=this.sins.length;a<la;a++){
                    let marker=[0,4,8,2,6,9,1,5,10,10,3,7][a]/11
                    let spin=this.time*(1+marker)*(a%2*2-1)+360*marker
                    if(lcos(spin)>0){
                        this.layer.fill(100-50*this.sins[a]%2,0,50*floor(this.sins[a]/2),this.infoAnim.sins[a])
                        this.layer.ellipse(lsin(spin)*45,-45+lcos(this.time*2+360*marker)*10+lcos(-this.time+360*marker)*30+a*4-20,12)
                        this.layer.fill(100-50*this.sins[a]%2,0,50*floor(this.sins[a]/2),this.infoAnim.sins[a]*0.2)
                        regStar(this.layer,lsin(spin)*45,-45+lcos(this.time*2+360*marker)*10+lcos(-this.time+360*marker)*30+a*4-20,6,6,6,12,12,this.time)
                        regStar(this.layer,lsin(spin)*45,-45+lcos(this.time*2+360*marker)*10+lcos(-this.time+360*marker)*30+a*4-20,6,12,12,6,6,this.time)
                    }
                }
                if(this.name=='Eternal Judge'&&this.trigger.display.circlet){
                    this.layer.fill(0,this.fade)
                    this.layer.rect(0,-91,24,1.5)
                    if(lcos(this.anim.direction)>0){
                        this.layer.fill(220,220,210,this.fade)
                        this.layer.quad(-4*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-90,4*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-100)
                        this.layer.fill(0,this.fade)
                        this.layer.quad(-3*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-92,3*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-98)
                    }
                }
            break
            case 'Keystone':
                this.layer.noStroke()
                if(this.trigger.display.body){
                    this.layer.fill(this.flashColor(this.color.body)[0],this.flashColor(this.color.body)[1],this.flashColor(this.color.body)[2],this.fade*this.fades.body)
                    this.layer.arc(0,-36,48,48,0,54)
                    this.layer.arc(0,-36,48,48,126,180)
                    this.layer.quad(0,-38,-lcos(54)*24,-36+lsin(54)*24,0,-36+24/lsin(54),lcos(54)*24,-36+lsin(54)*24)
                    let base=this.flashColor(upColor(this.color.body,20,[1,1,1]))
                    this.layer.fill(base[0],base[1],base[2],this.fade*this.fades.body)
                    this.layer.ellipse(0,-36,48,8)
                }
                if(this.trigger.display.paper){
                    this.layer.fill(this.flashColor(this.color.paper)[0],this.flashColor(this.color.paper)[1],this.flashColor(this.color.paper)[2],this.fade*this.fades.paper)
                    for(let a=0,la=30;a<la;a++){
                        let spin=a/la*360+this.time*0.5+this.anim.spin
                        if(lcos(spin)>0){
                            this.layer.beginShape()
                            this.layer.vertex(lsin(spin)*24,lcos(spin)*4-32)
                            this.layer.vertex(lsin(spin)*28-lcos(spin)*2,lcos(spin)*4-24)
                            this.layer.vertex(lsin(spin)*27.5,lcos(spin)*4-25)
                            this.layer.vertex(lsin(spin)*30,lcos(spin)*4-20)
                            this.layer.vertex(lsin(spin)*26+lcos(spin)*2,lcos(spin)*4-28)
                            this.layer.vertex(lsin(spin)*26.5,lcos(spin)*4-27)
                            this.layer.endShape()
                        }
                    }
                }
                if(this.trigger.display.rope){
                    this.layer.fill(this.flashColor(this.color.rope)[0],this.flashColor(this.color.rope)[1],this.flashColor(this.color.rope)[2],this.fade*this.fades.rope)
                    for(let a=0,la=30;a<la;a++){
                        let spin=a/la*360+this.time*0.5+this.anim.spin
                        if(lcos(spin)>0){
                            this.layer.ellipse(lsin(spin)*24,lcos(spin)*4-33,5*lcos(spin),4)
                        }
                    }
                }
            break
            case 'Daughter of Heaven':
                if(this.trigger.display.hair.back){
                    controlSpin(this.hair.main,this.anim.direction,0)
                    displayTrianglesBack(this.layer,this.hair.main,this.anim.direction,-81,34,1,0.02,this.color.hair.back,1)
                    controlSpin(this.hair.inside,this.anim.direction,0)
                    displayTrianglesBack(this.layer,this.hair.inside,this.anim.direction,-81,33,1,0.01,this.color.hair.insideBack,1)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<-0.4&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                let color=this.flashColor(upColor(this.color.skin.legs,lcos(this.anim.direction+this.spin.legs[h].top)*10,[1,1,1]))
                                this.layer.stroke(...color,this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-49,12,35)
                }
                if(this.trigger.display.dress){
                    this.layer.noStroke()
                    this.layer.fill(248,238,237,this.fade)
                    this.layer.quad(-7,-47,7,-47,19,-27,-19,-27)
                    this.layer.arc(0,-27,38,16,0,180)
                    for(let a=0,la=24;a<la;a++){
                        if(lcos(this.anim.direction+(a+0.5)/la*360)>0){
                            this.layer.ellipse(18.5*lsin(this.anim.direction+(a+0.5)/la*360),-27+7.5*lcos(this.anim.direction+(a+0.5)/la*360),7*lcos(this.anim.direction+(a+0.5)/la*360),4)
                        }
                    }
                    this.layer.fill(76,111,162,this.fade)
                    this.layer.quad(-7,-47,7,-47,18.5,-29,-18.5,-29)
                    this.layer.arc(0,-29,37,15.5,0,180)
                    for(let a=0,la=24;a<la;a++){
                        if(lcos(this.anim.direction+a/la*360)>0){
                            this.layer.ellipse(18*lsin(this.anim.direction+a/la*360),-29+7.75*lcos(this.anim.direction+a/la*360),6*lcos(this.anim.direction+a/la*360),4)
                        }
                    }
                    this.layer.fill(177,200,217,this.fade)
                    for(let a=0,la=10;a<la;a++){
                        if(lcos(this.anim.direction+(a+0.25)/la*360)>0){
                            regPoly(this.layer,15*lsin(this.anim.direction+(a+0.25)/la*360),-33+7*lcos(this.anim.direction+(a+0.25)/la*360),6,2*lcos(this.anim.direction+(a+0.25)/la*360),1.5,0)
                        }
                    }
                    this.layer.colorMode(HSB,1,1,1,1)
                    for(let a=0,la=20;a<la;a++){
                        this.layer.fill(a/la*2%1,1,1)
                        if(lcos(this.anim.direction+(a+0.5)/la*360)>0){
                            regPoly(this.layer,11.5*lsin(this.anim.direction+(a+0.5)/la*360),-39+6*lcos(this.anim.direction+(a+0.5)/la*360),6,2*lcos(this.anim.direction+(a+0.5)/la*360),2.5,0)
                        }
                    }
                    this.layer.colorMode(RGB,255,255,255,1)
                    this.layer.fill(71,65,65,this.fade)
                    this.layer.quad(-7,-47,7,-47,12,-39,-12,-39)
                    this.layer.arc(0,-39,24,12,0,180)
                    this.layer.fill(204,190,193,this.fade)
                    this.layer.arc(0,-47,14,39,-180,0)
                    this.layer.quad(-7,-47.5,7,-47.5,11.5,-40.5,-11.5,-40.5)
                    this.layer.arc(0,-40.5,23,10,0,180)
                    for(let a=0,la=18;a<la;a++){
                        if(lcos(this.anim.direction+(a+0.5)/la*360)>0){
                            this.layer.ellipse(11*lsin(this.anim.direction+(a+0.5)/la*360),-40.5+5*lcos(this.anim.direction+(a+0.5)/la*360),5*lcos(this.anim.direction+(a+0.5)/la*360),4)
                        }
                    }
                    this.layer.fill(57,61,64,this.fade)
                    for(let a=0,la=18;a<la;a++){
                        if(lcos(this.anim.direction+(a+0.5)/la*360)>0){
                            this.layer.ellipse(11.25*lsin(this.anim.direction+(a+0.5)/la*360),-40+5*lcos(this.anim.direction+(a+0.5)/la*360),1.5*lcos(this.anim.direction+(a+0.5)/la*360),1)
                        }
                    }
                    this.layer.fill(148,163,179,this.fade)
                    this.layer.rect(0,-48,14,2)
                    this.layer.fill(139,103,129,this.fade)
                    if(lcos(this.anim.direction)>0){
                        this.layer.quad(
                            lsin(this.anim.direction)*7-lcos(this.anim.direction)*1,-49,
                            lsin(this.anim.direction)*7+lcos(this.anim.direction)*1,-49,
                            lsin(this.anim.direction)*2+lcos(this.anim.direction)*1,-67,
                            lsin(this.anim.direction)*2-lcos(this.anim.direction)*1,-67
                        )
                    }
                    this.layer.fill(255,243,237,this.fade)
                    if(lcos(this.anim.direction)>0){
                        for(let a=0,la=4;a<la;a++){
                            this.layer.ellipse(lsin(this.anim.direction)*(6.375-a*1.25),-51.25-a*4.5,lcos(this.anim.direction),1)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6)&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.dress&&lcos(this.anim.direction)>0){
                    this.layer.push()
                    this.layer.translate(lsin(this.anim.direction)*5,-63)
                    this.layer.rotate(lsin(this.anim.direction)*-15)
                    this.layer.scale(lcos(this.anim.direction),1)
                    this.layer.noStroke()

                    this.layer.fill(209,112,107,this.fade)
                    this.layer.rotate(-24)
                    this.layer.quad(0,0,-1,6,0,5.5,1,6)
                    this.layer.rotate(48)
                    this.layer.quad(0,0,-1,6,0,5.5,1,6)
                    this.layer.rotate(-24)
                    this.layer.rotate(-81)
                    pentagon(this.layer,0.4,0,-0.4,0,-2.4,6,0,5.4,2.4,6)
                    this.layer.rotate(162)
                    pentagon(this.layer,0.4,0,-0.4,0,-2.4,6,0,5.4,2.4,6)
                    this.layer.rotate(-105)

                    this.layer.fill(143,42,34,this.fade)
                    this.layer.quad(0,0,-0.5,5.75,0,5.5,0.5,5.75)
                    this.layer.rotate(48)
                    this.layer.quad(0,0,-0.5,5.75,0,5.5,0.5,5.75)
                    this.layer.rotate(-24)
                    this.layer.rotate(-81)
                    pentagon(this.layer,0.2,0,-0.2,0,-1.2,5.7,0,5.4,1.2,5.7)
                    this.layer.rotate(162)
                    pentagon(this.layer,0.2,0,-0.2,0,-1.2,5.7,0,5.4,1.2,5.7)
                    this.layer.rotate(-81)

                    this.layer.pop()
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-81,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3)&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
                if(this.trigger.display.hair.front){
                    displayTrianglesFront(this.layer,this.hair.inside,this.anim.direction,-81,33,1,0.02,this.color.hair.insideFront,1)
                    displayTrianglesFront(this.layer,this.hair.main,this.anim.direction,-81,34,1,0.01,this.color.hair.front,1)
                    this.layer.noStroke()
                    this.layer.arc(0,-81,35,34,-180,0)
                    this.layer.line(-17.5,-81,17.5,-81)
                }
                if(this.trigger.display.hair.glow){
                    this.layer.noFill()
                    this.layer.stroke(this.color.hair.glow[0],this.color.hair.glow[1],this.color.hair.glow[2],this.fade/4)
                    for(let g=0;g<6;g++){
                        this.layer.strokeWeight((3-g/2)*this.fade)
                        this.layer.arc(0,-81,30+g,30+g,-72+g*6,-12-g*6)
                    }
                }
                if(this.trigger.display.hat){
                    this.layer.noStroke()
                    this.layer.fill(52,46,47,this.fade)
                    this.layer.stroke(52,46,47,this.fade)
                    this.layer.strokeWeight(3)
                    this.layer.arc(0,-87,30,24,-180,0)
                    this.layer.noStroke()
                    this.layer.fill(49,135,79,this.fade)
                    if(lcos(this.anim.direction+51)>0){
                        this.layer.ellipse(18*lsin(this.anim.direction+51),-88,6,3)
                    }
                    this.layer.fill(88,122,110,this.fade)
                    if(lcos(this.anim.direction+117)>0){
                        this.layer.ellipse(17*lsin(this.anim.direction+117),-87.5,5,3)
                    }
                    this.layer.fill(234,158,132,this.fade)
                    if(lcos(this.anim.direction+69)>0){
                        this.layer.ellipse(18*lsin(this.anim.direction+69),-92,9,9)
                    }
                    this.layer.fill(222,143,116,this.fade)
                    if(lcos(this.anim.direction+99)>0){
                        this.layer.ellipse(17*lsin(this.anim.direction+99),-91,7,7)
                    }
                    this.layer.fill(52,46,47,this.fade)
                    this.layer.stroke(52,46,47,this.fade)
                    this.layer.line(-21,-87,21,-87)
                }
            break
            case '':
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-48,13,39)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                            }
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-81,30,30)
                }
                if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                    this.minorDisplayGeneral(1,0)
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                    }
                    if(this.trigger.display.eye[g]){
                        this.minorDisplayGeneral(0,g)
                    }
                }
            break
            default:
                if(this.name=='Lunaria'&&this.trigger.display.stars){
                    this.layer.noStroke()
                    this.layer.fill(this.color.stars[0],this.color.stars[1],this.color.stars[2],this.fade*this.fades.stars)
                    for(let a=0,la=9;a<la;a++){
                        if(lcos(a*40+this.anim.direction+this.time*3)<=0){
                            regStar(this.layer,lsin(a*40+this.anim.direction+this.time*3)*20,-54+lcos(a*40+this.anim.direction+this.time*3)*6,5,lcos(a*40+this.anim.direction+this.time*3)*3,3,lcos(a*40+this.anim.direction+this.time*3)*1.5,1.5,this.time*3)
                        }
                        if(lcos(a*40+this.anim.direction+this.time*3+20)<=0){
                            regStar(this.layer,lsin(a*40+this.anim.direction+this.time*3+20)*18,-18+lcos(a*40+this.anim.direction+this.time*3+20)*6,5,lcos(a*40+this.anim.direction+this.time*3+20)*3,3,lcos(a*40+this.anim.direction+this.time*3+20)*1.5,1.5,this.time*3)
                            regStar(this.layer,lsin(a*40+this.anim.direction+this.time*3+20)*18,-90+lcos(a*40+this.anim.direction+this.time*3+20)*6,5,lcos(a*40+this.anim.direction+this.time*3+20)*3,3,lcos(a*40+this.anim.direction+this.time*3+20)*1.5,1.5,this.time*3)
                        }
                    }
                }
                if(this.name=='Divine Guard'&&this.trigger.display.hat){
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)<=0){
                            this.layer.triangle(lsin(this.anim.direction-90+a*180)*15-lcos(this.anim.direction-90+a*180)*8,-81,lsin(this.anim.direction-90+a*180)*15+lcos(this.anim.direction-90+a*180)*8,-81,lsin(this.anim.direction-90+a*180)*15,-75)
                        }
                    }
                }
                if(this.name=='Beekeeper'&&this.trigger.display.helmet){
                    this.layer.noStroke()
                    this.layer.fill(this.color.helmet[1][0],this.color.helmet[1][1],this.color.helmet[1][2],this.fade*this.fades.helmet)
                    for(let a=0,la=15;a<la;a++){
                        if(lcos(this.anim.direction+a*45)<=0){
                            this.layer.rect(16*lsin(this.anim.direction+a*24),-81,2*lcos(this.anim.direction+a*24),12)
                        }
                    }
                }
                if(this.name=='Riot Police'&&this.trigger.display.shield&&lcos(this.anim.direction)<0){
                    this.layer.fill(this.flashColor(this.color.shield[0])[0],this.flashColor(this.color.shield[0])[1],this.flashColor(this.color.shield[0])[2],this.fade*this.fades.shield)
                    this.layer.noStroke()
                    this.layer.rect((this.graphics.arms[0].bottom.x+this.graphics.arms[1].bottom.x)/2+sin(this.anim.direction)*3,(this.graphics.arms[0].bottom.y+this.graphics.arms[1].bottom.y)/2,2-32*lcos(this.anim.direction),48,3)
                }
                if(this.name=='Jet'&&this.trigger.display.pack&&lcos(this.anim.direction+180)<0){
                    this.layer.fill(this.color.pack[0],this.color.pack[1],this.color.pack[2],this.fade*this.fades.pack)
                    this.layer.noStroke()
                    this.layer.rect(lsin(this.anim.direction+180)*13,-48,12,36,2)
                    this.layer.fill(this.color.pack[0]-100,this.color.pack[1]-100,this.color.pack[2]-100,this.fade*this.fades.pack)
                    this.layer.rect(lsin(this.anim.direction+180)*13,-28,10,4)
                    this.layer.fill(255,150,0,this.fade*this.fades.pack/2)
                    this.layer.triangle(lsin(this.anim.direction+180)*13-4,-26,lsin(this.anim.direction+180)*13+4,-26,lsin(this.anim.direction+180)*13,-18+lsin(this.time*5)*2)
                    this.layer.fill(255,75,0,this.fade*this.fades.pack/2)
                    this.layer.triangle(lsin(this.anim.direction+180)*13-2,-26,lsin(this.anim.direction+180)*13+2,-26,lsin(this.anim.direction+180)*13,-22+lsin(this.time*5))
                }
                if(this.name=='Bolt'&&this.trigger.display.shock){
                    this.layer.noStroke()
                    for(let a=0,la=this.shocks.length;a<la;a++){
                        this.layer.fill(this.color.shock[0],this.color.shock[1],this.color.shock[2],this.fade*this.shocks[a][1])
                        this.layer.triangle(lsin(this.shocks[a][0])*4,lcos(this.shocks[a][0])*4-48,lsin(this.shocks[a][0])*-4,lcos(this.shocks[a][0])*-4-48,-lcos(this.shocks[a][0])*48,lsin(this.shocks[a][0])*48-48)
                    }
                }
                if((this.name=='Lightspeed'||this.name=='Councilman'||this.name=='Avant Guard')&&this.trigger.display.wing){
                    this.layer.noFill()
                    this.layer.stroke(this.color.wing[0],this.color.wing[1],this.color.wing[2],this.fade*this.fades.wing)
                    this.layer.strokeWeight(3)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(a*180+this.anim.direction)<0){
                            if(lsin(a*180+this.anim.direction)<=0){
                                this.layer.arc(0,-81,66*lcos(a*180+this.anim.direction),72,-5,85)
                                this.layer.arc(0,-87,48*lcos(a*180+this.anim.direction),60,-5,85)
                            }else{
                                this.layer.arc(0,-81,66*lcos(a*180+this.anim.direction),72,95,185)
                                this.layer.arc(0,-87,48*lcos(a*180+this.anim.direction),60,95,185)
                            }
                        }
                    }
                }
                if(this.name=='Anomaly'&&this.trigger.display.wing){
                    this.layer.noFill()
                    this.layer.stroke(this.color.wing[0],this.color.wing[1],this.color.wing[2],this.fade*this.fades.wing)
                    this.layer.strokeWeight(3)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(a*180+this.anim.direction)<0){
                            if(lsin(a*180+this.anim.direction)<=0){
                                this.layer.arc(0,-81,48*lcos(a*180+this.anim.direction),80,-5,85)
                                this.layer.arc(0,-84,36*lcos(a*180+this.anim.direction),72,-5,85)
                                this.layer.arc(0,-87,24*lcos(a*180+this.anim.direction),64,-5,85)
                            }else{
                                this.layer.arc(0,-81,48*lcos(a*180+this.anim.direction),80,95,185)
                                this.layer.arc(0,-84,36*lcos(a*180+this.anim.direction),72,95,185)
                                this.layer.arc(0,-87,24*lcos(a*180+this.anim.direction),64,95,185)
                            }
                        }
                    }
                }
                if((this.name=='Lunar Dust'||this.name=='Voidglass')&&this.trigger.display.outline){
                    this.layer.fill(this.flashColor(this.color.outline)[0],this.flashColor(this.color.outline)[1],this.flashColor(this.color.outline)[2],this.fade*this.fades.outline)
                    this.layer.stroke(this.flashColor(this.color.outline)[0],this.flashColor(this.color.outline)[1],this.flashColor(this.color.outline)[2],this.fade*this.fades.outline)
                    this.layer.strokeWeight(7)
                    for(let g=0;g<2;g++){
                        if(this.trigger.display.skin.arms){
                            this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                            this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        }
                        if(this.trigger.display.skin.legs){
                            this.layer.line(this.graphics.legs[g].top.x,this.graphics.legs[g].top.y,this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y)
                            this.layer.line(this.graphics.legs[g].middle.x,this.graphics.legs[g].middle.y,this.graphics.legs[g].bottom.x,this.graphics.legs[g].bottom.y)
                        }
                    }
                    this.layer.noStroke()
                    this.layer.ellipse(0,-48,16,42)
                    this.layer.ellipse(0,-81,33,33)
                }
                if((this.name=='Management Soldier'||this.name=='Management Special Forces'||this.name=='Management Sniper'||this.name=='Walker Driver'||this.name=='Riot Police'||this.name=='Management Shotgunner')&&this.trigger.display.visor&&lcos(this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(this.color.visor[0],this.color.visor[1],this.color.visor[2],this.fade*this.fades.visor/2)
                    this.layer.rect(lsin(this.anim.direction)*18,-78,20*lcos(this.anim.direction),6)
                }
                if(this.name=='Slow King'&&this.trigger.display.cape&&lcos(this.anim.direction+180)<-0.1){
                    this.layer.noStroke()
                    this.layer.fill(this.color.cape[0],this.color.cape[1],this.color.cape[2],this.fade*this.fades.cape)
                    this.layer.arc(5*lsin(this.anim.direction+180),-60,-8*lcos(this.anim.direction+180),12,-180,0)
                    for(let a=0,la=5;a<la;a++){
                        this.layer.triangle(5*lsin(this.anim.direction+180)-4*lcos(this.anim.direction+180),-60,5*lsin(this.anim.direction+180)+4*lcos(this.anim.direction+180),-60,8*lsin(this.anim.direction+180)+(-12+a*6)*lcos(this.anim.direction+180),-3)
                    }
                }
                if(this.name=='Nil'&&this.trigger.display.cape&&lcos(this.anim.direction+180)<-0.1){
                    this.layer.noStroke()
                    this.layer.fill(this.color.cape[0][0],this.color.cape[0][1],this.color.cape[0][2],this.fade*this.fades.cape)
                    for(let a=0,la=2;a<la;a++){
                        this.layer.triangle(5*lsin(this.anim.direction+180)-4*lcos(this.anim.direction+180),-60,5*lsin(this.anim.direction+180)+4*lcos(this.anim.direction+180),-60,8*lsin(this.anim.direction+180)+(-12+a*24)*lcos(this.anim.direction+180),-3)
                    }
                    this.layer.fill(this.color.cape[1][0],this.color.cape[1][1],this.color.cape[1][2],this.fade*this.fades.cape)
                    this.layer.arc(5*lsin(this.anim.direction+180),-60,-8*lcos(this.anim.direction+180),12,-180,0)
                    for(let a=0,la=3;a<la;a++){
                        this.layer.triangle(5*lsin(this.anim.direction+180)-4*lcos(this.anim.direction+180),-60,5*lsin(this.anim.direction+180)+4*lcos(this.anim.direction+180),-60,8*lsin(this.anim.direction+180)+(-6+a*6)*lcos(this.anim.direction+180),-3)
                    }
                }
                if((this.name=='Roger Reviv'||this.name=='Tech Support')&&this.trigger.display.headset){
                    this.layer.noStroke()
                    this.layer.fill(this.color.headset[0],this.color.headset[1],this.color.headset[2],this.fade*this.fades.headset)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)<=0){
                            this.layer.ellipse(lsin(this.anim.direction-90+a*180)*15,-81,-lcos(this.anim.direction-90+a*180)*6+6,12)
                        }
                    }
                    this.layer.stroke(this.color.headset[0],this.color.headset[1],this.color.headset[2],this.fade*this.fades.headset)
                    this.layer.strokeWeight(2)
                    this.layer.noFill()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)<=0){
                            if(lsin(this.anim.direction-90+a*180)>0){
                                this.layer.arc(0,-85,abs(lsin(this.anim.direction-90+a*180))*30,26,-90,0)
                            }else if(lsin(this.anim.direction-90+a*180)<0){
                                this.layer.arc(0,-85,abs(lsin(this.anim.direction-90+a*180))*30,26,-180,-90)
                            }else{
                                this.layer.line(0,-85,0,-98)
                            }
                        }
                    }
                }
                if((this.name=='Cartel'||this.name=='Slippery Gangster'||this.name=='Roger Reviv'||this.name=='Bodyguard'||this.name=='Tech Support')&&this.trigger.display.sunglasses&&lcos(this.anim.direction)<=0){
                    this.layer.fill(...this.color.sunglasses,this.fade*this.fades.sunglasses)
                    this.layer.noStroke()
                    this.layer.ellipse(lsin(this.anim.direction)*16+lcos(this.anim.direction)*-5,-78,8*lcos(this.anim.direction),6)
                    this.layer.ellipse(lsin(this.anim.direction)*16+lcos(this.anim.direction)*5,-78,8*lcos(this.anim.direction),6)
                    this.layer.rect(lsin(this.anim.direction)*16,-78,16*lcos(this.anim.direction),2)
                }
                if(this.name=='Voidglass'&&this.trigger.display.sunglasses&&lcos(this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(this.color.sunglasses[0][0],this.color.sunglasses[0][1],this.color.sunglasses[0][2],this.fade*this.fades.sunglasses)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*-5,-78,8*lcos(this.anim.direction),4)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*5,-78,8*lcos(this.anim.direction),4)
                    this.layer.rect(lsin(this.anim.direction)*16,-78,16*lcos(this.anim.direction),2)
                    this.layer.fill(this.color.sunglasses[1][0],this.color.sunglasses[1][1],this.color.sunglasses[1][2],this.fade*this.fades.sunglasses)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*-5,-78,5*lcos(this.anim.direction),1)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*5,-78,5*lcos(this.anim.direction),1)
                }
                if(this.name=='Rewriter'&&this.trigger.display.goggles&&lcos(this.anim.direction)<=0){
                    this.layer.fill(this.flashColor(this.color.goggles[0])[0],this.flashColor(this.color.goggles[0])[1],this.flashColor(this.color.goggles[0])[2],this.fade*this.fades.goggles)
                    this.layer.stroke(this.flashColor(this.color.goggles[1])[0],this.flashColor(this.color.goggles[1])[1],this.flashColor(this.color.goggles[1])[2],this.fade*this.fades.goggles)
                    this.layer.strokeWeight(2)
                    this.layer.rect(lsin(this.anim.direction)*15.5,this.parts.eyeLevel,lcos(this.anim.direction)*18,6,2)
                }
                if(this.name=='Jet'&&this.trigger.display.goggles&&lcos(this.anim.direction)<=0){
                    this.layer.fill(this.flashColor(this.color.goggles)[0],this.flashColor(this.color.goggles)[1],this.flashColor(this.color.goggles)[2],this.fade*this.fades.goggles)
                    this.layer.stroke(20,20,20,this.fade*this.fades.goggles)
                    this.layer.strokeWeight(2)
                    this.layer.rect(lsin(this.anim.direction)*15.5,this.parts.eyeLevel,lcos(this.anim.direction)*20,7,2)
                }
                if(this.name=='Scrapper'&&this.trigger.display.goggles&&lcos(this.anim.direction)<=0){
                    this.layer.fill(this.flashColor(this.color.goggles)[0],this.flashColor(this.color.goggles)[1],this.flashColor(this.color.goggles)[2],this.fade*this.fades.goggles)
                    this.layer.stroke(120,120,120,this.fade*this.fades.goggles)
                    this.layer.strokeWeight(2)
                    this.layer.rect(lsin(this.anim.direction)*15.5,this.parts.eyeLevel,lcos(this.anim.direction)*20,7,2)
                }
                if(this.name=='Biker'&&this.trigger.display.goggles&&lcos(this.anim.direction)<=0){
                    this.layer.fill(this.flashColor(this.color.goggles)[0],this.flashColor(this.color.goggles)[1],this.flashColor(this.color.goggles)[2],this.fade*this.fades.goggles)
                    this.layer.stroke(190,20,20,this.fade*this.fades.goggles)
                    this.layer.strokeWeight(2)
                    this.layer.rect(lsin(this.anim.direction)*15.5,this.parts.eyeLevel,lcos(this.anim.direction)*20,7,2)
                }
                if((this.name=='Kugelblitz'||this.name=='Kugelblitz Particle')&&this.trigger.display.loop){
                    this.layer.stroke(...this.flashColor(this.color.loop),this.fade*this.fades.loop)
                    this.layer.strokeWeight(4)
                    this.layer.noFill()
                    this.layer.arc(0,-48,30,12,-180,0)
                    this.layer.arc(0,-48,50,24,-180,0)
                }
                if(this.name=='Intruder'&&this.trigger.display.arrow){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.arrow)[0],this.flashColor(this.color.arrow)[1],this.flashColor(this.color.arrow)[2],this.fade*this.fades.arrow)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)<=0){
                            this.layer.triangle(lsin(this.anim.direction-90+a*180)*3-lcos(this.anim.direction-90+a*180)*3,-64,lsin(this.anim.direction-90+a*180)*3+lcos(this.anim.direction-90+a*180)*3,-64,lsin(this.anim.direction-90+a*180)*9,-54)
                        }
                    }
                }
                if(this.name=='Regen Balloon'&&this.trigger.display.rope){
                    this.layer.stroke(this.color.rope[0],this.color.rope[1],this.color.rope[2],this.fade*this.fades.rope)
                    this.layer.strokeWeight(1)
                    this.layer.line(0,-90,0,-120)
                }
                if(this.name=='Regen Balloon'&&this.trigger.display.balloon){
                    this.layer.noStroke()
                    this.layer.fill(this.color.balloon[0],this.color.balloon[1],this.color.balloon[2],this.fade*this.fades.balloon)
                    this.layer.beginShape()
                    this.layer.vertex(0,-136)
                    this.layer.bezierVertex(-12,-148,-24,-130,0,-114)
                    this.layer.bezierVertex(24,-130,12,-148,0,-136)
                    this.layer.endShape()
                }
                if(this.name=='Recollection'&&this.trigger.display.dots){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.dots),this.fade*this.fades.dots)
                    for(let a=0,la=15;a<la;a++){
                        if(lcos(this.anim.direction+a*18+this.time)<=0){
                            this.layer.ellipse(lsin(this.anim.direction+a*24+this.time)*24,-48+lcos(this.anim.direction+a*24+this.time)*12,3,1.5)
                            this.layer.ellipse(lsin(this.anim.direction+a*24+this.time)*28,-48+lcos(this.anim.direction+a*24+this.time)*14,3,1.5)
                            this.layer.ellipse(lsin(this.anim.direction+a*24+this.time)*32,-48+lcos(this.anim.direction+a*24+this.time)*16,3,1.5)
                            this.layer.ellipse(lsin(this.anim.direction+a*24+this.time)*36,-48+lcos(this.anim.direction+a*24+this.time)*18,3,1.5)
                        }
                    }
                }
                if(this.name=='Concentric'&&this.trigger.display.loops){
                    this.layer.stroke(...this.flashColor(this.color.loops),this.fade*this.fades.loops)
                    this.layer.strokeWeight(2)
                    this.layer.noFill()
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90+this.time*2)<=0){
                            this.layer.ellipse(lsin(this.anim.direction+a*90+this.time*2)*20,-48+lcos(this.anim.direction+a*90+this.time)*10,20,10)
                        }
                        if(lcos(this.anim.direction+a*90-this.time*2)<=0){
                            this.layer.ellipse(lsin(this.anim.direction+a*90-this.time*2)*18,-48+lcos(this.anim.direction+a*90-this.time)*9,16,8)
                        }
                    }
                }
                if(this.name=='Dimension Wanderer'&&this.trigger.display.circlet){
                    if(lcos(this.anim.direction)<=0){
                        this.layer.fill(220,220,210,this.fade)
                        this.layer.quad(-3*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-90,3*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-100)
                        this.layer.fill(0,this.fade)
                        this.layer.quad(-2*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-92,2*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-98)
                    }
                }
                for(let g=0;g<2;g++){
                    if((this.name=='Goon'||this.name=='Slaver'||this.name=='Romeo'||this.name=='Batter'||this.name=='Swordmaster'||this.name=='Champion'||this.name=='Vengeful'||this.name=='Lunaria'||this.name=='Divine Guard'||this.name=='Avant Guard'||this.name=='Dimension Wanderer'||this.name=='Pure Swordsman')&&this.trigger.display.extra.sword&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<=-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if((this.name=='Billy Beatup'||this.name=='Lunar Shard'||this.name=='Solar Shard'||this.name=='Coffee Commander'||this.name=='Divine Guard'||this.name=='Avant Guard'||this.name=='Boss1'||this.name=='Crusader'||this.name=='Champion')&&this.trigger.display.band||this.name=='Gas Man'&&this.trigger.display.can&&g==0||(this.name=='Assistant Hiring Officer'||this.name=='Navigator')&&this.trigger.display.clipboard&&g==0||this.name=='Dimension Wanderer'&&this.trigger.display.diamond){
                            this.minorDisplay(1,g)
                        }
                        if(this.name=='Prison Guard'&&this.trigger.display.armor){
                            this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                            this.layer.strokeWeight(4)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.7+this.graphics.arms[g].middle.x*0.3,this.graphics.arms[g].top.y*0.7+this.graphics.arms[g].middle.y*0.3,
                                this.graphics.arms[g].top.x*0.3+this.graphics.arms[g].middle.x*0.7,this.graphics.arms[g].top.y*0.3+this.graphics.arms[g].middle.y*0.7)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.7+this.graphics.arms[g].bottom.x*0.3,this.graphics.arms[g].middle.y*0.7+this.graphics.arms[g].bottom.y*0.3,
                                this.graphics.arms[g].middle.x*0.3+this.graphics.arms[g].bottom.x*0.7,this.graphics.arms[g].middle.y*0.3+this.graphics.arms[g].bottom.y*0.7)
                        }
                        if(this.name=='Management Shotgunner'&&this.trigger.display.armor){
                            this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                            this.layer.strokeWeight(4)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.75+this.graphics.arms[g].middle.x*0.27,this.graphics.arms[g].top.y*0.75+this.graphics.arms[g].middle.y*0.25,
                                this.graphics.arms[g].top.x*0.25+this.graphics.arms[g].middle.x*0.75,this.graphics.arms[g].top.y*0.25+this.graphics.arms[g].middle.y*0.75)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.75+this.graphics.arms[g].bottom.x*0.25,this.graphics.arms[g].middle.y*0.75+this.graphics.arms[g].bottom.y*0.25,
                                this.graphics.arms[g].middle.x*0.25+this.graphics.arms[g].bottom.x*0.75,this.graphics.arms[g].middle.y*0.25+this.graphics.arms[g].bottom.y*0.75)
                        }
                        if(this.name=='Assistant Fitness Officer'&&this.trigger.display.muscles){
                            this.layer.strokeWeight(6)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.7+this.graphics.arms[g].middle.x*0.3,this.graphics.arms[g].top.y*0.7+this.graphics.arms[g].middle.y*0.3,
                                this.graphics.arms[g].top.x*0.3+this.graphics.arms[g].middle.x*0.7,this.graphics.arms[g].top.y*0.3+this.graphics.arms[g].middle.y*0.7)
                        }
                    }
                }
                if(this.name=='Solar Shard'&&this.trigger.display.sun){
                    this.layer.noFill()
                    this.layer.stroke(this.color.sun[0],this.color.sun[1],this.color.sun[2],this.fade*this.fades.sun)
                    this.layer.strokeWeight(3)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(a*180+this.anim.direction)<=0){
                            if(lsin(a*180+this.anim.direction)>0){
                                this.layer.arc(0,-48,24*lcos(a*180+this.anim.direction),24,-75,75)
                            }else{
                                this.layer.arc(0,-48,24*lcos(a*180+this.anim.direction),24,105,255)
                            }
                            this.layer.line(12*lcos(a*180+this.anim.direction),-48,18*lcos(a*180+this.anim.direction),-48)
                            this.layer.line(6*sqrt(2)*lcos(a*180+this.anim.direction),-48-6*sqrt(2),9*sqrt(2)*lcos(a*180+this.anim.direction),-48-9*sqrt(2))
                            this.layer.line(6*sqrt(2)*lcos(a*180+this.anim.direction),-48+6*sqrt(2),9*sqrt(2)*lcos(a*180+this.anim.direction),-48+9*sqrt(2))
                        }
                    }
                }
                if(this.name=='Lunar Shard'&&this.trigger.display.moon){
                    this.layer.fill(this.color.moon[0][0],this.color.moon[0][1],this.color.moon[0][2],this.fade*this.fades.moon)
                    this.layer.stroke(this.color.moon[1][0],this.color.moon[1][1],this.color.moon[1][2],this.fade*this.fades.moon)
                    this.layer.strokeWeight(3)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(a*180+this.anim.direction)<=0){
                            this.layer.beginShape()
                            this.layer.vertex(24*lsin(a*180+this.anim.direction),-68)
                            this.layer.bezierVertex(18*lsin(a*180+this.anim.direction),-51,12*lsin(a*180+this.anim.direction),-45,7*lsin(a*180+this.anim.direction),-44)
                            this.layer.vertex(7*lsin(a*180+this.anim.direction),-52)
                            this.layer.bezierVertex(12*lsin(a*180+this.anim.direction),-52,18*lsin(a*180+this.anim.direction),-56,24*lsin(a*180+this.anim.direction),-68)
                            this.layer.endShape()
                        }
                    }
                }
                if(this.name=='Divine Guard'&&this.trigger.display.sphere){
                    this.layer.fill(this.color.sphere[0],this.color.sphere[1],this.color.sphere[2],this.fade*this.fades.sphere)
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-60+a*120)<=0){
                            this.layer.ellipse(lsin(this.anim.direction-60+a*120)*6,-64,4,4)
                        }
                    }
                    this.layer.fill(this.color.sphere[0],this.color.sphere[1],this.color.sphere[2],this.fade*this.fades.sphere*0.4)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-60+a*120)<=0){
                            this.layer.ellipse(lsin(this.anim.direction-60+a*120)*6,-64,5,5)
                            this.layer.ellipse(lsin(this.anim.direction-60+a*120)*6,-64,6,6)
                        }
                    }
                }
                if(this.name=='Lunaria'&&this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[0]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,-lcos(this.spin.under.under.top[0]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[0]+this.anim.direction)*5.2,-53,lcos(this.spin.under.under.top[0]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.name=='Lunaria'&&this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[1]+this.anim.direction)<=0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,-lcos(this.spin.under.under.top[1]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[1]+this.anim.direction)*5.2,-53,lcos(this.spin.under.under.top[1]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.trigger.display.skin.body){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.skin.body),this.fade*this.fades.skin.body)
                    this.layer.ellipse(0,-48,13,39)
                    if(this.name=='Romeo'||this.name=='Intern'||this.name=='Jester'||this.name=='Normal1'||this.name=='Boss1'||this.name=='Dimension Wanderer'){
                        this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                        this.layer.arc(0,-45,14,46,-180,0)
                    }else if(this.name=='Billy Beatup'||this.name=='Structural Energy'||this.name=='Disorder Energy'){
                        this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                        this.layer.arc(0,-48,14,40,-180,0)
                    }else if(this.name=='Assistant Hiring Officer'||this.name=='Assistant Fitness Officer'||this.name=='PhD'){
                        this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                        this.layer.arc(0,-42,14,52,-180,0)
                    }else if(this.name=='Corrupt Detective'){
                        this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                        this.layer.arc(0,-47,14,42,-180,0)
                    }else if(this.name=='Obstruction'||this.name=='Crusader'){
                        this.layer.fill(this.flashColor(this.color.skin.upperBody)[0],this.flashColor(this.color.skin.upperBody)[1],this.flashColor(this.color.skin.upperBody)[2],this.fade*this.fades.skin.body)
                        this.layer.arc(0,-45,14,46,-185,5)
                    }
                }
                if(this.name=='Nerfer'&&this.trigger.display.arrows&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.color.arrows[0][0],this.color.arrows[0][1],this.color.arrows[0][2],this.fade*this.fades.arrows)
                    regTriangle(this.layer,6*lsin(this.anim.direction),-54,4*lcos(this.anim.direction),4,0)
                    this.layer.fill(this.color.arrows[1][0],this.color.arrows[1][1],this.color.arrows[1][2],this.fade*this.fades.arrows)
                    regTriangle(this.layer,6.5*lsin(this.anim.direction),-48,4*lcos(this.anim.direction),4,0)
                    this.layer.fill(this.color.arrows[2][0],this.color.arrows[2][1],this.color.arrows[2][2],this.fade*this.fades.arrows)
                    regTriangle(this.layer,6*lsin(this.anim.direction),-42,4*lcos(this.anim.direction),4,0)
                }
                if(this.name=='Buffer'&&this.trigger.display.arrows&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.color.arrows[0][0],this.color.arrows[0][1],this.color.arrows[0][2],this.fade*this.fades.arrows)
                    regTriangle(this.layer,6*lsin(this.anim.direction),-54,4*lcos(this.anim.direction),4,60)
                    this.layer.fill(this.color.arrows[1][0],this.color.arrows[1][1],this.color.arrows[1][2],this.fade*this.fades.arrows)
                    regTriangle(this.layer,6.5*lsin(this.anim.direction),-48,4*lcos(this.anim.direction),4,60)
                    this.layer.fill(this.color.arrows[2][0],this.color.arrows[2][1],this.color.arrows[2][2],this.fade*this.fades.arrows)
                    regTriangle(this.layer,6*lsin(this.anim.direction),-42,4*lcos(this.anim.direction),4,60)
                }
                if(this.name=='Billy Beatup'&&this.trigger.display.logo&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.logo),this.fade*this.fades.logo)
                    this.layer.ellipse(lsin(this.anim.direction)*6.5,-54,8*lcos(this.anim.direction),8)
                }
                if(this.name=='Tech Support'&&this.trigger.display.logo&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.logo),this.fade*this.fades.logo)
                    this.layer.quad(lsin(this.anim.direction)*6.5-4*lcos(this.anim.direction),-58,lsin(this.anim.direction)*6.5-2*lcos(this.anim.direction),-58,lsin(this.anim.direction)*6.5+4*lcos(this.anim.direction),-50,lsin(this.anim.direction)*6.5+2*lcos(this.anim.direction),-50)
                    this.layer.quad(lsin(this.anim.direction)*6.5-4*lcos(this.anim.direction),-52,lsin(this.anim.direction)*6.5-2*lcos(this.anim.direction),-52,lsin(this.anim.direction)*6.5+4*lcos(this.anim.direction),-56,lsin(this.anim.direction)*6.5+2*lcos(this.anim.direction),-56)
                }
                if(this.name=='Medic'&&this.trigger.display.logo&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.logo),this.fade*this.fades.logo)
                    this.layer.rect(lsin(this.anim.direction)*6.5,-54,3*lcos(this.anim.direction),12)
                    this.layer.rect(lsin(this.anim.direction)*6.5,-54,12*lcos(this.anim.direction),3)
                }
                if((this.name=='NumberDummy'||this.name=='AttackDummy'||this.name=='BlockDummy'||this.name=='MoveDummy')&&this.trigger.display.logo&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.logo),this.fade*this.fades.logo)
                    this.layer.textSize(12)
                    this.layer.push()
                    this.layer.translate(lsin(this.anim.direction)*6.5,-50)
                    this.layer.scale(lcos(this.anim.direction),1)
                    switch(this.name){
                        case 'NumberDummy':
                            this.layer.text(this.base.life,0,0)
                        break
                        case 'AttackDummy':
                            this.layer.text(this.attack[0].effect[0],0,0)
                        break
                        case 'BlockDummy':
                            this.layer.text(this.lastBlock,0,0)
                        break
                        case 'MoveDummy':
                            this.layer.text(this.move.speed,0,0)
                        break
                    }
                    this.layer.pop()
                }
                if(this.name=='Intruder'&&this.trigger.display.logo&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.logo),this.fade*this.fades.logo)
                    this.layer.triangle(lsin(this.anim.direction)*6.5-2.5*lcos(this.anim.direction),-49,lsin(this.anim.direction)*6.5+2.5*lcos(this.anim.direction),-49,lsin(this.anim.direction)*6.5,-55)
                    this.layer.triangle(lsin(this.anim.direction)*6.5-2.5*lcos(this.anim.direction),-47,lsin(this.anim.direction)*6.5+2.5*lcos(this.anim.direction),-47,lsin(this.anim.direction)*6.5,-41)
                }
                if(this.name=='Crusader'&&this.trigger.display.logo&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.logo),this.fade*this.fades.logo)
                    this.layer.rect(lsin(this.anim.direction)*6.5,-54,2*lcos(this.anim.direction),10)
                    this.layer.rect(lsin(this.anim.direction)*6.5,-56,8*lcos(this.anim.direction),2)
                }
                if(this.name=='Precision'&&this.trigger.display.bodyPlating){
                    this.layer.fill(this.flashColor(this.color.bodyPlating)[0],this.flashColor(this.color.bodyPlating)[1],this.flashColor(this.color.bodyPlating)[2],this.fade*this.fades.bodyPlating)
                    this.layer.push()
                    this.layer.translate(0,-48)
                    this.layer.rotate(45)
                    this.layer.ellipse(0,0,8,2.5)
                    this.layer.arc(-7,0,2.5,8,-180,0)
                    this.layer.arc(7,0,2.5,8,0,180)
                    this.layer.arc(-7,0,2.5,4,0,180)
                    this.layer.arc(7,0,2.5,4,-180,0)
                    this.layer.arc(0,7,2.5,8,-180,0)
                    this.layer.arc(0,-7,2.5,8,0,180)
                    this.layer.arc(0,7,2.5,3,0,180)
                    this.layer.arc(0,-7,2.5,3,-180,0)
                    this.layer.ellipse(-7,-7,8,2.5)
                    this.layer.ellipse(7,7,8,2.5)
                    this.layer.arc(-7,-14,2.5,8,30,180)
                    this.layer.arc(7,14,2.5,8,-150,0)
                    this.layer.pop()
                }
                if(this.name=='Relic'&&this.trigger.display.crack){
                    this.layer.push()
                    this.layer.translate(0,-48)
                    this.layer.stroke(this.color.crack[0],this.color.crack[1],this.color.crack[2],this.fade*this.fades.crack)
                    this.layer.strokeWeight(1)
                    this.layer.line(2,0,-4,8)
                    this.layer.line(-1,4,5,6)
                    this.layer.line(2,5,1,13)
                    this.layer.line(2,0,-1,-12)
                    this.layer.line(2,0,-6,-3)
                    this.layer.line(0,-8,5,-11)
                    this.layer.pop()
                }
                if(this.name=='Relic'&&this.trigger.display.chain){
                    this.layer.stroke(this.color.chain[0],this.color.chain[1],this.color.chain[2],this.fade*this.fades.chain)
                    this.layer.strokeWeight(1)
                    this.layer.noFill()
                    for(let a=0,la=15;a<la;a++){
                        if(lcos(this.anim.direction+360*a/la)>=0){
                            this.layer.ellipse(6.5*lsin(this.anim.direction+360*a/la),-48+6*lsin(360*a/la),3*lcos(this.anim.direction+360*a/la),3)
                        }
                    }
                }
                if((this.name=='Management Officer'||this.name=='Management Caller'||this.name=='Comrade')&&this.trigger.display.badge&&lcos(this.anim.direction+36)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.badge[0])[0],this.flashColor(this.color.badge[0])[1],this.flashColor(this.color.badge[0])[2],this.fade*this.fades.badge)
                    this.layer.ellipse(lsin(this.anim.direction+36)*6,-57,5*lcos(this.anim.direction+36),5)
                    this.layer.fill(this.flashColor(this.color.badge[1])[0],this.flashColor(this.color.badge[1])[1],this.flashColor(this.color.badge[1])[2],this.fade*this.fades.badge)
                    this.layer.ellipse(lsin(this.anim.direction+36)*6,-56,3*lcos(this.anim.direction+36),3)
                }
                if(this.name=='Coffee Commander'&&this.trigger.display.badge&&lcos(this.anim.direction-36)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.badge)[0],this.flashColor(this.color.badge)[1],this.flashColor(this.color.badge)[2],this.fade*this.fades.badge)
                    this.layer.ellipse(lsin(this.anim.direction-36)*6,-57,4*lcos(this.anim.direction-36),4)
                }
                if(this.name=='Management Shotgunner'&&this.trigger.display.badge&&lcos(this.anim.direction+36)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.badge[0])[0],this.flashColor(this.color.badge[0])[1],this.flashColor(this.color.badge[0])[2],this.fade*this.fades.badge)
                    this.layer.ellipse(lsin(this.anim.direction+36)*6,-57,5*lcos(this.anim.direction+36),5)
                    this.layer.fill(this.flashColor(this.color.badge[1])[0],this.flashColor(this.color.badge[1])[1],this.flashColor(this.color.badge[1])[2],this.fade*this.fades.badge)
                    regTriangle(this.layer,lsin(this.anim.direction+36)*6,-57,2*lcos(this.anim.direction+36),2,60)
                }
                if((this.name=='Bouncer'||this.name=='Drunk'||this.name=='Management Officer'||this.name=='Management Caller'||this.name=='Deployer'||this.name=='Chief Deployer')&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.rect(0,-45,14,3)
                }
                if(this.name=='Ninja'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.rect(0,-51,13,3)
                    this.layer.rect(0,-45,13,3)
                }
                if(this.name=='Ninja Master'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.belt[0])[0],this.flashColor(this.color.belt[0])[1],this.flashColor(this.color.belt[0])[2],this.fade*this.fades.belt)
                    this.layer.rect(0,-51,13,3)
                    this.layer.rect(0,-45,13,3)
                    this.layer.fill(this.flashColor(this.color.belt[1])[0],this.flashColor(this.color.belt[1])[1],this.flashColor(this.color.belt[1])[2],this.fade*this.fades.belt)
                    this.layer.rect(0,-51,13,1)
                    this.layer.rect(0,-45,13,1)
                }
                if(this.name=='Armored Ninja'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.rect(0,-51,13,3)
                    this.layer.rect(0,-45,13,3)
                    for(let a=0,la=12;a<la;a++){
                        if(lcos(a*30+this.anim.direction)>0){
                            this.layer.rect(lsin(a*30+this.anim.direction)*6.5,-48,lcos(a*30+this.anim.direction),3)
                        }
                    }
                }
                if(this.name=='Smith'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.rect(0,-48,13,2)
                    for(let a=0,la=8;a<la;a++){
                        if(lcos(a*45+this.anim.direction)>0){
                            this.layer.quad(lsin(a*45+this.anim.direction)*6.5,-51,lsin(a*45+this.anim.direction)*6.5+lcos(a*45+this.anim.direction)*2,-48,lsin(a*45+this.anim.direction)*6.5,-45,lsin(a*45+this.anim.direction)*6.5-lcos(a*45+this.anim.direction)*2,-48)
                        }
                    }
                }
                if(this.name=='Smith'&&this.trigger.display.hammer&&lcos(this.anim.direction-105)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.hammer)[0],this.flashColor(this.color.hammer)[1],this.flashColor(this.color.hammer)[2],this.fade*this.fades.hammer)
                    this.layer.rect(lsin(this.anim.direction-105)*6.5,-46,2*lcos(this.anim.direction-105),8,2)
                    this.layer.rect(lsin(this.anim.direction-105)*6.5,-52,8*lcos(this.anim.direction-105),4,2)
                }
                if((this.name=='Red'||this.name=='Management Custodian'||this.name=='Gas Man'||this.name=='Comrade')&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    for(let a=0,la=6;a<la;a++){
                        if(lcos(30+a*60+this.anim.direction)>0){
                            this.layer.rect(lsin(30+a*60+this.anim.direction)*6.5,-48,lcos(30+a*60+this.anim.direction)*4,3)
                        }
                    }
                }
                if((this.name=='Management Soldier'||this.name=='Management Special Forces'||this.name=='Management Sniper'||this.name=='Walker Driver'||this.name=='Riot Police'||this.name=='Management Shotgunner')&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    for(let a=0,la=8;a<la;a++){
                        if(lcos(22.5+a*45+this.anim.direction)>0){
                            this.layer.rect(lsin(22.5+a*45+this.anim.direction)*6.5,-48,lcos(22.5+a*45+this.anim.direction)*3,2)
                        }
                    }
                }
                if((this.name=='Sharpshot'||this.name=='Prison Guard')&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.belt[0])[0],this.flashColor(this.color.belt[0])[1],this.flashColor(this.color.belt[0])[2],this.fade*this.fades.belt)
                    this.layer.rect(0,-45,14,4)
                    if(lcos(this.anim.direction)>0){
                        this.layer.fill(this.flashColor(this.color.belt[1])[0],this.flashColor(this.color.belt[1])[1],this.flashColor(this.color.belt[1])[2],this.fade*this.fades.belt)
                        this.layer.rect(lsin(this.anim.direction)*7,-45,6*lcos(this.anim.direction),6)
                    }
                }
                if(this.name=='Scrapper'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.belt[0])[0],this.flashColor(this.color.belt[0])[1],this.flashColor(this.color.belt[0])[2],this.fade*this.fades.belt)
                    this.layer.rect(0,-45,14,3)
                    if(lcos(this.anim.direction)>0){
                        this.layer.fill(this.flashColor(this.color.belt[1])[0],this.flashColor(this.color.belt[1])[1],this.flashColor(this.color.belt[1])[2],this.fade*this.fades.belt)
                        this.layer.rect(lsin(this.anim.direction)*7,-45,8*lcos(this.anim.direction),8)
                        this.layer.fill(this.flashColor(this.color.belt[2])[0],this.flashColor(this.color.belt[2])[1],this.flashColor(this.color.belt[2])[2],this.fade*this.fades.belt)
                        this.layer.rect(lsin(this.anim.direction)*7,-45,4*lcos(this.anim.direction),4)
                    }
                }
                if((this.name=='Prisoner'||this.name=='Prisoner Informant')&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    for(let a=0,la=6;a<la;a++){
                        if(lcos(30+a*60+this.anim.direction)>0){
                            this.layer.rect(lsin(30+a*60+this.anim.direction)*6.5,-45,lcos(30+a*60+this.anim.direction)*2,6)
                        }
                    }
                }
                if(this.name=='Drunk'&&this.trigger.display.bottle){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.bottle)[0],this.flashColor(this.color.bottle)[1],this.flashColor(this.color.bottle)[2],this.fade*this.fades.bottle)
                    for(let g=0;g<3;g++){
                        if(lcos(this.anim.direction+15+g*30)>0){
                            this.layer.rect(lsin(this.anim.direction+15+g*30)*7,-45,3*lcos(this.anim.direction+15+g*30),6)
                            this.layer.rect(lsin(this.anim.direction+15+g*30)*7,-49,2*lcos(this.anim.direction+15+g*30),2)
                        }
                    }
                }
                if(this.name=='Swordmaster'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.rect(0,-45,14,3)
                    for(let a=0,la=6;a<la;a++){
                        if(lcos(30+a*60+this.anim.direction)>0){
                            this.layer.rect(lsin(30+a*60+this.anim.direction)*6.5,-45,lcos(30+a*60+this.anim.direction)*4,8)
                        }
                    }
                }
                if(this.name=='Jet'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.rect(0,-45,14,3)
                    for(let a=0,la=10;a<la;a++){
                        if(lcos(a*36+this.anim.direction)>0){
                            this.layer.rect(lsin(a*36+this.anim.direction)*6.5,-45,lcos(a*36+this.anim.direction)*2,7)
                        }
                    }
                }
                if(this.name=='Beekeeper'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    this.layer.rect(0,-45,14,2)
                    for(let a=0,la=9;a<la;a++){
                        if(lcos(a*40+this.anim.direction)>0){
                            this.layer.rect(lsin(a*40+this.anim.direction)*6.5,-43,lcos(a*40+this.anim.direction)*2,6)
                        }
                    }
                }
                if(this.name=='Coffee Commander'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    for(let a=0,la=12;a<la;a++){
                        if(lcos(a*30+this.anim.direction)>0){
                            this.layer.rect(lsin(a*30+this.anim.direction)*6.5,-46,lcos(a*30+this.anim.direction)*(3-a%2*2),4)
                        }
                    }
                }
                if(this.name=='Wiz'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    for(let a=0,la=6;a<la;a++){
                        if(lcos(a*60+this.anim.direction)>0){
                            regStar(this.layer,lsin(a*60+this.anim.direction)*6.5,-46,5,lcos(a*60+this.anim.direction)*(3-a%2*2),4,lcos(a*60+this.anim.direction)*(3-a%2*2)*0.5,2,0)
                        }
                    }
                }
                if(this.name=='Management Light Infantry'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    for(let a=0,la=8;a<la;a++){
                        if(lcos(22.5+a*45+this.anim.direction)>0){
                            this.layer.fill(...this.flashColor(this.color.belt[0]),this.fade*this.fades.belt)
                            this.layer.rect(lsin(22.5+a*45+this.anim.direction)*6.5,-48,lcos(22.5+a*45+this.anim.direction)*3,2)
                            this.layer.fill(...this.flashColor(this.color.belt[1]),this.fade*this.fades.belt)
                            this.layer.quad(
                                lsin(22.5+a*45+this.anim.direction)*6.5-lcos(22.5+a*45+this.anim.direction),-48,
                                lsin(22.5+a*45+this.anim.direction)*6.5,-52,
                                lsin(22.5+a*45+this.anim.direction)*6.5+lcos(22.5+a*45+this.anim.direction),-48,
                                lsin(22.5+a*45+this.anim.direction)*6.5,-44
                            )
                        }
                    }
                }
                if(this.name=='Gangster Assassin'&&this.trigger.display.belt){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.belt),this.fade*this.fades.belt)
                    for(let a=0,la=12;a<la;a++){
                        if(lcos(a*30+15+this.anim.direction)>0){
                            regPoly(this.layer,lsin(a*30+15+this.anim.direction)*6.5,-44,3,lcos(a*30+15+this.anim.direction)*1.2,1.2,60)
                        }
                    }
                }
                if(this.name=='Reichswehr'&&this.trigger.display.pocket){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.pocket)[0],this.flashColor(this.color.pocket)[1],this.flashColor(this.color.pocket)[2],this.fade*this.fades.pocket)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-36+a*72)>0){
                            this.layer.rect(lsin(this.anim.direction-36+a*72)*6,-54,lcos(this.anim.direction-36+a*72)*4,4)
                        }
                    }
                }
                if(this.name=='Rusty'&&this.trigger.display.rust){
                    this.layer.fill(this.flashColor(this.color.rust[0])[0],this.flashColor(this.color.rust[0])[1],this.flashColor(this.color.rust[0])[2],this.fade*this.fades.rust)
                    this.layer.noStroke()
                    this.layer.ellipse(-3,-49,7,7)
                    this.layer.ellipse(2,-40,6,6)
                    this.layer.ellipse(1,-58,5,5)
                    this.layer.fill(this.flashColor(this.color.rust[1])[0],this.flashColor(this.color.rust[1])[1],this.flashColor(this.color.rust[1])[2],this.fade*this.fades.rust)
                    this.layer.ellipse(3,-44,7,7)
                    this.layer.ellipse(-2,-33,6,6)
                    this.layer.ellipse(-1,-62,5,5)
                }
                if(this.name=='Archivist'&&this.trigger.display.pocket){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.pocket)[0],this.flashColor(this.color.pocket)[1],this.flashColor(this.color.pocket)[2],this.fade*this.fades.pocket)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-36+a*72)>0){
                            this.layer.rect(lsin(this.anim.direction-36+a*72)*6,-56,lcos(this.anim.direction-36+a*72)*3,3)
                            this.layer.rect(lsin(this.anim.direction-36+a*72)*6,-52,lcos(this.anim.direction-36+a*72)*3,3)
                        }
                    }
                }
                for(let g=0;g<2;g++){
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)<0.4&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.3){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(4)
                        this.layer.line(this.graphics.arms[g].top.x,this.graphics.arms[g].top.y,this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y)
                        this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        if((this.name=='Billy Beatup'||this.name=='Lunar Shard'||this.name=='Solar Shard'||this.name=='Coffee Commander'||this.name=='Divine Guard'||this.name=='Avant Guard'||this.name=='Boss1'||this.name=='Crusader'||this.name=='Champion')&&this.trigger.display.band||this.name=='Gas Man'&&this.trigger.display.can&&g==0||(this.name=='Assistant Hiring Officer'||this.name=='Navigator')&&this.trigger.display.clipboard&&g==0||this.name=='Dimension Wanderer'&&this.trigger.display.diamond){
                            this.minorDisplay(1,g)
                        }
                        if(this.name=='Prison Guard'&&this.trigger.display.armor){
                            this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                            this.layer.strokeWeight(4)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.7+this.graphics.arms[g].middle.x*0.3,this.graphics.arms[g].top.y*0.7+this.graphics.arms[g].middle.y*0.3,
                                this.graphics.arms[g].top.x*0.3+this.graphics.arms[g].middle.x*0.7,this.graphics.arms[g].top.y*0.3+this.graphics.arms[g].middle.y*0.7)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.7+this.graphics.arms[g].bottom.x*0.3,this.graphics.arms[g].middle.y*0.7+this.graphics.arms[g].bottom.y*0.3,
                                this.graphics.arms[g].middle.x*0.3+this.graphics.arms[g].bottom.x*0.7,this.graphics.arms[g].middle.y*0.3+this.graphics.arms[g].bottom.y*0.7)
                        }
                        if(this.name=='Management Shotgunner'&&this.trigger.display.armor){
                            this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                            this.layer.strokeWeight(4)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.75+this.graphics.arms[g].middle.x*0.27,this.graphics.arms[g].top.y*0.75+this.graphics.arms[g].middle.y*0.25,
                                this.graphics.arms[g].top.x*0.25+this.graphics.arms[g].middle.x*0.75,this.graphics.arms[g].top.y*0.25+this.graphics.arms[g].middle.y*0.75)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.75+this.graphics.arms[g].bottom.x*0.25,this.graphics.arms[g].middle.y*0.75+this.graphics.arms[g].bottom.y*0.25,
                                this.graphics.arms[g].middle.x*0.25+this.graphics.arms[g].bottom.x*0.75,this.graphics.arms[g].middle.y*0.25+this.graphics.arms[g].bottom.y*0.75)
                        }
                        if(this.name=='Assistant Fitness Officer'&&this.trigger.display.muscles){
                            this.layer.strokeWeight(6)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.7+this.graphics.arms[g].middle.x*0.3,this.graphics.arms[g].top.y*0.7+this.graphics.arms[g].middle.y*0.3,
                                this.graphics.arms[g].top.x*0.3+this.graphics.arms[g].middle.x*0.7,this.graphics.arms[g].top.y*0.3+this.graphics.arms[g].middle.y*0.7)
                        }
                    }
                    for(let h=0;h<2;h++){
                        if((g==0&&h==0||g==1&&h==1)&&lcos(this.spin.legs[0].bottom+this.anim.direction)<=lcos(this.spin.legs[1].bottom+this.anim.direction)||(g==0&&h==1||g==1&&h==0)&&lcos(this.spin.legs[0].bottom+this.anim.direction)>lcos(this.spin.legs[1].bottom+this.anim.direction)){
                            if(this.trigger.display.skin.legs){
                                this.layer.stroke(...this.flashColor(this.color.skin.legs),this.fade*this.fades.skin.legs)
                                this.layer.strokeWeight(4)
                                this.layer.line(this.graphics.legs[h].top.x,this.graphics.legs[h].top.y,this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y)
                                this.layer.line(this.graphics.legs[h].middle.x,this.graphics.legs[h].middle.y,this.graphics.legs[h].bottom.x,this.graphics.legs[h].bottom.y)
                                if(this.name=='Prison Guard'&&this.trigger.display.armor){
                                    this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                                    this.layer.strokeWeight(4)
                                    this.layer.line(
                                        this.graphics.legs[h].top.x*0.7+this.graphics.legs[h].middle.x*0.3,this.graphics.legs[h].top.y*0.7+this.graphics.legs[h].middle.y*0.3,
                                        this.graphics.legs[h].top.x*0.3+this.graphics.legs[h].middle.x*0.7,this.graphics.legs[h].top.y*0.3+this.graphics.legs[h].middle.y*0.7)
                                    this.layer.line(
                                        this.graphics.legs[h].middle.x*0.7+this.graphics.legs[h].bottom.x*0.3,this.graphics.legs[h].middle.y*0.7+this.graphics.legs[h].bottom.y*0.3,
                                        this.graphics.legs[h].middle.x*0.3+this.graphics.legs[h].bottom.x*0.7,this.graphics.legs[h].middle.y*0.3+this.graphics.legs[h].bottom.y*0.7)
                                }
                            }
                        }
                    }
                }
                if(this.name=='Lunaria'&&this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[0]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,lcos(this.spin.under.under.top[0]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[0]+this.anim.direction)*5.2,-52,lcos(this.spin.under.under.top[0]+this.anim.direction)*2.5+3.5,6)
                }
                if(this.name=='Lunaria'&&this.trigger.display.under.under.top&&lcos(this.spin.under.under.top[1]+this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(mergeColor(this.color.skin.body,this.color.under.under.top,lcos(this.spin.under.under.top[1]+this.anim.direction))),this.fade*this.fades.under.under.top)
                    this.layer.ellipse(lsin(this.spin.under.under.top[1]+this.anim.direction)*5.2,-52,lcos(this.spin.under.under.top[1]+this.anim.direction)*2.5+3.5,6)
                }
                if((this.name=='Trenchcoat'||this.name=='Trenchcoat Gunner'||this.name=='Capitalist'||this.name=='Bodyguard'||this.name=='Assistant Hiring Officer'||this.name=='Assistant Fitness Officer'||this.name=='Corrupt Detective'||this.name=='Coffee Commander'||this.name=='MobMan'||this.name=='Archivist'||this.name=='Yes Man')&&this.trigger.display.tie&&lcos(this.anim.direction)>0.1){
                    this.layer.fill(this.flashColor(this.color.tie[0])[0],this.flashColor(this.color.tie[0])[1],this.flashColor(this.color.tie[0])[2],this.fade*this.fades.tie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*3-lcos(this.anim.direction)*3,-70,lsin(this.anim.direction)*3+lcos(this.anim.direction)*3,-70,lsin(this.anim.direction)*9,-50)
                    this.layer.fill(this.flashColor(this.color.tie[1])[0],this.flashColor(this.color.tie[1])[1],this.flashColor(this.color.tie[1])[2],this.fade*this.fades.tie)
                    this.layer.quad(lsin(this.anim.direction)*6-lcos(this.anim.direction)*1.5,-60,lsin(this.anim.direction)*3,-70,lsin(this.anim.direction)*6+lcos(this.anim.direction)*1.5,-60,lsin(this.anim.direction)*9,-50)
                }
                if(this.name=='L'&&this.trigger.display.tie&&lcos(this.anim.direction)>0.1){
                    this.layer.fill(this.flashColor(this.color.tie)[0],this.flashColor(this.color.tie)[1],this.flashColor(this.color.tie)[2],this.fade*this.fades.tie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*3-lcos(this.anim.direction)*3,-70,lsin(this.anim.direction)*3+lcos(this.anim.direction)*3,-70,lsin(this.anim.direction)*9,-50)
                }
                if(this.name=='Navigator'&&this.trigger.display.midshirt&&lcos(this.anim.direction)>0.1){
                    this.layer.fill(this.flashColor(this.color.midshirt)[0],this.flashColor(this.color.midshirt)[1],this.flashColor(this.color.midshirt)[2],this.fade*this.fades.midshirt)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*3-lcos(this.anim.direction)*3,-70,lsin(this.anim.direction)*3+lcos(this.anim.direction)*3,-70,lsin(this.anim.direction)*9,-50)
                }
                if(this.name=='Lunar Shard'&&this.trigger.display.moon){
                    this.layer.fill(this.color.moon[0][0],this.color.moon[0][1],this.color.moon[0][2],this.fade*this.fades.moon)
                    this.layer.stroke(this.color.moon[1][0],this.color.moon[1][1],this.color.moon[1][2],this.fade*this.fades.moon)
                    this.layer.strokeWeight(3)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(a*180+this.anim.direction)>0){
                            this.layer.beginShape()
                            this.layer.vertex(24*lsin(a*180+this.anim.direction),-68)
                            this.layer.bezierVertex(18*lsin(a*180+this.anim.direction),-51,12*lsin(a*180+this.anim.direction),-45,7*lsin(a*180+this.anim.direction),-44)
                            this.layer.vertex(7*lsin(a*180+this.anim.direction),-52)
                            this.layer.bezierVertex(12*lsin(a*180+this.anim.direction),-52,18*lsin(a*180+this.anim.direction),-56,24*lsin(a*180+this.anim.direction),-68)
                            this.layer.endShape()
                        }
                    }
                }
                if(this.name=='Solar Shard'&&this.trigger.display.sun){
                    this.layer.noFill()
                    this.layer.stroke(this.color.sun[0],this.color.sun[1],this.color.sun[2],this.fade*this.fades.sun)
                    this.layer.strokeWeight(3)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(a*180+this.anim.direction)>0){
                            if(lsin(a*180+this.anim.direction)>0){
                                this.layer.arc(0,-48,24*lcos(a*180+this.anim.direction),24,-75,75)
                            }else{
                                this.layer.arc(0,-48,24*lcos(a*180+this.anim.direction),24,105,255)
                            }
                            this.layer.line(12*lcos(a*180+this.anim.direction),-48,18*lcos(a*180+this.anim.direction),-48)
                            this.layer.line(6*sqrt(2)*lcos(a*180+this.anim.direction),-48-6*sqrt(2),9*sqrt(2)*lcos(a*180+this.anim.direction),-48-9*sqrt(2))
                            this.layer.line(6*sqrt(2)*lcos(a*180+this.anim.direction),-48+6*sqrt(2),9*sqrt(2)*lcos(a*180+this.anim.direction),-48+9*sqrt(2))
                        }
                    }
                }
                if(this.name=='PhD'&&this.trigger.display.button&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.flashColor(this.color.button),this.fade*this.fades.button)
                    this.layer.noStroke()
                    this.layer.ellipse(lsin(this.anim.direction)*6,-54,5*lcos(this.anim.direction),5)
                }
                if(this.name=='Prestige'&&this.trigger.display.hex){
                    this.layer.fill(this.color.hex[0],this.color.hex[1],this.color.hex[2],this.fade*this.fades.hex)
                    this.layer.noStroke()
                    for(let a=0,la=6;a<la;a++){
                        if(lcos(this.anim.direction+a*60)>0){
                            regPoly(this.layer,lsin(this.anim.direction+a*60)*6.5,-48,6,3*lcos(this.anim.direction+a*60),3,0)
                        }
                    }
                }
                if(this.name=='Gangster Assassin'&&this.trigger.display.button){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.button),this.fade*this.fades.button)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-24+a*48)>0){
                            this.layer.ellipse(lsin(this.anim.direction-30+a*60)*5.5,-56,2*lcos(this.anim.direction-30+a*60),2)
                            this.layer.ellipse(lsin(this.anim.direction-30+a*60)*6.5,-48,2*lcos(this.anim.direction-30+a*60),2)
                            this.layer.ellipse(lsin(this.anim.direction-30+a*60)*5.5,-40,2*lcos(this.anim.direction-30+a*60),2)
                        }
                    }
                }
                if(this.name=='Rewriter'&&this.trigger.display.bowtie&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.bowtie[0])[0],this.flashColor(this.color.bowtie[0])[1],this.flashColor(this.color.bowtie[0])[2],this.fade*this.fades.bowtie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*3-lcos(this.anim.direction)*3,-70,lsin(this.anim.direction)*3+lcos(this.anim.direction)*3,-70,lsin(this.anim.direction)*9,-50)
                    this.layer.fill(this.color.bowtie[1][0],this.color.bowtie[1][1],this.color.bowtie[1][2],this.fade*this.fades.bowtie)
                    this.layer.triangle(lsin(this.anim.direction)*6,-62,lsin(this.anim.direction)*6-lcos(this.anim.direction)*5,-64,lsin(this.anim.direction)*6-lcos(this.anim.direction)*5,-60)
                    this.layer.triangle(lsin(this.anim.direction)*6,-62,lsin(this.anim.direction)*6+lcos(this.anim.direction)*5,-64,lsin(this.anim.direction)*6+lcos(this.anim.direction)*5,-60)
                }
                if(this.name=='Rebel Negotiator'&&this.trigger.display.bowtie&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.bowtie[0])[0],this.flashColor(this.color.bowtie[0])[1],this.flashColor(this.color.bowtie[0])[2],this.fade*this.fades.bowtie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*3-lcos(this.anim.direction)*3,-70,lsin(this.anim.direction)*3+lcos(this.anim.direction)*3,-70,lsin(this.anim.direction)*9,-50)
                }
                if((this.name=='Trenchcoat'||this.name=='Trenchcoat Gunner'||this.name=='Corrupt Detective'||this.name=='PhD'||this.name=='Junkie'||this.name=='L'||this.name=='Archivist'||this.name=='Rebel Negotiator')&&this.trigger.display.coat){
                    this.layer.fill(...this.flashColor(this.color.coat),this.fade*this.fades.coat)
                    this.layer.noStroke()
                    if(lcos(this.anim.direction)<0.5){
                        this.layer.ellipse(0,-48,18,40)
                    }else{
                        this.layer.arc(-1.5+lsin(this.anim.direction)*7,-48,20+min(0,lsin(this.anim.direction)*24),40+min(0,lsin(this.anim.direction)*8),90,270)
                        this.layer.arc(1.5+lsin(this.anim.direction)*7,-48,20+min(0,-lsin(this.anim.direction)*24),40+min(0,-lsin(this.anim.direction)*8),-90,90)
                    }
                }
                if(this.name=='Rebel Negotiator'&&this.trigger.display.bowtie&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.color.bowtie[1][0],this.color.bowtie[1][1],this.color.bowtie[1][2],this.fade*this.fades.bowtie)
                    this.layer.noStroke()
                    this.layer.triangle(lsin(this.anim.direction)*6,-62,lsin(this.anim.direction)*6-lcos(this.anim.direction)*5,-64,lsin(this.anim.direction)*6-lcos(this.anim.direction)*5,-60)
                    this.layer.triangle(lsin(this.anim.direction)*6,-62,lsin(this.anim.direction)*6+lcos(this.anim.direction)*5,-64,lsin(this.anim.direction)*6+lcos(this.anim.direction)*5,-60)
                }
                for(let g=0;g<2;g++){
                    if((this.name=='Goon'||this.name=='Slaver'||this.name=='Romeo'||this.name=='Batter'||this.name=='Swordmaster'||this.name=='Champion'||this.name=='Vengeful'||this.name=='Lunaria'||this.name=='Divine Guard'||this.name=='Avant Guard'||this.name=='Dimension Wanderer'||this.name=='Pure Swordsman')&&this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6)&&g==0){
                        this.minorDisplay(0,g)
                    }
                    if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>-0.4&&lcos(this.spin.arms[g].top+this.anim.direction)<0.6){
                        this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                        this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                        this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                        this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        if((this.name=='Billy Beatup'||this.name=='Lunar Shard'||this.name=='Solar Shard'||this.name=='Coffee Commander'||this.name=='Divine Guard'||this.name=='Avant Guard'||this.name=='Boss1'||this.name=='Crusader'||this.name=='Champion')&&this.trigger.display.band||this.name=='Gas Man'&&this.trigger.display.can&&g==0||(this.name=='Assistant Hiring Officer'||this.name=='Navigator')&&this.trigger.display.clipboard&&g==0||this.name=='Dimension Wanderer'&&this.trigger.display.diamond){
                            this.minorDisplay(1,g)
                        }
                        if(this.name=='Prison Guard'&&this.trigger.display.armor){
                            this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                            this.layer.strokeWeight(4)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.7+this.graphics.arms[g].middle.x*0.3,this.graphics.arms[g].top.y*0.7+this.graphics.arms[g].middle.y*0.3,
                                this.graphics.arms[g].top.x*0.3+this.graphics.arms[g].middle.x*0.7,this.graphics.arms[g].top.y*0.3+this.graphics.arms[g].middle.y*0.7)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.7+this.graphics.arms[g].bottom.x*0.3,this.graphics.arms[g].middle.y*0.7+this.graphics.arms[g].bottom.y*0.3,
                                this.graphics.arms[g].middle.x*0.3+this.graphics.arms[g].bottom.x*0.7,this.graphics.arms[g].middle.y*0.3+this.graphics.arms[g].bottom.y*0.7)
                        }
                        if(this.name=='Management Shotgunner'&&this.trigger.display.armor){
                            this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                            this.layer.strokeWeight(4)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.75+this.graphics.arms[g].middle.x*0.27,this.graphics.arms[g].top.y*0.75+this.graphics.arms[g].middle.y*0.25,
                                this.graphics.arms[g].top.x*0.25+this.graphics.arms[g].middle.x*0.75,this.graphics.arms[g].top.y*0.25+this.graphics.arms[g].middle.y*0.75)
                            this.layer.line(
                                this.graphics.arms[g].middle.x*0.75+this.graphics.arms[g].bottom.x*0.25,this.graphics.arms[g].middle.y*0.75+this.graphics.arms[g].bottom.y*0.25,
                                this.graphics.arms[g].middle.x*0.25+this.graphics.arms[g].bottom.x*0.75,this.graphics.arms[g].middle.y*0.25+this.graphics.arms[g].bottom.y*0.75)
                        }
                        if(this.name=='Assistant Fitness Officer'&&this.trigger.display.muscles){
                            this.layer.strokeWeight(6)
                            this.layer.line(
                                this.graphics.arms[g].top.x*0.7+this.graphics.arms[g].middle.x*0.3,this.graphics.arms[g].top.y*0.7+this.graphics.arms[g].middle.y*0.3,
                                this.graphics.arms[g].top.x*0.3+this.graphics.arms[g].middle.x*0.7,this.graphics.arms[g].top.y*0.3+this.graphics.arms[g].middle.y*0.7)
                        }
                    }
                }
                if((this.name=='Gangster'||this.name=='Batter'||this.name=='Gangster Gunner'||this.name=='Gangster Machinegunner')&&this.trigger.display.overall){
                    this.layer.noStroke()
                    this.layer.fill(this.color.overall[0],this.color.overall[1],this.color.overall[2],this.fade)
                    this.layer.arc(0,-48,15,41,0,180)
                    for(let a=0,la=4;a<la;a++){
                        let direction=this.anim.direction-36+a*72+floor(a/2)*48
                        if(lcos(direction)>0){
                            this.layer.quad(lsin(direction)*7.5-lcos(direction),-46,lsin(direction)*7.5+lcos(direction),-46,lsin(direction)*3+lcos(direction),-72,lsin(direction)*3-lcos(direction),-72)
                        }
                    }
                }
                if((this.name=='Comrade'||this.name=='Wiz')&&this.trigger.display.moustache&&lcos(this.anim.direction)<=0){
                    this.layer.stroke(this.color.moustache[0],this.color.moustache[1],this.color.moustache[2],this.fade*this.fades.moustache)
                    this.layer.strokeWeight(2)
                    this.layer.line(15*lsin(this.anim.direction),-75.25,15*lsin(this.anim.direction)-4*lcos(this.anim.direction),-74.25)
                    this.layer.line(15*lsin(this.anim.direction),-75.25,15*lsin(this.anim.direction)+4*lcos(this.anim.direction),-74.25)
                }
                if(this.name=='Buried'&&this.trigger.display.bone){
                    this.layer.push()
                    this.layer.translate(0,-81)
                    this.layer.stroke(this.color.bone[0],this.color.bone[1],this.color.bone[2],this.fade*this.fades.bone)
                    this.layer.strokeWeight(2)
                    this.layer.line(-8,0,-13,12)
                    this.layer.line(-8,0,-21,-4)
                    this.layer.line(8,0,17,-9)
                    this.layer.line(8,0,19,8)
                    this.layer.line(0,0,-5,-16)
                    this.layer.line(0,0,8,15)
                    this.layer.pop()
                }
                if(this.name=='Rusty'&&this.trigger.display.bar){
                    this.layer.stroke(this.color.bar[0],this.color.bar[1],this.color.bar[2],this.fade*this.fades.bar)
                    this.layer.strokeWeight(3)
                    this.layer.line(-6,-87,-12,-93)
                    this.layer.line(-6,-87,-8,-94)
                    this.layer.line(-6,-87,-13,-88)
                }
                if(this.name=='Divine Guard'&&this.trigger.display.sphere){
                    this.layer.fill(this.color.sphere[0],this.color.sphere[1],this.color.sphere[2],this.fade*this.fades.sphere)
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-60+a*120)>0){
                            this.layer.ellipse(lsin(this.anim.direction-60+a*120)*6,-64,4,4)
                        }
                    }
                    this.layer.fill(this.color.sphere[0],this.color.sphere[1],this.color.sphere[2],this.fade*this.fades.sphere*0.4)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-60+a*120)>0){
                            this.layer.ellipse(lsin(this.anim.direction-60+a*120)*6,-64,5,5)
                            this.layer.ellipse(lsin(this.anim.direction-60+a*120)*6,-64,6,6)
                        }
                    }
                }
                if((this.name=='Structural Energy'||this.name=='Disorder Energy')&&this.trigger.display.horn){
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)<0){
                            this.layer.fill(this.color.horn[a][0],this.color.horn[a][1],this.color.horn[a][2],this.fade*this.fades.horn)
                            this.layer.beginShape()
                            this.layer.vertex(6*lsin(this.anim.direction-90+a*180),-95)
                            this.layer.bezierVertex(10*lsin(this.anim.direction-90+a*180),-96,13*lsin(this.anim.direction-90+a*180),-100,14*lsin(this.anim.direction-90+a*180),-103)
                            this.layer.bezierVertex(14*lsin(this.anim.direction-90+a*180),-99,12*lsin(this.anim.direction-90+a*180),-95,11*lsin(this.anim.direction-90+a*180),-91)
                            this.layer.endShape()
                        }
                    }
                }
                if(this.trigger.display.skin.head){
                    this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.ellipse(0,-81,30,30)
                    if(this.name=='Slow King'&&this.trigger.display.tumor){
                        this.layer.ellipse(-8,-93,9,9)
                        this.layer.ellipse(-3,-94,7,7)
                        this.layer.ellipse(-11,-90,6,6)
                    }else if(this.name=='Looter'&&this.trigger.display.bandana){
                        this.layer.fill(this.color.bandana[0][0],this.color.bandana[0][1],this.color.bandana[0][2],this.fade*this.fades.bandana)
                        this.layer.noStroke()
                        this.layer.arc(0,-81,33,33,-180,0)
                        if(lcos(this.anim.direction+180)<0){
                            this.layer.triangle(15*lsin(this.anim.direction+180),-84,30*lsin(this.anim.direction+180),-84,28*lsin(this.anim.direction+180),-90)
                        }
                        this.layer.fill(this.color.bandana[1][0],this.color.bandana[1][1],this.color.bandana[1][2],this.fade*this.fades.bandana)
                        this.layer.arc(0,-81,24,24,-180,0)
                        if(lcos(this.anim.direction+180)>=0){
                            this.layer.fill(this.color.bandana[0][0],this.color.bandana[0][1],this.color.bandana[0][2],this.fade*this.fades.bandana)
                            this.layer.triangle(15*lsin(this.anim.direction+180),-84,30*lsin(this.anim.direction+180),-84,28*lsin(this.anim.direction+180),-90)
                        }
                    }
                }
                if(this.name=='Crusader'&&this.trigger.display.helmet){
                    this.layer.fill(this.flashColor(this.color.helmet)[0],this.flashColor(this.color.helmet)[1],this.flashColor(this.color.helmet)[2],this.fade*this.fades.helmet)
                    regPoly(this.layer,0,-81,6,18,20,30)
                }
                if(this.name=='Rusty'&&this.trigger.display.rust){
                    this.layer.fill(this.flashColor(this.color.rust[0])[0],this.flashColor(this.color.rust[0])[1],this.flashColor(this.color.rust[0])[2],this.fade*this.fades.rust)
                    this.layer.noStroke()
                    this.layer.ellipse(-4,-88,10,10)
                    this.layer.ellipse(8,-83,9,9)
                    this.layer.ellipse(1,-72,8,8)
                    this.layer.fill(this.flashColor(this.color.rust[1])[0],this.flashColor(this.color.rust[1])[1],this.flashColor(this.color.rust[1])[2],this.fade*this.fades.rust)
                    this.layer.ellipse(4,-88,10,10)
                    this.layer.ellipse(-8,-83,9,9)
                    this.layer.ellipse(-1,-72,8,8)
                }
                if((this.name=='Ninja'||this.name=='Mugger'||this.name=='Ninja Master'||this.name=='Armored Ninja'||this.name=='Crusader'||this.name=='Gangster Assassin')&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.eyeHole)[0],this.flashColor(this.color.eyeHole)[1],this.flashColor(this.color.eyeHole)[2],this.fade*this.fades.skin.head)
                    this.layer.noStroke()
                    this.layer.rect(lsin(this.anim.direction)*15,-78,lcos(this.anim.direction)*15,6,2)
                }
                if((this.name=='Moss Creature'||this.name=='Dark Priest')&&this.trigger.display.eyeHole&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.eyeHole)[0],this.flashColor(this.color.eyeHole)[1],this.flashColor(this.color.eyeHole)[2],this.fade*this.fades.eyeHole)
                    this.layer.arc(lsin(this.anim.direction)*15,-81,16.5*lcos(this.anim.direction),15,0,180)
                }
                if(this.name=='Precision'&&this.trigger.display.headPlating){
                    this.layer.fill(this.flashColor(this.color.headPlating)[0],this.flashColor(this.color.headPlating)[1],this.flashColor(this.color.headPlating)[2],this.fade*this.fades.headPlating)
                    this.layer.push()
                    this.layer.translate(0,-81)
                    this.layer.rotate(45)
                    this.layer.ellipse(0,0,8,2.5)
                    this.layer.ellipse(-7,0,2.5,8)
                    this.layer.ellipse(7,0,2.5,8)
                    this.layer.ellipse(0,7,2.5,8)
                    this.layer.ellipse(0,-7,2.5,8)
                    this.layer.ellipse(-7,-7,8,2.5)
                    this.layer.ellipse(7,-7,8,2.5)
                    this.layer.ellipse(-7,7,8,2.5)
                    this.layer.ellipse(7,7,8,2.5)
                    this.layer.arc(14,0,8,2.5,90,270)
                    this.layer.arc(-14,0,8,2.5,-90,90)
                    this.layer.arc(14,0,2,2.5,-90,90)
                    this.layer.arc(-14,0,2,2.5,90,270)
                    this.layer.ellipse(0,14,8,2.5)
                    this.layer.ellipse(0,-14,8,2.5)
                    this.layer.pop()
                }
                if(this.name=='Relic'&&this.trigger.display.crack){
                    this.layer.push()
                    this.layer.translate(0,-81)
                    this.layer.stroke(this.color.crack[0],this.color.crack[1],this.color.crack[2],this.fade*this.fades.crack)
                    this.layer.strokeWeight(1)
                    this.layer.line(0,-1,-12,-7)
					this.layer.line(-6,-4,-3,-13)
					this.layer.line(0,-1,-6,11)
					this.layer.line(-3,5,-12,8)
					this.layer.line(0,-1,6,5)
					this.layer.line(6,5,9,11)
					this.layer.line(6,5,9,2)
					this.layer.line(3,2,6,-10)
                    this.layer.pop()
                }
                if(this.name=='Cartel'||this.name=='Roger Reviv'){
                    for(let g=0;g<2;g++){
                        if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                            this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                            this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                            this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                            this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        }
                        if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3){
                            this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                            this.layer.strokeWeight(4)
                            this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                        }
                    }
                    if(this.trigger.display.neck&&lcos(this.anim.direction)>0){
                        this.layer.fill(this.color.neck[0],this.color.neck[1],this.color.neck[2],this.fade*this.fades.neck)
                        this.layer.noStroke()
                        this.layer.arc(0,-54,18,24,-180,0)
                    }
                    if(this.trigger.display.skin.head){
                        this.layer.fill(...this.flashColor(this.color.skin.head),this.fade*this.fades.skin.head)
                        this.layer.noStroke()
                        this.layer.ellipse(0,-81,30,30)
                    }
                    if(this.trigger.display.bandana&&lcos(this.anim.direction)>0){
                        this.layer.fill(this.color.bandana[0],this.color.bandana[1],this.color.bandana[2],this.fade*this.fades.bandana)
                        this.layer.noStroke()
                        this.layer.arc(0,-78,32,26,0,180)
                    }
                    for(let g=0;g<2;g++){
                        if(this.trigger.display.eye[g]){
                            this.minorDisplayGeneral(0,g)
                        }
                    }
                }else if(this.name=='Unknown'||this.name=='Danger'){
                    for(let g=0;g<2;g++){
                        if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                            this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                            this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                            this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                            this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                        }
                    }
                    if(lcos(this.anim.direction)>0){
                        this.layer.fill(this.flashColor(this.color.eye.back)[0],this.flashColor(this.color.eye.back)[1],this.flashColor(this.color.eye.back)[2],this.fade*this.fades.eye[0])
                        this.layer.noStroke()
                        this.layer.textSize(20)
                        this.layer.push()
                        this.layer.translate(15*lsin(this.anim.direction),-80)
                        this.layer.scale(lcos(this.anim.direction),1)
                        if(this.name=='Unknown'){
                            this.layer.text('?',0,0)
                        }else if(this.name=='Danger'){
                            this.layer.text('!',0,0)
                        }
                        this.layer.pop()
                    }
                }else{
                    if(this.trigger.display.mouth&&lcos(this.anim.direction)>0.1){
                        this.minorDisplayGeneral(1,0)
                    }
                    if(this.name=='Archivist'&&this.trigger.display.beard&&lcos(this.anim.direction)>0){
                        this.layer.fill(this.flashColor(this.color.beard)[0],this.flashColor(this.color.beard)[1],this.flashColor(this.color.beard)[2],this.fade*this.fades.beard)
                        this.layer.noStroke()
                        this.layer.triangle(lsin(this.anim.direction)*11-lcos(this.anim.direction)*4,-71,lsin(this.anim.direction)*11+lcos(this.anim.direction)*4,-71,lsin(this.anim.direction)*10,-59)
                    }
                    for(let g=0;g<2;g++){
                        if((this.name=='Goon'||this.name=='Slaver'||this.name=='Romeo'||this.name=='Batter'||this.name=='Swordmaster'||this.name=='Champion'||this.name=='Vengeful'||this.name=='Lunaria'||this.name=='Divine Guard'||this.name=='Avant Guard'||this.name=='Dimension Wanderer'||this.name=='Pure Swordsman')&&this.trigger.display.extra.sword&&(lcos(this.spin.arms[g].top+this.anim.direction)>=0.6||lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.6)&&g==0){
                            this.minorDisplay(0,g)
                        }
                        if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].top+this.anim.direction)>=0.6){
                            this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                            this.layer.strokeWeight(min(4,lcos(this.spin.arms[g].top+this.anim.direction)*5+2))
                            this.layer.line(this.graphics.arms[g].topStack.x,this.graphics.arms[g].topStack.y,this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y)
                            this.layer.line(this.graphics.arms[g].middleStack.x,this.graphics.arms[g].middleStack.y,this.graphics.arms[g].bottomStack.x,this.graphics.arms[g].bottomStack.y)
                            if((this.name=='Billy Beatup'||this.name=='Lunar Shard'||this.name=='Solar Shard'||this.name=='Coffee Commander'||this.name=='Divine Guard'||this.name=='Avant Guard'||this.name=='Boss1'||this.name=='Crusader'||this.name=='Champion')&&this.trigger.display.band||this.name=='Gas Man'&&this.trigger.display.can&&g==0||(this.name=='Assistant Hiring Officer'||this.name=='Navigator')&&this.trigger.display.clipboard&&g==0||this.name=='Dimension Wanderer'&&this.trigger.display.diamond){
                                this.minorDisplay(1,g)
                            }
                            if(this.name=='Prison Guard'&&this.trigger.display.armor){
                                this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                                this.layer.strokeWeight(4)
                                this.layer.line(
                                    this.graphics.arms[g].top.x*0.7+this.graphics.arms[g].middle.x*0.3,this.graphics.arms[g].top.y*0.7+this.graphics.arms[g].middle.y*0.3,
                                    this.graphics.arms[g].top.x*0.3+this.graphics.arms[g].middle.x*0.7,this.graphics.arms[g].top.y*0.3+this.graphics.arms[g].middle.y*0.7)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.7+this.graphics.arms[g].bottom.x*0.3,this.graphics.arms[g].middle.y*0.7+this.graphics.arms[g].bottom.y*0.3,
                                    this.graphics.arms[g].middle.x*0.3+this.graphics.arms[g].bottom.x*0.7,this.graphics.arms[g].middle.y*0.3+this.graphics.arms[g].bottom.y*0.7)
                            }
                            if(this.name=='Management Shotgunner'&&this.trigger.display.armor){
                                this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                                this.layer.strokeWeight(4)
                                this.layer.line(
                                    this.graphics.arms[g].top.x*0.75+this.graphics.arms[g].middle.x*0.27,this.graphics.arms[g].top.y*0.75+this.graphics.arms[g].middle.y*0.25,
                                    this.graphics.arms[g].top.x*0.25+this.graphics.arms[g].middle.x*0.75,this.graphics.arms[g].top.y*0.25+this.graphics.arms[g].middle.y*0.75)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.75+this.graphics.arms[g].bottom.x*0.25,this.graphics.arms[g].middle.y*0.75+this.graphics.arms[g].bottom.y*0.25,
                                    this.graphics.arms[g].middle.x*0.25+this.graphics.arms[g].bottom.x*0.75,this.graphics.arms[g].middle.y*0.25+this.graphics.arms[g].bottom.y*0.75)
                            }
                            if(this.name=='Assistant Fitness Officer'&&this.trigger.display.muscles){
                                this.layer.strokeWeight(6)
                                this.layer.line(
                                    this.graphics.arms[g].top.x*0.7+this.graphics.arms[g].middle.x*0.3,this.graphics.arms[g].top.y*0.7+this.graphics.arms[g].middle.y*0.3,
                                    this.graphics.arms[g].top.x*0.3+this.graphics.arms[g].middle.x*0.7,this.graphics.arms[g].top.y*0.3+this.graphics.arms[g].middle.y*0.7)
                            }
                        }
                        if(this.trigger.display.skin.arms&&lcos(this.spin.arms[g].bottom+this.anim.direction)>=0.3&&this.name!='Shadow Trooper'&&this.name!='Soul'){
                            this.layer.stroke(...this.flashColor(this.color.skin.arms),this.fade*this.fades.skin.arms)
                            this.layer.strokeWeight(4)
                            this.layer.line(this.graphics.arms[g].middle.x,this.graphics.arms[g].middle.y,this.graphics.arms[g].bottom.x,this.graphics.arms[g].bottom.y)
                            if((this.name=='Billy Beatup'||this.name=='Lunar Shard'||this.name=='Solar Shard'||this.name=='Coffee Commander'||this.name=='Divine Guard'||this.name=='Avant Guard'||this.name=='Boss1'||this.name=='Crusader'||this.name=='Champion')&&this.trigger.display.band||this.name=='Gas Man'&&this.trigger.display.can&&g==0||(this.name=='Assistant Hiring Officer'||this.name=='Navigator')&&this.trigger.display.clipboard&&g==0||this.name=='Dimension Wanderer'&&this.trigger.display.diamond){
                                this.minorDisplay(1,g)
                            }
                            if(this.name=='Prison Guard'&&this.trigger.display.armor){
                                this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                                this.layer.strokeWeight(4)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.7+this.graphics.arms[g].bottom.x*0.3,this.graphics.arms[g].middle.y*0.7+this.graphics.arms[g].bottom.y*0.3,
                                    this.graphics.arms[g].middle.x*0.3+this.graphics.arms[g].bottom.x*0.7,this.graphics.arms[g].middle.y*0.3+this.graphics.arms[g].bottom.y*0.7)
                            }
                            if(this.name=='Management Shotgunner'&&this.trigger.display.armor){
                                this.layer.stroke(this.flashColor(this.color.armor)[0],this.flashColor(this.color.armor)[1],this.flashColor(this.color.armor)[2],this.fade*this.fades.armor)
                                this.layer.strokeWeight(4)
                                this.layer.line(
                                    this.graphics.arms[g].middle.x*0.75+this.graphics.arms[g].bottom.x*0.25,this.graphics.arms[g].middle.y*0.75+this.graphics.arms[g].bottom.y*0.25,
                                    this.graphics.arms[g].middle.x*0.25+this.graphics.arms[g].bottom.x*0.75,this.graphics.arms[g].middle.y*0.25+this.graphics.arms[g].bottom.y*0.75)
                            }
                            if(this.name=='Assistant Fitness Officer'&&this.trigger.display.muscles){
                                this.layer.strokeWeight(6)
                                this.layer.line(
                                    this.graphics.arms[g].top.x*0.7+this.graphics.arms[g].middle.x*0.3,this.graphics.arms[g].top.y*0.7+this.graphics.arms[g].middle.y*0.3,
                                    this.graphics.arms[g].top.x*0.3+this.graphics.arms[g].middle.x*0.7,this.graphics.arms[g].top.y*0.3+this.graphics.arms[g].middle.y*0.7)
                            }
                        }
                        if((this.name=='Thug'||this.name=='Goon')&&this.trigger.display.eye[g]){
                            this.layer.stroke(this.flashColor(this.color.eyeHole)[0],this.flashColor(this.color.eyeHole)[1],this.flashColor(this.color.eyeHole)[2],this.fade*this.fades.eye[g])
                            this.layer.strokeWeight((6-this.anim.eye[g]*3)*constrain(lcos(this.spin.eye[g]+this.anim.head)*5,0,1))
                            if(this.anim.eye[g]==0){
                                this.layer.point(lsin(this.spin.eye[g]+this.anim.head)*14-(g*2-1)*lcos(this.spin.eye[g]+this.anim.head)*this.anim.eye[g]*2,this.parts.eyeLevel-0.5)
                                this.layer.point(lsin(this.spin.eye[g]+this.anim.head)*14-(g*2-1)*lcos(this.spin.eye[g]+this.anim.head)*this.anim.eye[g]*2,this.parts.eyeLevel-0.5)
                            }else{
                                this.layer.line(lsin(this.spin.eye[g]+this.anim.head)*14-(g*2-1)*lcos(this.spin.eye[g]+this.anim.head)*this.anim.eye[g]*2,this.parts.eyeLevel-0.5,lsin(this.spin.eye[g]+this.anim.head)*14+(g*2-1)*lcos(this.spin.eye[g]+this.anim.head)*this.anim.eye[g]*2,this.parts.eyeLevel-this.anim.eye[g]*2-0.5)
                                this.layer.line(lsin(this.spin.eye[g]+this.anim.head)*14-(g*2-1)*lcos(this.spin.eye[g]+this.anim.head)*this.anim.eye[g]*2,this.parts.eyeLevel-0.5,lsin(this.spin.eye[g]+this.anim.head)*14+(g*2-1)*lcos(this.spin.eye[g]+this.anim.head)*this.anim.eye[g]*2,this.parts.eyeLevel+this.anim.eye[g]*2-0.5)
                            }
                        }
                        if(this.name!='Councilman'&&this.name!='Nil'&&this.name!='Vengeful'&&this.name!='Avant Guard'&&this.name!='Dimension Wanderer'&&this.trigger.display.eye[g]){
                            this.minorDisplayGeneral(0,g)
                        }
                        if(this.name=='Legacy'&&g==0){
                            this.minorDisplay(1,g)
                        }
                    }
                }
                if(this.name=='Councilman'&&this.trigger.display.eye[0]){
                    this.layer.noFill()
                    this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[0])
                    for(let a=0,la=3;a<la;a++){
                        if(lcos(this.anim.direction-24+a*24)>0){
                            this.layer.strokeWeight(3*lcos(this.anim.direction-24+a*24))
                            this.layer.line(lsin(this.anim.direction-24+a*24)*15,-82,lsin(this.anim.direction-24+a*24)*15,-76)
                        }
                    }
                }else if(this.name=='Nil'&&this.trigger.display.eye[0]&&lcos(this.anim.direction)>0){
                    this.layer.noFill()
                    this.layer.stroke(...this.color.eye.back,this.fade*this.fades.eye[0])
                    this.layer.strokeWeight(5*lcos(this.anim.direction))
                    this.layer.line(lsin(this.anim.direction)*15,-82,lsin(this.anim.direction)*15,-76)
                }else if(this.name=='Vengeful'&&this.trigger.display.eye[0]&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.color.eye.back,this.fade*this.fades.eye[0])
                    this.layer.noStroke()
                    this.layer.arc(lsin(this.anim.direction)*15-lcos(this.anim.direction)*5,-79,lcos(this.anim.direction)*8,6,30,210)
                    this.layer.arc(lsin(this.anim.direction)*15+lcos(this.anim.direction)*5,-79,lcos(this.anim.direction)*8,6,-30,150)
                }else if((this.name=='Avant Guard'||this.name=='Dimension Wanderer')&&this.trigger.display.eye[0]&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.color.eye.back,this.fade*this.fades.eye[0])
                    this.layer.noStroke()
                    this.layer.arc(lsin(this.anim.direction)*15-lcos(this.anim.direction)*5,-79,lcos(this.anim.direction)*10,6,30,210)
                    this.layer.arc(lsin(this.anim.direction)*15+lcos(this.anim.direction)*5,-79,lcos(this.anim.direction)*10,6,-30,150)
                }
                if(this.name=='Comrade'&&this.trigger.display.moustache&&lcos(this.anim.direction)>0){
                    this.layer.stroke(this.color.moustache[0],this.color.moustache[1],this.color.moustache[2],this.fade*this.fades.moustache)
                    this.layer.strokeWeight(2)
                    this.layer.line(15*lsin(this.anim.direction),-75.25,15*lsin(this.anim.direction)-4*lcos(this.anim.direction),-74.25)
                    this.layer.line(15*lsin(this.anim.direction),-75.25,15*lsin(this.anim.direction)+4*lcos(this.anim.direction),-74.25)
                }
                if(this.name=='Biker'&&this.trigger.display.hat){
                    this.layer.fill(...this.flashColor(this.color.hat),this.fade*this.fades.hat)
                    this.layer.noStroke()
                    this.layer.arc(0,-81,32,32,-180,0)
                    this.layer.rect(lsin(this.anim.direction+180)*16,-83,20+abs(lcos(this.anim.direction+180))*8,4)
                }
                if(this.name=='Biker'&&this.trigger.display.goggles&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.goggles)[0],this.flashColor(this.color.goggles)[1],this.flashColor(this.color.goggles)[2],this.fade*this.fades.goggles)
                    this.layer.stroke(190,20,20,this.fade*this.fades.goggles)
                    this.layer.strokeWeight(2)
                    this.layer.rect(lsin(this.anim.direction)*15.5,this.parts.eyeLevel,lcos(this.anim.direction)*20,7,2)
                }
                if(this.name=='Scrapper'&&this.trigger.display.goggles&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.goggles)[0],this.flashColor(this.color.goggles)[1],this.flashColor(this.color.goggles)[2],this.fade*this.fades.goggles)
                    this.layer.stroke(120,120,120,this.fade*this.fades.goggles)
                    this.layer.strokeWeight(2)
                    this.layer.rect(lsin(this.anim.direction)*15.5,this.parts.eyeLevel,lcos(this.anim.direction)*20,7,2)
                }
                if(this.name=='Jet'&&this.trigger.display.goggles&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.goggles)[0],this.flashColor(this.color.goggles)[1],this.flashColor(this.color.goggles)[2],this.fade*this.fades.goggles)
                    this.layer.stroke(20,20,20,this.fade*this.fades.goggles)
                    this.layer.strokeWeight(2)
                    this.layer.rect(lsin(this.anim.direction)*15.5,this.parts.eyeLevel,lcos(this.anim.direction)*20,7,2)
                }
                if(this.name=='Rewriter'&&this.trigger.display.goggles&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.flashColor(this.color.goggles[0])[0],this.flashColor(this.color.goggles[0])[1],this.flashColor(this.color.goggles[0])[2],this.fade*this.fades.goggles)
                    this.layer.stroke(this.flashColor(this.color.goggles[1])[0],this.flashColor(this.color.goggles[1])[1],this.flashColor(this.color.goggles[1])[2],this.fade*this.fades.goggles)
                    this.layer.strokeWeight(2)
                    this.layer.rect(lsin(this.anim.direction)*15.5,this.parts.eyeLevel,lcos(this.anim.direction)*18,6,2)
                }
                if((this.name=='Trenchcoat'||this.name=='Trenchcoat Gunner')&&this.trigger.display.hat){
                    this.layer.fill(...this.flashColor(this.color.hat),this.fade*this.fades.hat)
                    this.layer.stroke(...this.flashColor(this.color.hat),this.fade*this.fades.hat)
                    this.layer.strokeWeight(4)
                    this.layer.line(-16,-90,16,-90)
                    this.layer.quad(-12,-90,12,-90,8,-96,-8,-96)
                }
                if((this.name=='Cartel'||this.name=='Slippery Gangster'||this.name=='Roger Reviv'||this.name=='Bodyguard'||this.name=='Tech Support')&&this.trigger.display.sunglasses&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.color.sunglasses,this.fade*this.fades.sunglasses)
                    this.layer.noStroke()
                    this.layer.ellipse(lsin(this.anim.direction)*16+lcos(this.anim.direction)*-5,-78,8*lcos(this.anim.direction),6)
                    this.layer.ellipse(lsin(this.anim.direction)*16+lcos(this.anim.direction)*5,-78,8*lcos(this.anim.direction),6)
                    this.layer.rect(lsin(this.anim.direction)*16,-78,16*lcos(this.anim.direction),2)
                }
                if(this.name=='Voidglass'&&this.trigger.display.sunglasses&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.color.sunglasses[0][0],this.color.sunglasses[0][1],this.color.sunglasses[0][2],this.fade*this.fades.sunglasses)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*-5,-78,8*lcos(this.anim.direction),4)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*5,-78,8*lcos(this.anim.direction),4)
                    this.layer.rect(lsin(this.anim.direction)*16,-78,16*lcos(this.anim.direction),2)
                    this.layer.fill(this.color.sunglasses[1][0],this.color.sunglasses[1][1],this.color.sunglasses[1][2],this.fade*this.fades.sunglasses)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*-5,-78,5*lcos(this.anim.direction),1)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*5,-78,5*lcos(this.anim.direction),1)
                }
                if((this.name=='Gangster Machinegunner')&&this.trigger.display.sunglasses&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.color.sunglasses,this.fade*this.fades.sunglasses)
                    this.layer.noStroke()
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*-5,-78,7*lcos(this.anim.direction),5)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*5,-78,7*lcos(this.anim.direction),5)
                    this.layer.rect(lsin(this.anim.direction)*15,-78,14*lcos(this.anim.direction),1)
                }
                if(this.name=='Management Light Infantry'&&this.trigger.display.sunglasses&&lcos(this.anim.direction)>0){
                    this.layer.fill(...this.color.sunglasses[0],this.fade*this.fades.sunglasses)
                    this.layer.noStroke()
                    this.layer.ellipse(lsin(this.anim.direction)*16+lcos(this.anim.direction)*-5,-78,7*lcos(this.anim.direction),5)
                    this.layer.ellipse(lsin(this.anim.direction)*16+lcos(this.anim.direction)*5,-78,7*lcos(this.anim.direction),5)
                    this.layer.rect(lsin(this.anim.direction)*16,-78,16*lcos(this.anim.direction),2)
                    this.layer.fill(...this.color.sunglasses[1],this.fade*this.fades.sunglasses)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*-5,-78.75,4*lcos(this.anim.direction),1)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*5,-78.75,4*lcos(this.anim.direction),1)
                    this.layer.fill(...this.color.sunglasses[2],this.fade*this.fades.sunglasses)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*-5,-77.25,4*lcos(this.anim.direction),1)
                    this.layer.rect(lsin(this.anim.direction)*16+lcos(this.anim.direction)*5,-77.25,4*lcos(this.anim.direction),1)
                }
                if((this.name=='Gangster'||this.name=='Batter'||this.name=='Gangster Gunner'||this.name=='Sharpshot'||this.name=='Gangster Machinegunner')&&this.trigger.display.hat){
                    this.layer.stroke(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade)
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade)
                    this.layer.strokeWeight(4)
                    this.layer.line(-16,-90,16,-90)
                    this.layer.quad(-12,-90,12,-90,8,-96,-8,-96)
                }
                if((this.name=='Red'||this.name=='Comrade')&&this.trigger.display.hat){
                    this.layer.noStroke()
                    this.layer.fill(this.color.hat[0][0],this.color.hat[0][1],this.color.hat[0][2],this.fade*this.fades.hat)
                    this.layer.rect(0,-96,30,16,4)
                    if(lcos(this.anim.direction)>0){
                        this.layer.fill(this.color.hat[1][0],this.color.hat[1][1],this.color.hat[1][2],this.fade)
                        this.layer.ellipse(lsin(this.anim.direction)*15,-96,lcos(this.anim.direction)*13,13)
                        this.layer.fill(this.color.hat[2][0],this.color.hat[2][1],this.color.hat[2][2],this.fade)
                        this.layer.beginShape()
                        for(g=0;g<10;g++){
                            this.layer.vertex(lsin(this.anim.direction)*15+lcos(this.anim.direction)*lsin(g*36)*(3+(g%2)*3),-96+lcos(g*36)*(3+(g%2)*3))
                        }
                        this.layer.endShape()
                        this.layer.fill(this.color.hat[3][0],this.color.hat[3][1],this.color.hat[3][2],this.fade)
                        this.layer.beginShape()
                        for(g=0;g<10;g++){
                            this.layer.vertex(lsin(this.anim.direction)*15+lcos(this.anim.direction)*lsin(g*36)*(3/2+(g%2)*3/2),-96+lcos(g*36)*(3/2+(g%2)*3/2))
                        }
                        this.layer.endShape()
                    }
                }
                if((this.name=='Roger Reviv'||this.name=='Tech Support')&&this.trigger.display.headset){
                    this.layer.noStroke()
                    this.layer.fill(this.color.headset[0],this.color.headset[1],this.color.headset[2],this.fade*this.fades.headset)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)>0){
                            this.layer.ellipse(lsin(this.anim.direction-90+a*180)*15,-81,lcos(this.anim.direction-90+a*180)*6+6,12)
                        }
                    }
                    this.layer.stroke(this.color.headset[0],this.color.headset[1],this.color.headset[2],this.fade*this.fades.headset)
                    this.layer.strokeWeight(2)
                    this.layer.noFill()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)>0){
                            if(lsin(this.anim.direction-90+a*180)>0){
                                this.layer.arc(0,-85,abs(lsin(this.anim.direction-90+a*180))*30,26,-90,0)
                            }else if(lsin(this.anim.direction-90+a*180)<0){
                                this.layer.arc(0,-85,abs(lsin(this.anim.direction-90+a*180))*30,26,-180,-90)
                            }else{
                                this.layer.line(0,-85,0,-98)
                            }
                        }
                    }
                }
                if(this.name=='Slow King'&&this.trigger.display.cape&&lcos(this.anim.direction+180)>0.1){
                    this.layer.noStroke()
                    this.layer.fill(this.color.cape[0],this.color.cape[1],this.color.cape[2],this.fade*this.fades.cape)
                    this.layer.arc(5*lsin(this.anim.direction+180),-60,8*lcos(this.anim.direction+180),12,-180,0)
                    for(let a=0,la=5;a<la;a++){
                        this.layer.triangle(5*lsin(this.anim.direction+180)-4*lcos(this.anim.direction+180),-60,5*lsin(this.anim.direction+180)+4*lcos(this.anim.direction+180),-60,8*lsin(this.anim.direction+180)+(-12+a*6)*lcos(this.anim.direction+180),-3)
                    }
                }
                if(this.name=='Nil'&&this.trigger.display.cape&&lcos(this.anim.direction+180)>0.1){
                    this.layer.noStroke()
                    this.layer.fill(this.color.cape[0][0],this.color.cape[0][1],this.color.cape[0][2],this.fade*this.fades.cape)
                    for(let a=0,la=2;a<la;a++){
                        this.layer.triangle(5*lsin(this.anim.direction+180)-4*lcos(this.anim.direction+180),-60,5*lsin(this.anim.direction+180)+4*lcos(this.anim.direction+180),-60,8*lsin(this.anim.direction+180)+(-12+a*24)*lcos(this.anim.direction+180),-3)
                    }
                    this.layer.fill(this.color.cape[1][0],this.color.cape[1][1],this.color.cape[1][2],this.fade*this.fades.cape)
                    this.layer.arc(5*lsin(this.anim.direction+180),-60,-8*lcos(this.anim.direction+180),12,-180,0)
                    for(let a=0,la=3;a<la;a++){
                        this.layer.triangle(5*lsin(this.anim.direction+180)-4*lcos(this.anim.direction+180),-60,5*lsin(this.anim.direction+180)+4*lcos(this.anim.direction+180),-60,8*lsin(this.anim.direction+180)+(-6+a*6)*lcos(this.anim.direction+180),-3)
                    }
                }
                if(this.name=='Capitalist'&&this.trigger.display.hat){
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.stroke(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.strokeWeight(5)
                    this.layer.line(-15,-90,15,-90)
                    this.layer.rect(0,-100,16,20,1)
                }
                if(this.name=='Rewriter'&&this.trigger.display.hat){
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.stroke(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.strokeWeight(5)
                    this.layer.line(-15,-90,15,-90)
                    this.layer.rect(0,-97,16,14,1)
                }
                if((this.name=='Management Soldier'||this.name=='Management Special Forces'||this.name=='Management Sniper'||this.name=='Walker Driver'||this.name=='Gas Man'||this.name=='Riot Police'||this.name=='Coffee Commander'||this.name=='Management Shotgunner')&&this.trigger.display.helmet){
                    this.layer.noStroke()
                    this.layer.fill(this.color.helmet[0],this.color.helmet[1],this.color.helmet[2],this.fade*this.fades.helmet)
                    this.layer.arc(0,-81,36,36,-180,0)
                }
                if((this.name=='Management Soldier'||this.name=='Management Special Forces'||this.name=='Management Sniper'||this.name=='Walker Driver'||this.name=='Gas Man'||this.name=='Riot Police'||this.name=='Coffee Commander'||this.name=='Management Shotgunner')&&this.trigger.display.visor&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.color.visor[0],this.color.visor[1],this.color.visor[2],this.fade*this.fades.visor/2)
                    this.layer.rect(lsin(this.anim.direction)*18,-78,20*lcos(this.anim.direction),6)
                }
                if(this.name=='Armored Ninja'&&this.trigger.display.helmet){
                    this.layer.noStroke()
                    this.layer.fill(this.color.helmet[0],this.color.helmet[1],this.color.helmet[2],this.fade*this.fades.helmet)
                    this.layer.arc(0,-81,36,36,-180,0)
                    this.layer.push()
                    this.layer.translate(0,-81)
                    this.layer.rotate(-60)
                    for(let a=0,la=5;a<la;a++){
                        this.layer.triangle(-3,-17,3,-17,0,-22)
                        this.layer.rotate(30)
                    }
                    this.layer.pop()
                }
                if(this.name=='Swordmaster'&&this.trigger.display.helmet){
                    this.layer.noStroke()
                    this.layer.fill(this.color.helmet[0],this.color.helmet[1],this.color.helmet[2],this.fade*this.fades.helmet)
                    this.layer.arc(0,-81,36,36,-180,0)
                    if(lcos(this.anim.direction)>0){
                        this.layer.rect(lsin(this.anim.direction)*18,-80,18*lcos(this.anim.direction),3)
                    }
                }
                if(this.name=='Management Sniper'&&this.trigger.display.monocle&&lcos(this.anim.direction-18)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.color.monocle[0],this.color.monocle[1],this.color.monocle[2],this.fade*this.fades.monocle/2)
                    this.layer.ellipse(lsin(this.anim.direction-18)*18,-78,8*lcos(this.anim.direction-18),8)
                }
                if(this.name=='Rebel Negotiator'&&this.trigger.display.monocle&&lcos(this.anim.direction-18)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.color.monocle[0][0],this.color.monocle[0][1],this.color.monocle[0][2],this.fade*this.fades.monocle/5)
                    this.layer.stroke(this.color.monocle[1][0],this.color.monocle[1][1],this.color.monocle[1][2],this.fade*this.fades.monocle)
                    this.layer.strokeWeight(0.75)
                    this.layer.ellipse(lsin(this.anim.direction-18)*16,-78,5.5*lcos(this.anim.direction-16),5.5)
                }
                if((this.name=='Management Officer'||this.name=='Management Caller')&&this.trigger.display.glasses&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.color.glasses[1][0],this.color.glasses[1][1],this.color.glasses[1][2],this.fade*this.fades.glasses/5)
                    this.layer.stroke(this.color.glasses[0][0],this.color.glasses[0][1],this.color.glasses[0][2],this.fade*this.fades.glasses)
                    this.layer.strokeWeight(1)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*-5,-77,6*lcos(this.anim.direction),3)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*5,-77,6*lcos(this.anim.direction),3)
                    this.layer.line(lsin(this.anim.direction)*15+lcos(this.anim.direction)*2,-77,lsin(this.anim.direction)*15-lcos(this.anim.direction)*2,-77)
                }
                if((this.name=='Deployer'||this.name=='Chief Deployer')&&this.trigger.display.glasses&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.color.glasses[1][0],this.color.glasses[1][1],this.color.glasses[1][2],this.fade*this.fades.glasses/5)
                    this.layer.stroke(this.color.glasses[0][0],this.color.glasses[0][1],this.color.glasses[0][2],this.fade*this.fades.glasses)
                    this.layer.strokeWeight(1)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*-4.5,-78,6*lcos(this.anim.direction),6)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*4.5,-78,6*lcos(this.anim.direction),6)
                    this.layer.line(lsin(this.anim.direction)*15+lcos(this.anim.direction)*1.5,-78,lsin(this.anim.direction)*15-lcos(this.anim.direction)*1.5,-78)
                }
                if(this.name=='Intern'&&this.trigger.display.glasses&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.color.glasses[1][0],this.color.glasses[1][1],this.color.glasses[1][2],this.fade*this.fades.glasses/5)
                    this.layer.stroke(this.color.glasses[0][0],this.color.glasses[0][1],this.color.glasses[0][2],this.fade*this.fades.glasses)
                    this.layer.strokeWeight(1)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*-4.5,-78,5*lcos(this.anim.direction),5)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*4.5,-78,5*lcos(this.anim.direction),5)
                    this.layer.line(lsin(this.anim.direction)*15+lcos(this.anim.direction)*2,-78,lsin(this.anim.direction)*15-lcos(this.anim.direction)*2,-78)
                }
                if((this.name=='PhD'||this.name=='Archivist')&&this.trigger.display.glasses&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.color.glasses[1][0],this.color.glasses[1][1],this.color.glasses[1][2],this.fade*this.fades.glasses/5)
                    this.layer.stroke(this.color.glasses[0][0],this.color.glasses[0][1],this.color.glasses[0][2],this.fade*this.fades.glasses)
                    this.layer.strokeWeight(1)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*-4,-77,5*lcos(this.anim.direction),5)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*4,-77,5*lcos(this.anim.direction),5)
                    this.layer.line(lsin(this.anim.direction)*15+lcos(this.anim.direction)*1.5,-77,lsin(this.anim.direction)*15-lcos(this.anim.direction)*1.5,-77)
                }
                if(this.name=='Management Custodian'&&this.trigger.display.hat){
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.noStroke()
                    this.layer.rect(0,-87,30,8)
                    this.layer.rect(21*lsin(this.anim.direction),-85,18,4)
                }
                if((this.name=='Lightspeed'||this.name=='Councilman'||this.name=='Avant Guard')&&this.trigger.display.wing){
                    this.layer.noFill()
                    this.layer.stroke(this.color.wing[0],this.color.wing[1],this.color.wing[2],this.fade*this.fades.wing)
                    this.layer.strokeWeight(3)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(a*180+this.anim.direction)>0.02){
                            if(lsin(a*180+this.anim.direction)<0){
                                this.layer.arc(0,-81,66*lcos(a*180+this.anim.direction),72,-5,85)
                                this.layer.arc(0,-87,48*lcos(a*180+this.anim.direction),60,-5,85)
                            }else{
                                this.layer.arc(0,-81,66*lcos(a*180+this.anim.direction),72,95,185)
                                this.layer.arc(0,-87,48*lcos(a*180+this.anim.direction),60,95,185)
                            }
                        }else if(lcos(a*180+this.anim.direction)>0){
                            this.layer.line(0,-45,0,-87)
                        }
                    }
                }
                if(this.name=='Anomaly'&&this.trigger.display.wing){
                    this.layer.noFill()
                    this.layer.stroke(this.color.wing[0],this.color.wing[1],this.color.wing[2],this.fade*this.fades.wing)
                    this.layer.strokeWeight(3)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(a*180+this.anim.direction)>0.02){
                            if(lsin(a*180+this.anim.direction)<0){
                                this.layer.arc(0,-81,48*lcos(a*180+this.anim.direction),80,-5,85)
                                this.layer.arc(0,-84,36*lcos(a*180+this.anim.direction),72,-5,85)
                                this.layer.arc(0,-87,24*lcos(a*180+this.anim.direction),64,-5,85)
                            }else{
                                this.layer.arc(0,-81,48*lcos(a*180+this.anim.direction),80,95,185)
                                this.layer.arc(0,-84,36*lcos(a*180+this.anim.direction),72,95,185)
                                this.layer.arc(0,-87,24*lcos(a*180+this.anim.direction),64,95,185)
                            }
                        }else if(lcos(a*180+this.anim.direction)>0){
                            this.layer.line(0,-87,0,-41)
                        }
                    }
                }
                if(this.name=='Champion'&&this.trigger.display.hat){
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.stroke(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.strokeWeight(5)
                    this.layer.line(-15,-90,15,-90)
                    this.layer.rect(0,-95,20,10,1)
                }
                if(this.name=='Wiz'&&this.trigger.display.hat){
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.stroke(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.strokeWeight(5)
                    this.layer.line(-18,-90,18,-90)
                    this.layer.triangle(-12,-90,12,-90,0,-114)
                }
                if(this.name=='Slow King'&&this.trigger.display.shield){
                    this.layer.fill(this.color.shield[0],this.color.shield[1],this.color.shield[2],this.fade*this.fades.shield*0.2)
                    this.layer.stroke(this.color.shield[0],this.color.shield[1],this.color.shield[2],this.fade*this.fades.shield)
                    this.layer.strokeWeight(3)
                    regPoly(this.layer,0,-48,7,56,56,game.timer*2)
                    regPoly(this.layer,0,-48,7,72,72,-game.timer*2)
                }
                if(this.name=='Jet'&&this.trigger.display.pack&&lcos(this.anim.direction+180)>=0){
                    this.layer.fill(this.color.pack[0],this.color.pack[1],this.color.pack[2],this.fade*this.fades.pack)
                    this.layer.noStroke()
                    this.layer.rect(lsin(this.anim.direction+180)*13,-48,12,36,2)
                    this.layer.fill(this.color.pack[0]-100,this.color.pack[1]-100,this.color.pack[2]-100,this.fade*this.fades.pack)
                    this.layer.rect(lsin(this.anim.direction+180)*13,-28,10,4)
                    this.layer.fill(255,150,0,this.fade*this.fades.pack/2)
                    this.layer.triangle(lsin(this.anim.direction+180)*13-4,-26,lsin(this.anim.direction+180)*13+4,-26,lsin(this.anim.direction+180)*13,-18+lsin(this.time*5)*2)
                    this.layer.fill(255,75,0,this.fade*this.fades.pack/2)
                    this.layer.triangle(lsin(this.anim.direction+180)*13-2,-26,lsin(this.anim.direction+180)*13+2,-26,lsin(this.anim.direction+180)*13,-22+lsin(this.time*5))
                }
                if(this.name=='Corrupt Detective'&&this.trigger.display.hat){
                    this.layer.fill(this.flashColor(this.color.hat[0])[0],this.flashColor(this.color.hat[0])[1],this.flashColor(this.color.hat[0])[2],this.fade*this.fades.hat)
                    this.layer.stroke(this.flashColor(this.color.hat[0])[0],this.flashColor(this.color.hat[0])[1],this.flashColor(this.color.hat[0])[2],this.fade*this.fades.hat)
                    this.layer.strokeWeight(4)
                    this.layer.line(-16,-90,16,-90)
                    this.layer.quad(-12,-90,12,-90,8,-98,-8,-98)
                    this.layer.fill(this.flashColor(this.color.hat[0])[1],this.flashColor(this.color.hat[1])[1],this.flashColor(this.color.hat[1])[2],this.fade*this.fades.hat)
                    this.layer.noStroke()
                    this.layer.quad(-13,-92,13,-92,11,-96,-11,-96)
                }
                if(this.name=='Riot Police'&&this.trigger.display.shield&&lcos(this.anim.direction)>=0){
                    this.layer.fill(this.flashColor(this.color.shield[0])[0],this.flashColor(this.color.shield[0])[1],this.flashColor(this.color.shield[0])[2],this.fade*this.fades.shield)
                    this.layer.noStroke()
                    this.layer.rect((this.graphics.arms[0].bottom.x+this.graphics.arms[1].bottom.x)/2+sin(this.anim.direction)*3,(this.graphics.arms[0].bottom.y+this.graphics.arms[1].bottom.y)/2,2+34*lcos(this.anim.direction),48,3)
                    this.layer.fill(this.flashColor(this.color.shield[1])[0],this.flashColor(this.color.shield[1])[1],this.flashColor(this.color.shield[1])[2],this.fade*this.fades.shield)
                    this.layer.rect((this.graphics.arms[0].bottom.x+this.graphics.arms[1].bottom.x)/2+sin(this.anim.direction)*3,(this.graphics.arms[0].bottom.y+this.graphics.arms[1].bottom.y)/2-15,1+23*lcos(this.anim.direction),6,3)
                }
                if(this.name=='Reichswehr'&&this.trigger.display.helmet){
                    this.layer.noStroke()
                    this.layer.fill(this.color.helmet[0][0],this.color.helmet[0][1],this.color.helmet[0][2],this.fade*this.fades.helmet)
                    this.layer.arc(0,-81,36,36,-180,0)
                    this.layer.fill(this.color.helmet[1][0],this.color.helmet[1][1],this.color.helmet[1][2],this.fade*this.fades.helmet)
                    this.layer.triangle(-3,-98,3,-98,0,-104)
                }
                if(this.name=='Beekeeper'&&this.trigger.display.helmet){
                    this.layer.noStroke()
                    this.layer.fill(this.color.helmet[0][0],this.color.helmet[0][1],this.color.helmet[0][2],this.fade*this.fades.helmet)
                    this.layer.quad(-18,-87,18,-87,9,-96,-9,-96)
                    this.layer.quad(-18,-75,18,-75,9,-66,-9,-66)
                    this.layer.fill(this.color.helmet[1][0],this.color.helmet[1][1],this.color.helmet[1][2],this.fade*this.fades.helmet)
                    for(let a=0,la=15;a<la;a++){
                        if(lcos(this.anim.direction+a*45)>0){
                            this.layer.rect(16*lsin(this.anim.direction+a*24),-81,2*lcos(this.anim.direction+a*24),12)
                        }
                    }
                }
                if(this.name=='Junkie'&&this.trigger.display.hat){
                    this.layer.fill(...this.flashColor(this.color.hat),this.fade*this.fades.hat)
                    this.layer.noStroke()
                    this.layer.rect(0,-91,30,12,3)
                    this.layer.rect(lsin(this.anim.direction+180)*15,-87,24,4)
                }
                if((this.name=='Councilman'||this.name=='Lunaria')&&this.trigger.display.halo){
                    this.layer.noFill()
                    this.layer.stroke(this.color.halo[0],this.color.halo[1],this.color.halo[2],this.fade*this.fades.halo)
                    this.layer.strokeWeight(2)
                    this.layer.ellipse(0,-96,22,8)
                }
                if(this.name=='Tech Support'&&this.trigger.display.hat){
                    this.layer.fill(...this.flashColor(this.color.hat),this.fade*this.fades.hat)
                    this.layer.noStroke()
                    this.layer.arc(0,-84,32,32,-180,0)
                    this.layer.rect(lsin(this.anim.direction)*-16,-86,20+abs(lcos(this.anim.direction))*8,4)
                    this.layer.stroke(this.flashColor(this.color.hat)[0]-50,this.flashColor(this.color.hat)[1]-50,this.flashColor(this.color.hat)[2]-50,this.fade*this.fades.hat)
                    this.layer.strokeWeight(1)
                    this.layer.noFill()
                    for(let a=0,la=10;a<la;a++){
                        if(lcos(this.anim.direction+a*36)>0){
                            if(lsin(this.anim.direction+a*36)>0){
                                this.layer.arc(0,-84.5,32*lsin(this.anim.direction+a*36),31,-90,0)
                            }else if(lsin(this.anim.direction+a*36)<0){
                                this.layer.arc(0,-84.5,-32*lsin(this.anim.direction+a*36),31,-180,-90)
                            }
                        }
                    }
                }
                if(this.name=='Vengeful'&&this.trigger.display.hat){
                    this.layer.stroke(this.color.hat[0][0],this.color.hat[0][1],this.color.hat[0][2],this.fade*this.fades.hat)
                    this.layer.fill(this.color.hat[0][0],this.color.hat[0][1],this.color.hat[0][2],this.fade*this.fades.hat)
                    this.layer.strokeWeight(4)
                    this.layer.line(-17,-87,17,-87)
                    this.layer.quad(-13,-87,13,-87,8,-96,-8,-96)
                    this.layer.stroke(this.color.hat[1][0],this.color.hat[1][1],this.color.hat[1][2],this.fade*this.fades.hat)
                    this.layer.line(-12,-91,12,-91)
                }
                if(this.name=='Divine Guard'&&this.trigger.display.hat){
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.noStroke()
                    this.layer.arc(0,-81,34,34,-180,0)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)>0){
                            this.layer.triangle(lsin(this.anim.direction-90+a*180)*15-lcos(this.anim.direction-90+a*180)*8,-81,lsin(this.anim.direction-90+a*180)*15+lcos(this.anim.direction-90+a*180)*8,-81,lsin(this.anim.direction-90+a*180)*15,-75)
                        }
                    }
                }
                if(this.name=='Lunaria'&&this.trigger.display.stars){
                    this.layer.noStroke()
                    this.layer.fill(this.color.stars[0],this.color.stars[1],this.color.stars[2],this.fade*this.fades.stars)
                    for(let a=0,la=9;a<la;a++){
                        if(lcos(a*40+this.anim.direction+this.time*3)>0){
                            regStar(this.layer,lsin(a*40+this.anim.direction+this.time*3)*20,-54+lcos(a*40+this.anim.direction+this.time*3)*6,5,lcos(a*40+this.anim.direction+this.time*3)*3,3,lcos(a*40+this.anim.direction+this.time*3)*1.5,1.5,this.time*3)
                        }
                        if(lcos(a*40+this.anim.direction+this.time*3+20)>0){
                            regStar(this.layer,lsin(a*40+this.anim.direction+this.time*3+20)*18,-18+lcos(a*40+this.anim.direction+this.time*3+20)*6,5,lcos(a*40+this.anim.direction+this.time*3+20)*3,3,lcos(a*40+this.anim.direction+this.time*3+20)*1.5,1.5,this.time*3)
                            regStar(this.layer,lsin(a*40+this.anim.direction+this.time*3+20)*18,-90+lcos(a*40+this.anim.direction+this.time*3+20)*6,5,lcos(a*40+this.anim.direction+this.time*3+20)*3,3,lcos(a*40+this.anim.direction+this.time*3+20)*1.5,1.5,this.time*3)
                        }
                    }
                }
                if(this.name=='Medic'&&this.trigger.display.mask&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.mask)[0],this.flashColor(this.color.mask)[1],this.flashColor(this.color.mask)[2],this.fade*this.fades.mask)
                    this.layer.rect(lsin(this.anim.direction)*14,-72,12*lcos(this.anim.direction),6,2)
                }
                if(this.name=='Smith'&&this.trigger.display.apron&&lcos(this.anim.direction)>0){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.apron)[0],this.flashColor(this.color.apron)[1],this.flashColor(this.color.apron)[2],this.fade*this.fades.apron)
                    this.layer.rect(lsin(this.anim.direction)*6,-42,12*lcos(this.anim.direction),36,4)
                }
                if(this.name=='Navigator'&&this.trigger.display.goggles&&lcos(this.anim.direction)>0){
                    this.layer.fill(this.color.goggles[1][0],this.color.goggles[1][1],this.color.goggles[1][2],this.fade*this.fades.goggles/2)
                    this.layer.stroke(this.color.goggles[0][0],this.color.goggles[0][1],this.color.goggles[0][2],this.fade*this.fades.goggles)
                    this.layer.strokeWeight(1)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*-5,-84,6*lcos(this.anim.direction),5)
                    this.layer.ellipse(lsin(this.anim.direction)*15+lcos(this.anim.direction)*5,-84,6*lcos(this.anim.direction),5)
                    this.layer.line(lsin(this.anim.direction)*15+lcos(this.anim.direction)*2,-84,lsin(this.anim.direction)*15-lcos(this.anim.direction)*2,-84)
                }
                if(this.name=='Jester'&&this.trigger.display.hat){
                    this.layer.noStroke()
                    this.layer.fill(this.color.hat[2][0],this.color.hat[2][1],this.color.hat[2][2],this.fade*this.fades.hat)
                    this.layer.rect(0,-90,30,6)
                    this.layer.fill(this.color.hat[1][0],this.color.hat[1][1],this.color.hat[1][2],this.fade*this.fades.hat)
                    this.layer.triangle(-15,-93,3,-93,-18,-111)
                    this.layer.triangle(15,-93,-3,-93,18,-111)
                    this.layer.fill(this.color.hat[0][0],this.color.hat[0][1],this.color.hat[0][2],this.fade*this.fades.hat)
                    this.layer.triangle(-9,-93,9,-93,0,-120)
                    this.layer.fill(this.color.hat[2][0],this.color.hat[2][1],this.color.hat[2][2],this.fade*this.fades.hat)
                    this.layer.ellipse(-18,-111,6)
                    this.layer.ellipse(18,-111,6)
                    this.layer.ellipse(0,-120,6)
                }
                if(this.name=='Obstruction'&&this.trigger.display.hat){
                    this.layer.fill(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.stroke(this.color.hat[0],this.color.hat[1],this.color.hat[2],this.fade*this.fades.hat)
                    this.layer.strokeWeight(3)
                    this.layer.line(-18,-90,18,-90)
                    this.layer.rect(0,-97,21,14,1)
                }
                if((this.name=='Structural Energy'||this.name=='Disorder Energy')&&this.trigger.display.horn){
                    this.layer.noStroke()
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)>=0){
                            this.layer.fill(this.color.horn[a][0],this.color.horn[a][1],this.color.horn[a][2],this.fade*this.fades.horn)
                            this.layer.beginShape()
                            this.layer.vertex(6*lsin(this.anim.direction-90+a*180),-95)
                            this.layer.bezierVertex(10*lsin(this.anim.direction-90+a*180),-96,13*lsin(this.anim.direction-90+a*180),-100,14*lsin(this.anim.direction-90+a*180),-103)
                            this.layer.bezierVertex(14*lsin(this.anim.direction-90+a*180),-99,12*lsin(this.anim.direction-90+a*180),-95,11*lsin(this.anim.direction-90+a*180),-91)
                            this.layer.endShape()
                        }
                    }
                }
                if((this.name=='Kugelblitz'||this.name=='Kugelblitz Particle')&&this.trigger.display.loop){
                    this.layer.stroke(...this.flashColor(this.color.loop),this.fade*this.fades.loop)
                    this.layer.strokeWeight(4)
                    this.layer.noFill()
                    this.layer.arc(0,-48,30,12,0,180)
                    this.layer.arc(0,-48,50,24,0,180)
                }
                if(this.name=='Intruder'&&this.trigger.display.arrow){
                    this.layer.noStroke()
                    this.layer.fill(this.flashColor(this.color.arrow)[0],this.flashColor(this.color.arrow)[1],this.flashColor(this.color.arrow)[2],this.fade*this.fades.arrow)
                    for(let a=0,la=2;a<la;a++){
                        if(lcos(this.anim.direction-90+a*180)>0){
                            this.layer.triangle(lsin(this.anim.direction-90+a*180)*3-lcos(this.anim.direction-90+a*180)*3,-64,lsin(this.anim.direction-90+a*180)*3+lcos(this.anim.direction-90+a*180)*3,-64,lsin(this.anim.direction-90+a*180)*9,-54)
                        }
                    }
                }
                if(this.name=='Recollection'&&this.trigger.display.dots){
                    this.layer.noStroke()
                    this.layer.fill(...this.flashColor(this.color.dots),this.fade*this.fades.dots)
                    for(let a=0,la=15;a<la;a++){
                        if(lcos(this.anim.direction+a*18+this.time)>0){
                            this.layer.ellipse(lsin(this.anim.direction+a*24+this.time)*24,-48+lcos(this.anim.direction+a*24+this.time)*12,3,1.5)
                            this.layer.ellipse(lsin(this.anim.direction+a*24+this.time)*28,-48+lcos(this.anim.direction+a*24+this.time)*14,3,1.5)
                            this.layer.ellipse(lsin(this.anim.direction+a*24+this.time)*32,-48+lcos(this.anim.direction+a*24+this.time)*16,3,1.5)
                            this.layer.ellipse(lsin(this.anim.direction+a*24+this.time)*36,-48+lcos(this.anim.direction+a*24+this.time)*18,3,1.5)
                        }
                    }
                }
                if(this.name=='Concentric'&&this.trigger.display.loops){
                    this.layer.stroke(...this.flashColor(this.color.loops),this.fade*this.fades.loops)
                    this.layer.strokeWeight(2)
                    this.layer.noFill()
                    for(let a=0,la=4;a<la;a++){
                        if(lcos(this.anim.direction+a*90+this.time*2)>0){
                            this.layer.ellipse(lsin(this.anim.direction+a*90+this.time*2)*20,-48+lcos(this.anim.direction+a*90+this.time)*10,20,10)
                        }
                        if(lcos(this.anim.direction+a*90-this.time*2)>0){
                            this.layer.ellipse(lsin(this.anim.direction+a*90-this.time*2)*18,-48+lcos(this.anim.direction+a*90-this.time)*9,16,8)
                        }
                    }
                }
                if(this.name=='Dimension Wanderer'&&this.trigger.display.circlet){
                    this.layer.fill(0,this.fade)
                    this.layer.rect(0,-92,24,2)
                    if(lcos(this.anim.direction)>0){
                        this.layer.fill(220,220,210,this.fade)
                        this.layer.quad(-3*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-90,3*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-100)
                        this.layer.fill(0,this.fade)
                        this.layer.quad(-2*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-92,2*lcos(this.anim.direction)+12*lsin(this.anim.direction),-95,12*lsin(this.anim.direction),-98)
                    }
                }
            break
        }
        if(this.name!='Agent Duck'&&this.team==0&&this.battle.initialized&&this.battle.modded(34)){
            this.layer.noFill()
            this.layer.stroke(240,240,40,this.fade)
            this.layer.strokeWeight(3)
            this.layer.strokeCap(SQUARE)
            this.layer.arc(-19.5,13.5,15,15,-135,45)
            this.layer.arc(-20.5,14.5,15,15,45,225)
            this.layer.strokeCap(ROUND)
            this.layer.noStroke()
            this.layer.fill(255,this.fade)
            this.layer.textSize(12)
            this.layer.text(this.combo,-20,14.5)
        }
        if(this.infoAnim.orb>0){
            for(let a=0,la=this.orbs.length;a<la;a++){
                if(lcos(this.time/game.animRate+360*a/la)>0){
                    displayOrb(this.layer,lsin(this.time/game.animRate+360*a/la)*30,-45+lcos(this.time/game.animRate+360*a/la)*10,this.infoAnim.orbSpec[a],this.orbDetail[a],0,1,this.fade*this.infoAnim.orb,a)
                }
            }
        }
        if(this.team>0&!this.construct&&!this.support){
            this.layer.translate(0,-48)
            if(this.infoAnim.elemental>0){
                this.layer.noFill()
                this.layer.stroke(150,200,255,this.fade*this.infoAnim.elemental*0.5)
                for(let a=0,la=6;a<la;a++){
                    if(lcos(this.anim.direction+a/la*360+this.time*0.5)>=0){
                        this.layer.strokeWeight(1)
                        this.layer.bezier(
                            -5*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,lsin(this.anim.direction+a/la*360+this.time)*12,
                            -3*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,-3.5+lsin(this.anim.direction+a/la*360+this.time)*12,
                            3*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,-3.5+lsin(this.anim.direction+a/la*360+this.time)*12,
                            5*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,lsin(this.anim.direction+a/la*360+this.time)*12)
                        this.layer.bezier(
                            -5*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,lsin(this.anim.direction+a/la*360+this.time)*12,
                            -3*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,3.5+lsin(this.anim.direction+a/la*360+this.time)*12,
                            3*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,3.5+lsin(this.anim.direction+a/la*360+this.time)*12,
                            5*lcos(this.anim.direction+a/la*360+this.time*0.5)+lsin(this.anim.direction+a/la*360+this.time*0.5)*33,lsin(this.anim.direction+a/la*360+this.time)*12)
                        this.layer.strokeWeight(3)
                        this.layer.point(lsin(this.anim.direction+a/la*360+this.time*0.5)*33,lsin(this.anim.direction+a/la*360+this.time)*12)
                    }
                    if(lcos(this.anim.direction+a/la*360-this.time*0.4)>=0){
                        this.layer.strokeWeight(1)
                        this.layer.bezier(
                            -5*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            -3*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,-3.5+lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            3*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,-3.5+lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            5*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,lsin(this.anim.direction+a/la*360+this.time*0.75)*18)
                        this.layer.bezier(
                            -5*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            -3*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,3.5+lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            3*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,3.5+lsin(this.anim.direction+a/la*360+this.time*0.75)*18,
                            5*lcos(this.anim.direction+a/la*360-this.time*0.4)+lsin(this.anim.direction+a/la*360-this.time*0.4)*27,lsin(this.anim.direction+a/la*360+this.time*0.75)*18)
                        this.layer.strokeWeight(3)
                        this.layer.point(lsin(this.anim.direction+a/la*360-this.time*0.4)*27,lsin(this.anim.direction+a/la*360+this.time*0.75)*18)
                    }
                }
            }
            this.layer.translate(0,48)
        }
        this.layer.pop()
    }
}